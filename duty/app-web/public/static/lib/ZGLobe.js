"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function o(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,o,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){e(2);var i,r=(i=e(15))&&i.__esModule?i:{default:i};r.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),r.default._babelPolyfill=!0},{15:15,2:2}],2:[function(e,t,n){e(3),e(5),e(4),e(11),e(10),e(13),e(12),e(14),e(7),e(8),e(6),e(9),e(306),e(307)},{10:10,11:11,12:12,13:13,14:14,3:3,306:306,307:307,4:4,5:5,6:6,7:7,8:8,9:9}],3:[function(e,t,n){e(278),e(214),e(216),e(215),e(218),e(220),e(225),e(219),e(217),e(227),e(226),e(222),e(223),e(221),e(213),e(224),e(228),e(229),e(180),e(182),e(181),e(231),e(230),e(201),e(211),e(212),e(202),e(203),e(204),e(205),e(206),e(207),e(208),e(209),e(210),e(184),e(185),e(186),e(187),e(188),e(189),e(190),e(191),e(192),e(193),e(194),e(195),e(196),e(197),e(198),e(199),e(200),e(265),e(270),e(277),e(268),e(260),e(261),e(266),e(271),e(273),e(256),e(257),e(258),e(259),e(262),e(263),e(264),e(267),e(269),e(272),e(274),e(275),e(276),e(175),e(177),e(176),e(179),e(178),e(163),e(161),e(168),e(165),e(171),e(173),e(160),e(167),e(157),e(172),e(155),e(170),e(169),e(162),e(166),e(154),e(156),e(159),e(158),e(174),e(164),e(247),e(248),e(254),e(249),e(250),e(251),e(252),e(253),e(232),e(183),e(255),e(290),e(291),e(279),e(280),e(285),e(288),e(289),e(283),e(286),e(284),e(287),e(281),e(282),e(233),e(234),e(235),e(236),e(237),e(240),e(238),e(239),e(241),e(242),e(243),e(244),e(246),e(245),t.exports=e(52)},{154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,52:52}],4:[function(e,t,n){e(292),t.exports=e(52).Array.flatMap},{292:292,52:52}],5:[function(e,t,n){e(293),t.exports=e(52).Array.includes},{293:293,52:52}],6:[function(e,t,n){e(294),t.exports=e(52).Object.entries},{294:294,52:52}],7:[function(e,t,n){e(295),t.exports=e(52).Object.getOwnPropertyDescriptors},{295:295,52:52}],8:[function(e,t,n){e(296),t.exports=e(52).Object.values},{296:296,52:52}],9:[function(e,t,n){e(232),e(297),t.exports=e(52).Promise.finally},{232:232,297:297,52:52}],10:[function(e,t,n){e(298),t.exports=e(52).String.padEnd},{298:298,52:52}],11:[function(e,t,n){e(299),t.exports=e(52).String.padStart},{299:299,52:52}],12:[function(e,t,n){e(301),t.exports=e(52).String.trimRight},{301:301,52:52}],13:[function(e,t,n){e(300),t.exports=e(52).String.trimLeft},{300:300,52:52}],14:[function(e,t,n){e(302),t.exports=e(151).f("asyncIterator")},{151:151,302:302}],15:[function(e,t,n){e(32),t.exports=e(18).global},{18:18,32:32}],16:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],17:[function(e,t,n){var i=e(28);t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{28:28}],18:[function(e,t,n){var i=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=i)},{}],19:[function(e,t,n){var o=e(16);t.exports=function(i,r,e){if(o(i),void 0===r)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}}},{16:16}],20:[function(e,t,n){t.exports=!e(23)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{23:23}],21:[function(e,t,n){var i=e(28),r=e(24).document,o=i(r)&&i(r.createElement);t.exports=function(e){return o?r.createElement(e):{}}},{24:24,28:28}],22:[function(e,t,n){function v(e,t,n){var i,r,o,a=e&v.F,s=e&v.G,l=e&v.S,c=e&v.P,u=e&v.B,f=e&v.W,p=s?g:g[t]||(g[t]={}),d=p[x],h=s?m:l?m[t]:(m[t]||{})[x];for(i in s&&(n=t),n)(r=!a&&h&&void 0!==h[i])&&w(p,i)||(o=r?h[i]:n[i],p[i]=s&&"function"!=typeof h[i]?n[i]:u&&r?y(o,m):f&&h[i]==o?function(i){function e(e,t,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,n)}return i.apply(this,arguments)}return e[x]=i[x],e}(o):c&&"function"==typeof o?y(Function.call,o):o,c&&((p.virtual||(p.virtual={}))[i]=o,e&v.R&&d&&!d[i]&&_(d,i,o)))}var m=e(24),g=e(18),y=e(19),_=e(26),w=e(25),x="prototype";v.F=1,v.G=2,v.S=4,v.P=8,v.B=16,v.W=32,v.U=64,v.R=128,t.exports=v},{18:18,19:19,24:24,25:25,26:26}],23:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],24:[function(e,t,n){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],25:[function(e,t,n){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],26:[function(e,t,n){var i=e(29),r=e(30);t.exports=e(20)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},{20:20,29:29,30:30}],27:[function(e,t,n){t.exports=!e(20)&&!e(23)(function(){return 7!=Object.defineProperty(e(21)("div"),"a",{get:function(){return 7}}).a})},{20:20,21:21,23:23}],28:[function(e,t,n){t.exports=function(e){return"object"==_typeof2(e)?null!==e:"function"==typeof e}},{}],29:[function(e,t,n){var i=e(17),r=e(27),o=e(31),a=Object.defineProperty;n.f=e(20)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{17:17,20:20,27:27,31:31}],30:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],31:[function(e,t,n){var r=e(28);t.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{28:28}],32:[function(e,t,n){var i=e(22);i(i.G,{global:e(24)})},{22:22,24:24}],33:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{16:16}],34:[function(e,t,n){var i=e(48);t.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},{48:48}],35:[function(e,t,n){var i=e(152)("unscopables"),r=Array.prototype;null==r[i]&&e(72)(r,i,{}),t.exports=function(e){r[i][e]=!0}},{152:152,72:72}],36:[function(e,t,n){var i=e(129)(!0);t.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},{129:129}],37:[function(e,t,n){t.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},{}],38:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{17:17,81:81}],39:[function(e,t,n){var u=e(142),f=e(137),p=e(141);t.exports=[].copyWithin||function(e,t,n){var i=u(this),r=p(i.length),o=f(e,r),a=f(t,r),s=2<arguments.length?n:void 0,l=Math.min((void 0===s?r:f(s,r))-a,r-o),c=1;for(a<o&&o<a+l&&(c=-1,a+=l-1,o+=l-1);0<l--;)a in i?i[o]=i[a]:delete i[o],o+=c,a+=c;return i}},{137:137,141:141,142:142}],40:[function(e,t,n){var c=e(142),u=e(137),f=e(141);t.exports=function(e,t,n){for(var i=c(this),r=f(i.length),o=arguments.length,a=u(1<o?t:void 0,r),s=2<o?n:void 0,l=void 0===s?r:u(s,r);a<l;)i[a++]=e;return i}},{137:137,141:141,142:142}],41:[function(e,t,n){var l=e(140),c=e(141),u=e(137);t.exports=function(s){return function(e,t,n){var i,r=l(e),o=c(r.length),a=u(n,o);if(s&&t!=t){for(;a<o;)if((i=r[a++])!=i)return!0}else for(;a<o;a++)if((s||a in r)&&r[a]===t)return s||a||0;return!s&&-1}}},{137:137,140:140,141:141}],42:[function(e,t,n){var _=e(54),w=e(77),x=e(142),b=e(141),i=e(45);t.exports=function(f,e){var p=1==f,d=2==f,h=3==f,v=4==f,m=6==f,g=5==f||m,y=e||i;return function(e,t,n){for(var i,r,o=x(e),a=w(o),s=_(t,n,3),l=b(a.length),c=0,u=p?y(e,l):d?y(e,0):void 0;c<l;c++)if((g||c in a)&&(r=s(i=a[c],c,o),f))if(p)u[c]=r;else if(r)switch(f){case 3:return!0;case 5:return i;case 6:return c;case 2:u.push(i)}else if(v)return!1;return m?-1:h||v?v:u}}},{141:141,142:142,45:45,54:54,77:77}],43:[function(e,t,n){var u=e(33),f=e(142),p=e(77),d=e(141);t.exports=function(e,t,n,i,r){u(t);var o=f(e),a=p(o),s=d(o.length),l=r?s-1:0,c=r?-1:1;if(n<2)for(;;){if(l in a){i=a[l],l+=c;break}if(l+=c,r?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;r?0<=l:l<s;l+=c)l in a&&(i=t(i,a[l],l,o));return i}},{141:141,142:142,33:33,77:77}],44:[function(e,t,n){var i=e(81),r=e(79),o=e(152)("species");t.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},{152:152,79:79,81:81}],45:[function(e,t,n){var i=e(44);t.exports=function(e,t){return new(i(e))(t)}},{44:44}],46:[function(e,t,n){var o=e(33),a=e(81),s=e(76),l=[].slice,c={};t.exports=Function.bind||function(t){function n(){var e=r.concat(l.call(arguments));return this instanceof n?function(e,t,n){if(!(t in c)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";c[t]=Function("F,a","return new F("+i.join(",")+")")}return c[t](e,n)}(i,e.length,e):s(i,e,t)}var i=o(this),r=l.call(arguments,1);return a(i.prototype)&&(n.prototype=i.prototype),n}},{33:33,76:76,81:81}],47:[function(e,t,n){var r=e(48),o=e(152)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},{152:152,48:48}],48:[function(e,t,n){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],49:[function(e,t,n){function a(e,t){var n,i=h(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n}var s=e(99).f,l=e(98),c=e(117),u=e(54),f=e(37),p=e(68),i=e(85),r=e(87),o=e(123),d=e(58),h=e(94).fastKey,v=e(149),m=d?"_s":"size";t.exports={getConstructor:function(e,o,n,i){var r=e(function(e,t){f(e,r,o,"_i"),e._t=o,e._i=l(null),e._f=void 0,e._l=void 0,e[m]=0,null!=t&&p(t,n,e[i],e)});return c(r.prototype,{clear:function(){for(var e=v(this,o),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=v(this,o),n=a(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[m]--}return!!n},forEach:function(e,t){v(this,o);for(var n,i=u(e,1<arguments.length?t:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!a(v(this,o),e)}}),d&&s(r.prototype,"size",{get:function(){return v(this,o)[m]}}),r},def:function(e,t,n){var i,r,o=a(e,t);return o?o.v=n:(e._l=o={i:r=h(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[m]++,"F"!==r&&(e._i[r]=o)),e},getEntry:a,setStrong:function(e,n,t){i(e,n,function(e,t){this._t=v(e,n),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?r(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,r(1))},t?"entries":"values",!t,!0),o(n)}}},{117:117,123:123,149:149,37:37,54:54,58:58,68:68,85:85,87:87,94:94,98:98,99:99}],50:[function(e,t,n){function a(e){return e._l||(e._l=new r)}function i(e,t){return v(e.a,function(e){return e[0]===t})}function r(){this.a=[]}var s=e(117),l=e(94).getWeak,o=e(38),c=e(81),u=e(37),f=e(68),p=e(42),d=e(71),h=e(149),v=p(5),m=p(6),g=0;r.prototype={get:function(e){var t=i(this,e);if(t)return t[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(t){var e=m(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(e,n,i,r){var o=e(function(e,t){u(e,o,n,"_i"),e._t=n,e._i=g++,e._l=void 0,null!=t&&f(t,i,e[r],e)});return s(o.prototype,{delete:function(e){if(!c(e))return!1;var t=l(e);return!0===t?a(h(this,n)).delete(e):t&&d(t,this._i)&&delete t[this._i]},has:function(e){if(!c(e))return!1;var t=l(e);return!0===t?a(h(this,n)).has(e):t&&d(t,this._i)}}),o},def:function(e,t,n){var i=l(o(t),!0);return!0===i?a(e).set(t,n):i[e._i]=n,e},ufstore:a}},{117:117,149:149,37:37,38:38,42:42,68:68,71:71,81:81,94:94}],51:[function(e,t,n){var g=e(70),y=e(62),_=e(118),w=e(117),x=e(94),b=e(68),P=e(37),C=e(81),T=e(64),k=e(86),E=e(124),M=e(75);t.exports=function(i,e,t,n,r,o){function a(e){var n=u[e];_(u,e,"delete"==e?function(e){return!(o&&!C(e))&&n.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!C(e))&&n.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!C(e)?void 0:n.call(this,0===e?0:e)}:"add"==e?function(e){return n.call(this,0===e?0:e),this}:function(e,t){return n.call(this,0===e?0:e,t),this})}var s=g[i],l=s,c=r?"set":"add",u=l&&l.prototype,f={};if("function"==typeof l&&(o||u.forEach&&!T(function(){(new l).entries().next()}))){var p=new l,d=p[c](o?{}:-0,1)!=p,h=T(function(){p.has(1)}),v=k(function(e){new l(e)}),m=!o&&T(function(){for(var e=new l,t=5;t--;)e[c](t,t);return!e.has(-0)});v||(((l=e(function(e,t){P(e,l,i);var n=M(new s,e,l);return null!=t&&b(t,r,n[c],n),n})).prototype=u).constructor=l),(h||m)&&(a("delete"),a("has"),r&&a("get")),(m||d)&&a(c),o&&u.clear&&delete u.clear}else l=n.getConstructor(e,i,r,c),w(l.prototype,t),x.NEED=!0;return E(l,i),f[i]=l,y(y.G+y.W+y.F*(l!=s),f),o||n.setStrong(l,i,r),l}},{117:117,118:118,124:124,37:37,62:62,64:64,68:68,70:70,75:75,81:81,86:86,94:94}],52:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{18:18}],53:[function(e,t,n){var i=e(99),r=e(116);t.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},{116:116,99:99}],54:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{19:19,33:33}],55:[function(e,t,n){function r(e){return 9<e?e:"0"+e}var i=e(64),o=Date.prototype.getTime,a=Date.prototype.toISOString;t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!i(function(){a.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":9999<t?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"."+(99<n?n:"0"+r(n))+"Z"}:a},{64:64}],56:[function(e,t,n){var i=e(38),r=e(143);t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),"number"!=e)}},{143:143,38:38}],57:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],58:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{20:20,64:64}],59:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{21:21,70:70,81:81}],60:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],61:[function(e,t,n){var s=e(107),l=e(104),c=e(108);t.exports=function(e){var t=s(e),n=l.f;if(n)for(var i,r=n(e),o=c.f,a=0;r.length>a;)o.call(e,i=r[a++])&&t.push(i);return t}},{104:104,107:107,108:108}],62:[function(e,t,n){function h(e,t,n){var i,r,o,a,s=e&h.F,l=e&h.G,c=e&h.P,u=e&h.B,f=l?v:e&h.S?v[t]||(v[t]={}):(v[t]||{})[w],p=l?m:m[t]||(m[t]={}),d=p[w]||(p[w]={});for(i in l&&(n=t),n)o=((r=!s&&f&&void 0!==f[i])?f:n)[i],a=u&&r?_(o,v):c&&"function"==typeof o?_(Function.call,o):o,f&&y(f,i,o,e&h.U),p[i]!=o&&g(p,i,a),c&&d[i]!=o&&(d[i]=o)}var v=e(70),m=e(52),g=e(72),y=e(118),_=e(54),w="prototype";v.core=m,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},{118:118,52:52,54:54,70:70,72:72}],63:[function(e,t,n){var i=e(152)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[i]=!1,!"/./"[t](n)}catch(e){}}return!0}},{152:152}],64:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{23:23}],65:[function(e,t,n){e(248);var u=e(118),f=e(72),p=e(64),d=e(57),h=e(152),v=e(120),m=h("species"),g=!p(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),y=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(n,e,t){var i=h(n),o=!p(function(){var e={};return e[i]=function(){return 7},7!=""[n](e)}),r=o?!p(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[m]=function(){return t}),t[i](""),!e}):void 0;if(!o||!r||"replace"===n&&!g||"split"===n&&!y){var a=/./[i],s=t(d,i,""[n],function(e,t,n,i,r){return t.exec===v?o&&!r?{done:!0,value:a.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),l=s[0],c=s[1];u(String.prototype,n,l),f(RegExp.prototype,i,2==e?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}}},{118:118,120:120,152:152,248:248,57:57,64:64,72:72}],66:[function(e,t,n){var i=e(38);t.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{38:38}],67:[function(e,t,n){var h=e(79),v=e(81),m=e(141),g=e(54),y=e(152)("isConcatSpreadable");t.exports=function e(t,n,i,r,o,a,s,l){for(var c,u,f=o,p=0,d=!!s&&g(s,l,3);p<r;){if(p in i){if(c=d?d(i[p],p,n):i[p],u=!1,v(c)&&(u=void 0!==(u=c[y])?!!u:h(c)),u&&0<a)f=e(t,n,c,m(c.length),f,a-1)-1;else{if(9007199254740991<=f)throw TypeError();t[f]=c}f++}p++}return f}},{141:141,152:152,54:54,79:79,81:81}],68:[function(e,t,n){var p=e(54),d=e(83),h=e(78),v=e(38),m=e(141),g=e(153),y={},_={};(n=t.exports=function(e,t,n,i,r){var o,a,s,l,c=r?function(){return e}:g(e),u=p(n,i,t?2:1),f=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(h(c)){for(o=m(e.length);f<o;f++)if((l=t?u(v(a=e[f])[0],a[1]):u(e[f]))===y||l===_)return l}else for(s=c.call(e);!(a=s.next()).done;)if((l=d(s,u,a.value,t))===y||l===_)return l}).BREAK=y,n.RETURN=_},{141:141,153:153,38:38,54:54,78:78,83:83}],69:[function(e,t,n){t.exports=e(126)("native-function-to-string",Function.toString)},{126:126}],70:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{24:24}],71:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{25:25}],72:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{116:116,26:26,58:58,99:99}],73:[function(e,t,n){var i=e(70).document;t.exports=i&&i.documentElement},{70:70}],74:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{27:27,58:58,59:59,64:64}],75:[function(e,t,n){var o=e(81),a=e(122).set;t.exports=function(e,t,n){var i,r=t.constructor;return r!==n&&"function"==typeof r&&(i=r.prototype)!==n.prototype&&o(i)&&a&&a(e,i),e}},{122:122,81:81}],76:[function(e,t,n){t.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],77:[function(e,t,n){var i=e(48);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{48:48}],78:[function(e,t,n){var i=e(88),r=e(152)("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},{152:152,88:88}],79:[function(e,t,n){var i=e(48);t.exports=Array.isArray||function(e){return"Array"==i(e)}},{48:48}],80:[function(e,t,n){var i=e(81),r=Math.floor;t.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},{81:81}],81:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{28:28}],82:[function(e,t,n){var i=e(81),r=e(48),o=e(152)("match");t.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},{152:152,48:48,81:81}],83:[function(e,t,n){var o=e(38);t.exports=function(e,t,n,i){try{return i?t(o(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&o(r.call(e)),t}}},{38:38}],84:[function(e,t,n){var i=e(98),r=e(116),o=e(124),a={};e(72)(a,e(152)("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},{116:116,124:124,152:152,72:72,98:98}],85:[function(e,t,n){function _(){return this}var w=e(89),x=e(62),b=e(118),P=e(72),C=e(88),T=e(84),k=e(124),E=e(105),M=e(152)("iterator"),S=!([].keys&&"next"in[].keys()),L="values";t.exports=function(e,t,n,i,r,o,a){function s(e){if(!S&&e in h)return h[e];switch(e){case"keys":case L:return function(){return new n(this,e)}}return function(){return new n(this,e)}}T(n,t,i);var l,c,u,f=t+" Iterator",p=r==L,d=!1,h=e.prototype,v=h[M]||h["@@iterator"]||r&&h[r],m=v||s(r),g=r?p?s("entries"):m:void 0,y="Array"==t&&h.entries||v;if(y&&(u=E(y.call(new e)))!==Object.prototype&&u.next&&(k(u,f,!0),w||"function"==typeof u[M]||P(u,M,_)),p&&v&&v.name!==L&&(d=!0,m=function(){return v.call(this)}),w&&!a||!S&&!d&&h[M]||P(h,M,m),C[t]=m,C[f]=_,r)if(l={values:p?m:s(L),keys:o?m:s("keys"),entries:g},a)for(c in l)c in h||b(h,c,l[c]);else x(x.P+x.F*(S||d),t,l);return l}},{105:105,118:118,124:124,152:152,62:62,72:72,84:84,88:88,89:89}],86:[function(e,t,n){var o=e(152)("iterator"),a=!1;try{var i=[7][o]();i.return=function(){a=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i=[7],r=i[o]();r.next=function(){return{done:n=!0}},i[o]=function(){return r},e(i)}catch(e){}return n}},{152:152}],87:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],88:[function(e,t,n){t.exports={}},{}],89:[function(e,t,n){t.exports=!1},{}],90:[function(e,t,n){var i=Math.expm1;t.exports=!i||22025.465794806718<i(10)||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:i},{}],91:[function(e,t,n){var o=e(93),i=Math.pow,a=i(2,-52),s=i(2,-23),l=i(2,127)*(2-s),c=i(2,-126);t.exports=Math.fround||function(e){var t,n,i=Math.abs(e),r=o(e);return i<c?r*(i/c/s+1/a-1/a)*c*s:l<(n=(t=(1+s/a)*i)-(t-i))||n!=n?r*(1/0):r*n}},{93:93}],92:[function(e,t,n){t.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],93:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],94:[function(e,t,n){function i(e){s(e,r,{value:{i:"O"+ ++l,w:{}}})}var r=e(147)("meta"),o=e(81),a=e(71),s=e(99).f,l=0,c=Object.isExtensible||function(){return!0},u=!e(64)(function(){return c(Object.preventExtensions({}))}),f=t.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==_typeof2(e)?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";i(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;i(e)}return e[r].w},onFreeze:function(e){return u&&f.NEED&&c(e)&&!a(e,r)&&i(e),e}}},{147:147,64:64,71:71,81:81,99:99}],95:[function(e,t,n){var s=e(70),l=e(136).set,c=s.MutationObserver||s.WebKitMutationObserver,u=s.process,f=s.Promise,p="process"==e(48)(u);t.exports=function(){function e(){var e,t;for(p&&(e=u.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?r():i=void 0,e}}i=void 0,e&&e.enter()}var n,i,r;if(p)r=function(){u.nextTick(e)};else if(!c||s.navigator&&s.navigator.standalone)if(f&&f.resolve){var t=f.resolve(void 0);r=function(){t.then(e)}}else r=function(){l.call(s,e)};else{var o=!0,a=document.createTextNode("");new c(e).observe(a,{characterData:!0}),r=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};i&&(i.next=t),n||(n=t,r()),i=t}}},{136:136,48:48,70:70}],96:[function(e,t,n){var r=e(33);function i(e){var n,i;this.promise=new e(function(e,t){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=e,i=t}),this.resolve=r(n),this.reject=r(i)}t.exports.f=function(e){return new i(e)}},{33:33}],97:[function(e,t,n){var p=e(58),d=e(107),h=e(104),v=e(108),m=e(142),g=e(77),r=Object.assign;t.exports=!r||e(64)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=r({},e)[n]||Object.keys(r({},t)).join("")!=i})?function(e,t){for(var n=m(e),i=arguments.length,r=1,o=h.f,a=v.f;r<i;)for(var s,l=g(arguments[r++]),c=o?d(l).concat(o(l)):d(l),u=c.length,f=0;f<u;)s=c[f++],p&&!a.call(l,s)||(n[s]=l[s]);return n}:r},{104:104,107:107,108:108,142:142,58:58,64:64,77:77}],98:[function(i,e,t){function r(){}var o=i(38),a=i(100),s=i(60),l=i(125)("IE_PROTO"),c="prototype",u=function(){var e,t=i(59)("iframe"),n=s.length;for(t.style.display="none",i(73).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u[c][s[n]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(r[c]=o(e),n=new r,r[c]=null,n[l]=e):n=u(),void 0===t?n:a(n,t)}},{100:100,125:125,38:38,59:59,60:60,73:73}],99:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{143:143,29:29,38:38,58:58,74:74}],100:[function(e,t,n){var a=e(99),s=e(38),l=e(107);t.exports=e(58)?Object.defineProperties:function(e,t){s(e);for(var n,i=l(t),r=i.length,o=0;o<r;)a.f(e,n=i[o++],t[n]);return e}},{107:107,38:38,58:58,99:99}],101:[function(e,t,n){var i=e(108),r=e(116),o=e(140),a=e(143),s=e(71),l=e(74),c=Object.getOwnPropertyDescriptor;n.f=e(58)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},{108:108,116:116,140:140,143:143,58:58,71:71,74:74}],102:[function(e,t,n){var i=e(140),r=e(103).f,o={}.toString,a="object"==("undefined"==typeof window?"undefined":_typeof2(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},{103:103,140:140}],103:[function(e,t,n){var i=e(106),r=e(60).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},{106:106,60:60}],104:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],105:[function(e,t,n){var i=e(71),r=e(142),o=e(125)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{125:125,142:142,71:71}],106:[function(e,t,n){var a=e(71),s=e(140),l=e(41)(!1),c=e(125)("IE_PROTO");t.exports=function(e,t){var n,i=s(e),r=0,o=[];for(n in i)n!=c&&a(i,n)&&o.push(n);for(;t.length>r;)a(i,n=t[r++])&&(~l(o,n)||o.push(n));return o}},{125:125,140:140,41:41,71:71}],107:[function(e,t,n){var i=e(106),r=e(60);t.exports=Object.keys||function(e){return i(e,r)}},{106:106,60:60}],108:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],109:[function(e,t,n){var r=e(62),o=e(52),a=e(64);t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},{52:52,62:62,64:64}],110:[function(e,t,n){var l=e(58),c=e(107),u=e(140),f=e(108).f;t.exports=function(s){return function(e){for(var t,n=u(e),i=c(n),r=i.length,o=0,a=[];o<r;)t=i[o++],l&&!f.call(n,t)||a.push(s?[t,n[t]]:n[t]);return a}}},{107:107,108:108,140:140,58:58}],111:[function(e,t,n){var i=e(103),r=e(104),o=e(38),a=e(70).Reflect;t.exports=a&&a.ownKeys||function(e){var t=i.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},{103:103,104:104,38:38,70:70}],112:[function(e,t,n){var i=e(70).parseFloat,r=e(134).trim;t.exports=1/i(e(135)+"-0")!=-1/0?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},{134:134,135:135,70:70}],113:[function(e,t,n){var i=e(70).parseInt,r=e(134).trim,o=e(135),a=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(a.test(n)?16:10))}:i},{134:134,135:135,70:70}],114:[function(e,t,n){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],115:[function(e,t,n){var i=e(38),r=e(81),o=e(96);t.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},{38:38,81:81,96:96}],116:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{30:30}],117:[function(e,t,n){var r=e(118);t.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},{118:118}],118:[function(e,t,n){var o=e(70),a=e(72),s=e(71),l=e(147)("src"),i=e(69),r="toString",c=(""+i).split(r);e(52).inspectSource=function(e){return i.call(e)},(t.exports=function(e,t,n,i){var r="function"==typeof n;r&&(s(n,"name")||a(n,"name",t)),e[t]!==n&&(r&&(s(n,l)||a(n,l,e[t]?""+e[t]:c.join(String(t)))),e===o?e[t]=n:i?e[t]?e[t]=n:a(e,t,n):(delete e[t],a(e,t,n)))})(Function.prototype,r,function(){return"function"==typeof this&&this[l]||i.call(this)})},{147:147,52:52,69:69,70:70,71:71,72:72}],119:[function(e,t,n){var r=e(47),o=RegExp.prototype.exec;t.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=_typeof2(i))throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},{47:47}],120:[function(e,t,n){var i,r,a=e(66),s=RegExp.prototype.exec,l=String.prototype.replace,o=s,c="lastIndex",u=(i=/a/,r=/b*/g,s.call(i,"a"),s.call(r,"a"),0!==i[c]||0!==r[c]),f=void 0!==/()??/.exec("")[1];(u||f)&&(o=function(e){var t,n,i,r,o=this;return f&&(n=new RegExp("^"+o.source+"$(?!\\s)",a.call(o))),u&&(t=o[c]),i=s.call(o,e),u&&i&&(o[c]=o.global?i.index+i[0].length:t),f&&i&&1<i.length&&l.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i}),t.exports=o},{66:66}],121:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],122:[function(t,e,n){function r(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var i=t(81),o=t(38);e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{(i=t(54)(Function.call,t(101).f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,t){return r(e,t),n?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:r}},{101:101,38:38,54:54,81:81}],123:[function(e,t,n){var i=e(70),r=e(99),o=e(58),a=e(152)("species");t.exports=function(e){var t=i[e];o&&t&&!t[a]&&r.f(t,a,{configurable:!0,get:function(){return this}})}},{152:152,58:58,70:70,99:99}],124:[function(e,t,n){var i=e(99).f,r=e(71),o=e(152)("toStringTag");t.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},{152:152,71:71,99:99}],125:[function(e,t,n){var i=e(126)("keys"),r=e(147);t.exports=function(e){return i[e]||(i[e]=r(e))}},{126:126,147:147}],126:[function(e,t,n){var i=e(52),r=e(70),o="__core-js_shared__",a=r[o]||(r[o]={});(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:e(89)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{52:52,70:70,89:89}],127:[function(e,t,n){var r=e(38),o=e(33),a=e(152)("species");t.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[a])?t:o(n)}},{152:152,33:33,38:38}],128:[function(e,t,n){var i=e(64);t.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},{64:64}],129:[function(e,t,n){var l=e(139),c=e(57);t.exports=function(s){return function(e,t){var n,i,r=String(c(e)),o=l(t),a=r.length;return o<0||a<=o?s?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):n:s?r.slice(o,o+2):i-56320+(n-55296<<10)+65536}}},{139:139,57:57}],130:[function(e,t,n){var i=e(82),r=e(57);t.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},{57:57,82:82}],131:[function(e,t,n){function i(e,t,n,i){var r=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+r+"</"+t+">"}var r=e(62),o=e(64),a=e(57),s=/"/g;t.exports=function(t,e){var n={};n[t]=e(i),r(r.P+r.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",n)}},{57:57,62:62,64:64}],132:[function(e,t,n){var u=e(141),f=e(133),p=e(57);t.exports=function(e,t,n,i){var r=String(p(e)),o=r.length,a=void 0===n?" ":String(n),s=u(t);if(s<=o||""==a)return r;var l=s-o,c=f.call(a,Math.ceil(l/a.length));return c.length>l&&(c=c.slice(0,l)),i?c+r:r+c}},{133:133,141:141,57:57}],133:[function(e,t,n){var r=e(139),o=e(57);t.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},{139:139,57:57}],134:[function(e,t,n){function i(e,t,n){var i={},r=s(function(){return!!l[e]()||"​"!="​"[e]()}),o=i[e]=r?t(f):l[e];n&&(i[n]=o),a(a.P+a.F*r,"String",i)}var a=e(62),r=e(57),s=e(64),l=e(135),o="["+l+"]",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),f=i.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};t.exports=i},{135:135,57:57,62:62,64:64}],135:[function(e,t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],136:[function(e,t,n){function i(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}}function r(e){i.call(e.data)}var o,a,s,l=e(54),c=e(76),u=e(73),f=e(59),p=e(70),d=p.process,h=p.setImmediate,v=p.clearImmediate,m=p.MessageChannel,g=p.Dispatch,y=0,_={},w="onreadystatechange";h&&v||(h=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return _[++y]=function(){c("function"==typeof e?e:Function(e),t)},o(y),y},v=function(e){delete _[e]},"process"==e(48)(d)?o=function(e){d.nextTick(l(i,e,1))}:g&&g.now?o=function(e){g.now(l(i,e,1))}:m?(s=(a=new m).port2,a.port1.onmessage=r,o=l(s.postMessage,s,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(o=function(e){p.postMessage(e+"","*")},p.addEventListener("message",r,!1)):o=w in f("script")?function(e){u.appendChild(f("script"))[w]=function(){u.removeChild(this),i.call(e)}}:function(e){setTimeout(l(i,e,1),0)}),t.exports={set:h,clear:v}},{48:48,54:54,59:59,70:70,73:73,76:76}],137:[function(e,t,n){var i=e(139),r=Math.max,o=Math.min;t.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},{139:139}],138:[function(e,t,n){var i=e(139),r=e(141);t.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length!");return n}},{139:139,141:141}],139:[function(e,t,n){var i=Math.ceil,r=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?r:i)(e)}},{}],140:[function(e,t,n){var i=e(77),r=e(57);t.exports=function(e){return i(r(e))}},{57:57,77:77}],141:[function(e,t,n){var i=e(139),r=Math.min;t.exports=function(e){return 0<e?r(i(e),9007199254740991):0}},{139:139}],142:[function(e,t,n){var i=e(57);t.exports=function(e){return Object(i(e))}},{57:57}],143:[function(e,t,n){arguments[4][31][0].apply(n,arguments)},{31:31,81:81}],144:[function(e,t,n){if(e(58)){var g=e(89),y=e(70),_=e(64),w=e(62),x=e(146),i=e(145),h=e(54),b=e(37),r=e(116),P=e(72),o=e(117),a=e(139),C=e(141),T=e(138),s=e(137),l=e(143),c=e(71),k=e(47),E=e(81),v=e(142),m=e(78),M=e(98),S=e(105),L=e(103).f,A=e(153),u=e(147),f=e(152),p=e(42),d=e(41),I=e(127),D=e(164),R=e(88),F=e(86),z=e(123),N=e(40),O=e(39),H=e(99),j=e(101),U=H.f,B=j.f,W=y.RangeError,G=y.TypeError,V=y.Uint8Array,Z="ArrayBuffer",X="Shared"+Z,Y="BYTES_PER_ELEMENT",K="prototype",$=Array[K],q=i.ArrayBuffer,J=i.DataView,Q=p(0),ee=p(2),te=p(3),ne=p(4),ie=p(5),re=p(6),oe=d(!0),ae=d(!1),se=D.values,le=D.keys,ce=D.entries,ue=$.lastIndexOf,fe=$.reduce,pe=$.reduceRight,de=$.join,he=$.sort,ve=$.slice,me=$.toString,ge=$.toLocaleString,ye=f("iterator"),_e=f("toStringTag"),we=u("typed_constructor"),xe=u("def_constructor"),be=x.CONSTR,Pe=x.TYPED,Ce=x.VIEW,Te="Wrong length!",ke=p(1,function(e,t){return Ae(I(e,e[xe]),t)}),Ee=_(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Me=!!V&&!!V[K].set&&_(function(){new V(1).set({})}),Se=function(e,t){var n=a(e);if(n<0||n%t)throw W("Wrong offset!");return n},Le=function(e){if(E(e)&&Pe in e)return e;throw G(e+" is not a typed array!")},Ae=function(e,t){if(!(E(e)&&we in e))throw G("It is not a typed array constructor!");return new e(t)},Ie=function(e,t){return De(I(e,e[xe]),t)},De=function(e,t){for(var n=0,i=t.length,r=Ae(e,i);n<i;)r[n]=t[n++];return r},Re=function(e,t,n){U(e,t,{get:function(){return this._d[n]}})},Fe=function(e,t,n){var i,r,o,a,s,l,c=v(e),u=arguments.length,f=1<u?t:void 0,p=void 0!==f,d=A(c);if(null!=d&&!m(d)){for(l=d.call(c),o=[],i=0;!(s=l.next()).done;i++)o.push(s.value);c=o}for(p&&2<u&&(f=h(f,n,2)),i=0,r=C(c.length),a=Ae(this,r);i<r;i++)a[i]=p?f(c[i],i):c[i];return a},ze=function(){for(var e=0,t=arguments.length,n=Ae(this,t);e<t;)n[e]=arguments[e++];return n},Ne=!!V&&_(function(){ge.call(new V(1))}),Oe=function(){return ge.apply(Ne?ve.call(Le(this)):Le(this),arguments)},He={copyWithin:function(e,t,n){return O.call(Le(this),e,t,2<arguments.length?n:void 0)},every:function(e,t){return ne(Le(this),e,1<arguments.length?t:void 0)},fill:function(e){return N.apply(Le(this),arguments)},filter:function(e,t){return Ie(this,ee(Le(this),e,1<arguments.length?t:void 0))},find:function(e,t){return ie(Le(this),e,1<arguments.length?t:void 0)},findIndex:function(e,t){return re(Le(this),e,1<arguments.length?t:void 0)},forEach:function(e,t){Q(Le(this),e,1<arguments.length?t:void 0)},indexOf:function(e,t){return ae(Le(this),e,1<arguments.length?t:void 0)},includes:function(e,t){return oe(Le(this),e,1<arguments.length?t:void 0)},join:function(e){return de.apply(Le(this),arguments)},lastIndexOf:function(e){return ue.apply(Le(this),arguments)},map:function(e,t){return ke(Le(this),e,1<arguments.length?t:void 0)},reduce:function(e){return fe.apply(Le(this),arguments)},reduceRight:function(e){return pe.apply(Le(this),arguments)},reverse:function(){for(var e,t=this,n=Le(t).length,i=Math.floor(n/2),r=0;r<i;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e,t){return te(Le(this),e,1<arguments.length?t:void 0)},sort:function(e){return he.call(Le(this),e)},subarray:function(e,t){var n=Le(this),i=n.length,r=s(e,i);return new(I(n,n[xe]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,C((void 0===t?i:s(t,i))-r))}},je=function(e,t){return Ie(this,ve.call(Le(this),e,t))},Ue=function(e,t){Le(this);var n=Se(t,1),i=this.length,r=v(e),o=C(r.length),a=0;if(i<o+n)throw W(Te);for(;a<o;)this[n+a]=r[a++]},Be={entries:function(){return ce.call(Le(this))},keys:function(){return le.call(Le(this))},values:function(){return se.call(Le(this))}},We=function(e,t){return E(e)&&e[Pe]&&"symbol"!=_typeof2(t)&&t in e&&String(+t)==String(t)},Ge=function(e,t){return We(e,t=l(t,!0))?r(2,e[t]):B(e,t)},Ve=function(e,t,n){return!(We(e,t=l(t,!0))&&E(n)&&c(n,"value"))||c(n,"get")||c(n,"set")||n.configurable||c(n,"writable")&&!n.writable||c(n,"enumerable")&&!n.enumerable?U(e,t,n):(e[t]=n.value,e)};be||(j.f=Ge,H.f=Ve),w(w.S+w.F*!be,"Object",{getOwnPropertyDescriptor:Ge,defineProperty:Ve}),_(function(){me.call({})})&&(me=ge=function(){return de.call(this)});var Ze=o({},He);o(Ze,Be),P(Ze,ye,Be.values),o(Ze,{slice:je,set:Ue,constructor:function(){},toString:me,toLocaleString:Oe}),Re(Ze,"buffer","b"),Re(Ze,"byteOffset","o"),Re(Ze,"byteLength","l"),Re(Ze,"length","e"),U(Ze,_e,{get:function(){return this[Pe]}}),t.exports=function(e,f,t,o){function p(e,r){U(e,r,{get:function(){return e=r,(t=this._d).v[n](e*f+t.o,Ee);var e,t},set:function(e){return t=r,n=e,i=this._d,o&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),void i.v[a](t*f+i.o,n,Ee);var t,n,i},enumerable:!0})}var d=e+((o=!!o)?"Clamped":"")+"Array",n="get"+e,a="set"+e,h=y[d],s=h||{},i=h&&S(h),r=!h||!x.ABV,l={},c=h&&h[K];r?(h=t(function(e,t,n,i){b(e,h,d,"_d");var r,o,a,s,l=0,c=0;if(E(t)){if(!(t instanceof q||(s=k(t))==Z||s==X))return Pe in t?De(h,t):Fe.call(h,t);r=t,c=Se(n,f);var u=t.byteLength;if(void 0===i){if(u%f)throw W(Te);if((o=u-c)<0)throw W(Te)}else if(u<(o=C(i)*f)+c)throw W(Te);a=o/f}else a=T(t),r=new q(o=a*f);for(P(e,"_d",{b:r,o:c,l:o,e:a,v:new J(r)});l<a;)p(e,l++)}),c=h[K]=M(Ze),P(c,"constructor",h)):_(function(){h(1)})&&_(function(){new h(-1)})&&F(function(e){new h,new h(null),new h(1.5),new h(e)},!0)||(h=t(function(e,t,n,i){var r;return b(e,h,d),E(t)?t instanceof q||(r=k(t))==Z||r==X?void 0!==i?new s(t,Se(n,f),i):void 0!==n?new s(t,Se(n,f)):new s(t):Pe in t?De(h,t):Fe.call(h,t):new s(T(t))}),Q(i!==Function.prototype?L(s).concat(L(i)):L(s),function(e){e in h||P(h,e,s[e])}),h[K]=c,g||(c.constructor=h));var u=c[ye],v=!!u&&("values"==u.name||null==u.name),m=Be.values;P(h,we,!0),P(c,Pe,d),P(c,Ce,!0),P(c,xe,h),(o?new h(1)[_e]==d:_e in c)||U(c,_e,{get:function(){return d}}),l[d]=h,w(w.G+w.W+w.F*(h!=s),l),w(w.S,d,{BYTES_PER_ELEMENT:f}),w(w.S+w.F*_(function(){s.of.call(h,1)}),d,{from:Fe,of:ze}),Y in c||P(c,Y,f),w(w.P,d,He),z(d),w(w.P+w.F*Me,d,{set:Ue}),w(w.P+w.F*!v,d,Be),g||c.toString==me||(c.toString=me),w(w.P+w.F*_(function(){new h(1).slice()}),d,{slice:je}),w(w.P+w.F*(_(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!_(function(){c.toLocaleString.call([1,2])})),d,{toLocaleString:Oe}),R[d]=v?u:m,g||v||P(c,ye,m)}}else t.exports=function(){}},{101:101,103:103,105:105,116:116,117:117,123:123,127:127,137:137,138:138,139:139,141:141,142:142,143:143,145:145,146:146,147:147,152:152,153:153,164:164,37:37,39:39,40:40,41:41,42:42,47:47,54:54,58:58,62:62,64:64,70:70,71:71,72:72,78:78,81:81,86:86,88:88,89:89,98:98,99:99}],145:[function(e,t,n){var i=e(70),r=e(58),o=e(89),a=e(146),s=e(72),l=e(117),c=e(64),u=e(37),f=e(139),p=e(141),d=e(138),h=e(103).f,v=e(99).f,m=e(40),g=e(124),y="ArrayBuffer",_="DataView",w="prototype",x="Wrong index!",b=i[y],P=i[_],C=i.Math,T=i.RangeError,k=i.Infinity,E=b,M=C.abs,S=C.pow,L=C.floor,A=C.log,I=C.LN2,D="byteLength",R="byteOffset",F=r?"_b":"buffer",z=r?"_l":D,N=r?"_o":R;function O(e,t,n){var i,r,o,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,c=l>>1,u=23===t?S(2,-24)-S(2,-77):0,f=0,p=e<0||0===e&&1/e<0?1:0;for((e=M(e))!=e||e===k?(r=e!=e?1:0,i=l):(i=L(A(e)/I),e*(o=S(2,-i))<1&&(i--,o*=2),2<=(e+=1<=i+c?u/o:u*S(2,1-c))*o&&(i++,o/=2),l<=i+c?(r=0,i=l):1<=i+c?(r=(e*o-1)*S(2,t),i+=c):(r=e*S(2,c-1)*S(2,t),i=0));8<=t;a[f++]=255&r,r/=256,t-=8);for(i=i<<t|r,s+=t;0<s;a[f++]=255&i,i/=256,s-=8);return a[--f]|=128*p,a}function H(e,t,n){var i,r=8*n-t-1,o=(1<<r)-1,a=o>>1,s=r-7,l=n-1,c=e[l--],u=127&c;for(c>>=7;0<s;u=256*u+e[l],l--,s-=8);for(i=u&(1<<-s)-1,u>>=-s,s+=t;0<s;i=256*i+e[l],l--,s-=8);if(0===u)u=1-a;else{if(u===o)return i?NaN:c?-k:k;i+=S(2,t),u-=a}return(c?-1:1)*i*S(2,u-t)}function j(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function U(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function W(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function G(e){return O(e,52,8)}function V(e){return O(e,23,4)}function Z(e,t,n){v(e[w],t,{get:function(){return this[n]}})}function X(e,t,n,i){var r=d(+n);if(r+t>e[z])throw T(x);var o=e[F]._b,a=r+e[N],s=o.slice(a,a+t);return i?s:s.reverse()}function Y(e,t,n,i,r,o){var a=d(+n);if(a+t>e[z])throw T(x);for(var s=e[F]._b,l=a+e[N],c=i(+r),u=0;u<t;u++)s[l+u]=c[o?u:t-u-1]}if(a.ABV){if(!c(function(){b(1)})||!c(function(){new b(-1)})||c(function(){return new b,new b(1.5),new b(NaN),b.name!=y})){for(var K,$=(b=function(e){return u(this,b),new E(d(e))})[w]=E[w],q=h(E),J=0;q.length>J;)(K=q[J++])in b||s(b,K,E[K]);o||($.constructor=b)}var Q=new P(new b(2)),ee=P[w].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||l(P[w],{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else b=function(e){u(this,b,y);var t=d(e);this._b=m.call(new Array(t),0),this[z]=t},P=function(e,t,n){u(this,P,_),u(e,b,_);var i=e[z],r=f(t);if(r<0||i<r)throw T("Wrong offset!");if(i<r+(n=void 0===n?i-r:p(n)))throw T("Wrong length!");this[F]=e,this[N]=r,this[z]=n},r&&(Z(b,D,"_l"),Z(P,"buffer","_b"),Z(P,D,"_l"),Z(P,R,"_o")),l(P[w],{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e,t){var n=X(this,2,e,t);return(n[1]<<8|n[0])<<16>>16},getUint16:function(e,t){var n=X(this,2,e,t);return n[1]<<8|n[0]},getInt32:function(e,t){return j(X(this,4,e,t))},getUint32:function(e,t){return j(X(this,4,e,t))>>>0},getFloat32:function(e,t){return H(X(this,4,e,t),23,4)},getFloat64:function(e,t){return H(X(this,8,e,t),52,8)},setInt8:function(e,t){Y(this,1,e,U,t)},setUint8:function(e,t){Y(this,1,e,U,t)},setInt16:function(e,t,n){Y(this,2,e,B,t,n)},setUint16:function(e,t,n){Y(this,2,e,B,t,n)},setInt32:function(e,t,n){Y(this,4,e,W,t,n)},setUint32:function(e,t,n){Y(this,4,e,W,t,n)},setFloat32:function(e,t,n){Y(this,4,e,V,t,n)},setFloat64:function(e,t,n){Y(this,8,e,G,t,n)}});g(b,y),g(P,_),s(P[w],a.VIEW,!0),n[y]=b,n[_]=P},{103:103,117:117,124:124,138:138,139:139,141:141,146:146,37:37,40:40,58:58,64:64,70:70,72:72,89:89,99:99}],146:[function(e,t,n){for(var i,r=e(70),o=e(72),a=e(147),s=a("typed_array"),l=a("view"),c=!(!r.ArrayBuffer||!r.DataView),u=c,f=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(i=r[p[f++]])?(o(i.prototype,s,!0),o(i.prototype,l,!0)):u=!1;t.exports={ABV:c,CONSTR:u,TYPED:s,VIEW:l}},{147:147,70:70,72:72}],147:[function(e,t,n){var i=0,r=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+r).toString(36))}},{}],148:[function(e,t,n){var i=e(70).navigator;t.exports=i&&i.userAgent||""},{70:70}],149:[function(e,t,n){var i=e(81);t.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{81:81}],150:[function(e,t,n){var i=e(70),r=e(52),o=e(89),a=e(151),s=e(99).f;t.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{151:151,52:52,70:70,89:89,99:99}],151:[function(e,t,n){n.f=e(152)},{152:152}],152:[function(e,t,n){var i=e(126)("wks"),r=e(147),o=e(70).Symbol,a="function"==typeof o;(t.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},{126:126,147:147,70:70}],153:[function(e,t,n){var i=e(47),r=e(152)("iterator"),o=e(88);t.exports=e(52).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||o[i(e)]}},{152:152,47:47,52:52,88:88}],154:[function(e,t,n){var i=e(62);i(i.P,"Array",{copyWithin:e(39)}),e(35)("copyWithin")},{35:35,39:39,62:62}],155:[function(e,t,n){var i=e(62),r=e(42)(4);i(i.P+i.F*!e(128)([].every,!0),"Array",{every:function(e,t){return r(this,e,t)}})},{128:128,42:42,62:62}],156:[function(e,t,n){var i=e(62);i(i.P,"Array",{fill:e(40)}),e(35)("fill")},{35:35,40:40,62:62}],157:[function(e,t,n){var i=e(62),r=e(42)(2);i(i.P+i.F*!e(128)([].filter,!0),"Array",{filter:function(e,t){return r(this,e,t)}})},{128:128,42:42,62:62}],158:[function(e,t,n){var i=e(62),r=e(42)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(e,t){return r(this,e,1<arguments.length?t:void 0)}}),e(35)(o)},{35:35,42:42,62:62}],159:[function(e,t,n){var i=e(62),r=e(42)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(e,t){return r(this,e,1<arguments.length?t:void 0)}}),e(35)(o)},{35:35,42:42,62:62}],160:[function(e,t,n){var i=e(62),r=e(42)(0),o=e(128)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e,t){return r(this,e,t)}})},{128:128,42:42,62:62}],161:[function(e,t,n){var h=e(54),i=e(62),v=e(142),m=e(83),g=e(78),y=e(141),_=e(53),w=e(153);i(i.S+i.F*!e(86)(function(e){Array.from(e)}),"Array",{from:function(e,t,n){var i,r,o,a,s=v(e),l="function"==typeof this?this:Array,c=arguments.length,u=1<c?t:void 0,f=void 0!==u,p=0,d=w(s);if(f&&(u=h(u,2<c?n:void 0,2)),null==d||l==Array&&g(d))for(r=new l(i=y(s.length));p<i;p++)_(r,p,f?u(s[p],p):s[p]);else for(a=d.call(s),r=new l;!(o=a.next()).done;p++)_(r,p,f?m(a,u,[o.value,p],!0):o.value);return r.length=p,r}})},{141:141,142:142,153:153,53:53,54:54,62:62,78:78,83:83,86:86}],162:[function(e,t,n){var i=e(62),r=e(41)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!e(128)(o)),"Array",{indexOf:function(e,t){return a?o.apply(this,arguments)||0:r(this,e,t)}})},{128:128,41:41,62:62}],163:[function(e,t,n){var i=e(62);i(i.S,"Array",{isArray:e(79)})},{62:62,79:79}],164:[function(e,t,n){var i=e(35),r=e(87),o=e(88),a=e(140);t.exports=e(85)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},{140:140,35:35,85:85,87:87,88:88}],165:[function(e,t,n){var i=e(62),r=e(140),o=[].join;i(i.P+i.F*(e(77)!=Object||!e(128)(o)),"Array",{join:function(e){return o.call(r(this),void 0===e?",":e)}})},{128:128,140:140,62:62,77:77}],166:[function(e,t,n){var i=e(62),o=e(140),a=e(139),s=e(141),l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!e(128)(l)),"Array",{lastIndexOf:function(e,t){if(c)return l.apply(this,arguments)||0;var n=o(this),i=s(n.length),r=i-1;for(1<arguments.length&&(r=Math.min(r,a(t))),r<0&&(r=i+r);0<=r;r--)if(r in n&&n[r]===e)return r||0;return-1}})},{128:128,139:139,140:140,141:141,62:62}],167:[function(e,t,n){var i=e(62),r=e(42)(1);i(i.P+i.F*!e(128)([].map,!0),"Array",{map:function(e,t){return r(this,e,t)}})},{128:128,42:42,62:62}],168:[function(e,t,n){var i=e(62),r=e(53);i(i.S+i.F*e(64)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);e<t;)r(n,e,arguments[e++]);return n.length=t,n}})},{53:53,62:62,64:64}],169:[function(e,t,n){var i=e(62),r=e(43);i(i.P+i.F*!e(128)([].reduceRight,!0),"Array",{reduceRight:function(e,t){return r(this,e,arguments.length,t,!0)}})},{128:128,43:43,62:62}],170:[function(e,t,n){var i=e(62),r=e(43);i(i.P+i.F*!e(128)([].reduce,!0),"Array",{reduce:function(e,t){return r(this,e,arguments.length,t,!1)}})},{128:128,43:43,62:62}],171:[function(e,t,n){var i=e(62),r=e(73),c=e(48),u=e(137),f=e(141),p=[].slice;i(i.P+i.F*e(64)(function(){r&&p.call(r)}),"Array",{slice:function(e,t){var n=f(this.length),i=c(this);if(t=void 0===t?n:t,"Array"==i)return p.call(this,e,t);for(var r=u(e,n),o=u(t,n),a=f(o-r),s=new Array(a),l=0;l<a;l++)s[l]="String"==i?this.charAt(r+l):this[r+l];return s}})},{137:137,141:141,48:48,62:62,64:64,73:73}],172:[function(e,t,n){var i=e(62),r=e(42)(3);i(i.P+i.F*!e(128)([].some,!0),"Array",{some:function(e,t){return r(this,e,t)}})},{128:128,42:42,62:62}],173:[function(e,t,n){var i=e(62),r=e(33),o=e(142),a=e(64),s=[].sort,l=[1,2,3];i(i.P+i.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!e(128)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),r(e))}})},{128:128,142:142,33:33,62:62,64:64}],174:[function(e,t,n){e(123)("Array")},{123:123}],175:[function(e,t,n){var i=e(62);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},{62:62}],176:[function(e,t,n){var i=e(62),r=e(55);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},{55:55,62:62}],177:[function(e,t,n){var i=e(62),r=e(142),o=e(143);i(i.P+i.F*e(64)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(){var e=r(this),t=o(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}})},{142:142,143:143,62:62,64:64}],178:[function(e,t,n){var i=e(152)("toPrimitive"),r=Date.prototype;i in r||e(72)(r,i,e(56))},{152:152,56:56,72:72}],179:[function(e,t,n){var i=Date.prototype,r="Invalid Date",o="toString",a=i[o],s=i.getTime;new Date(NaN)+""!=r&&e(118)(i,o,function(){var e=s.call(this);return e==e?a.call(this):r})},{118:118}],180:[function(e,t,n){var i=e(62);i(i.P,"Function",{bind:e(46)})},{46:46,62:62}],181:[function(e,t,n){var i=e(81),r=e(105),o=e(152)("hasInstance"),a=Function.prototype;o in a||e(99).f(a,o,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},{105:105,152:152,81:81,99:99}],182:[function(e,t,n){var i=e(99).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||e(58)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},{58:58,99:99}],183:[function(e,t,n){var i=e(49),r=e(149);t.exports=e(51)("Map",function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},{149:149,49:49,51:51}],184:[function(e,t,n){var i=e(62),r=e(92),o=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:r(e-1+o(e-1)*o(e+1))}})},{62:62,92:92}],185:[function(e,t,n){var i=e(62),r=Math.asinh;i(i.S+i.F*!(r&&0<1/r(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{62:62}],186:[function(e,t,n){var i=e(62),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{62:62}],187:[function(e,t,n){var i=e(62),r=e(93);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},{62:62,93:93}],188:[function(e,t,n){var i=e(62);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{62:62}],189:[function(e,t,n){var i=e(62),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},{62:62}],190:[function(e,t,n){var i=e(62),r=e(90);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},{62:62,90:90}],191:[function(e,t,n){var i=e(62);i(i.S,"Math",{fround:e(91)})},{62:62,91:91}],192:[function(e,t,n){var i=e(62),l=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,r=0,o=0,a=arguments.length,s=0;o<a;)s<(n=l(arguments[o++]))?(r=r*(i=s/n)*i+1,s=n):r+=0<n?(i=n/s)*i:n;return s===1/0?1/0:s*Math.sqrt(r)}})},{62:62}],193:[function(e,t,n){var i=e(62),r=Math.imul;i(i.S+i.F*e(64)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,o=n&i,a=n&r;return 0|o*a+((n&i>>>16)*a+o*(n&r>>>16)<<16>>>0)}})},{62:62,64:64}],194:[function(e,t,n){var i=e(62);i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{62:62}],195:[function(e,t,n){var i=e(62);i(i.S,"Math",{log1p:e(92)})},{62:62,92:92}],196:[function(e,t,n){var i=e(62);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{62:62}],197:[function(e,t,n){var i=e(62);i(i.S,"Math",{sign:e(93)})},{62:62,93:93}],198:[function(e,t,n){var i=e(62),r=e(90),o=Math.exp;i(i.S+i.F*e(64)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},{62:62,64:64,90:90}],199:[function(e,t,n){var i=e(62),r=e(90),o=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},{62:62,90:90}],200:[function(e,t,n){var i=e(62);i(i.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},{62:62}],201:[function(e,t,n){function i(e){var t=u(e,!1);if("string"==typeof t&&2<t.length){var n,i,r,o=(t=_?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var a,s=t.slice(2),l=0,c=s.length;l<c;l++)if((a=s.charCodeAt(l))<48||r<a)return NaN;return parseInt(s,i)}}return+t}var r=e(70),o=e(71),a=e(48),s=e(75),u=e(143),l=e(64),c=e(103).f,f=e(101).f,p=e(99).f,d=e(134).trim,h="Number",v=r[h],m=v,g=v.prototype,y=a(e(98)(g))==h,_="trim"in String.prototype;if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof v&&(y?l(function(){g.valueOf.call(n)}):a(n)!=h)?s(new m(i(t)),n,v):i(t)};for(var w,x=e(58)?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;x.length>b;b++)o(m,w=x[b])&&!o(v,w)&&p(v,w,f(m,w));(v.prototype=g).constructor=v,e(118)(r,h,v)}},{101:101,103:103,118:118,134:134,143:143,48:48,58:58,64:64,70:70,71:71,75:75,98:98,99:99}],202:[function(e,t,n){var i=e(62);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},{62:62}],203:[function(e,t,n){var i=e(62),r=e(70).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},{62:62,70:70}],204:[function(e,t,n){var i=e(62);i(i.S,"Number",{isInteger:e(80)})},{62:62,80:80}],205:[function(e,t,n){var i=e(62);i(i.S,"Number",{isNaN:function(e){return e!=e}})},{62:62}],206:[function(e,t,n){var i=e(62),r=e(80),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&o(e)<=9007199254740991}})},{62:62,80:80}],207:[function(e,t,n){var i=e(62);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{62:62}],208:[function(e,t,n){var i=e(62);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{62:62}],209:[function(e,t,n){var i=e(62),r=e(112);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},{112:112,62:62}],210:[function(e,t,n){var i=e(62),r=e(113);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},{113:113,62:62}],211:[function(e,t,n){function c(e,t){for(var n=-1,i=t;++n<6;)i+=e*a[n],a[n]=i%1e7,i=o(i/1e7)}function u(e){for(var t=6,n=0;0<=--t;)n+=a[t],a[t]=o(n/e),n=n%e*1e7}function f(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==a[e]){var n=String(a[e]);t=""===t?n:t+v.call("0",7-n.length)+n}return t}function p(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)}var i=e(62),d=e(139),h=e(34),v=e(133),r=1..toFixed,o=Math.floor,a=[0,0,0,0,0,0],m="Number.toFixed: incorrect invocation!";i(i.P+i.F*(!!r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e(64)(function(){r.call({})})),"Number",{toFixed:function(e){var t,n,i,r,o=h(this,m),a=d(e),s="",l="0";if(a<0||20<a)throw RangeError(m);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(s="-",o=-o),1e-21<o)if(n=(t=function(){for(var e=0,t=o*p(2,69,1);4096<=t;)e+=12,t/=4096;for(;2<=t;)e+=1,t/=2;return e}()-69)<0?o*p(2,-t,1):o/p(2,t,1),n*=4503599627370496,0<(t=52-t)){for(c(0,n),i=a;7<=i;)c(1e7,0),i-=7;for(c(p(10,i,1),0),i=t-1;23<=i;)u(1<<23),i-=23;u(1<<i),c(1,1),u(2),l=f()}else c(0,n),c(1<<-t,0),l=f()+v.call("0",a);return 0<a?s+((r=l.length)<=a?"0."+v.call("0",a-r)+l:l.slice(0,r-a)+"."+l.slice(r-a)):s+l}})},{133:133,139:139,34:34,62:62,64:64}],212:[function(e,t,n){var i=e(62),r=e(64),o=e(34),a=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==a.call(1,void 0)})||!r(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},{34:34,62:62,64:64}],213:[function(e,t,n){var i=e(62);i(i.S+i.F,"Object",{assign:e(97)})},{62:62,97:97}],214:[function(e,t,n){var i=e(62);i(i.S,"Object",{create:e(98)})},{62:62,98:98}],215:[function(e,t,n){var i=e(62);i(i.S+i.F*!e(58),"Object",{defineProperties:e(100)})},{100:100,58:58,62:62}],216:[function(e,t,n){var i=e(62);i(i.S+i.F*!e(58),"Object",{defineProperty:e(99).f})},{58:58,62:62,99:99}],217:[function(e,t,n){var i=e(81),r=e(94).onFreeze;e(109)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},{109:109,81:81,94:94}],218:[function(e,t,n){var i=e(140),r=e(101).f;e(109)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},{101:101,109:109,140:140}],219:[function(e,t,n){e(109)("getOwnPropertyNames",function(){return e(102).f})},{102:102,109:109}],220:[function(e,t,n){var i=e(142),r=e(105);e(109)("getPrototypeOf",function(){return function(e){return r(i(e))}})},{105:105,109:109,142:142}],221:[function(e,t,n){var i=e(81);e(109)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},{109:109,81:81}],222:[function(e,t,n){var i=e(81);e(109)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},{109:109,81:81}],223:[function(e,t,n){var i=e(81);e(109)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},{109:109,81:81}],224:[function(e,t,n){var i=e(62);i(i.S,"Object",{is:e(121)})},{121:121,62:62}],225:[function(e,t,n){var i=e(142),r=e(107);e(109)("keys",function(){return function(e){return r(i(e))}})},{107:107,109:109,142:142}],226:[function(e,t,n){var i=e(81),r=e(94).onFreeze;e(109)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},{109:109,81:81,94:94}],227:[function(e,t,n){var i=e(81),r=e(94).onFreeze;e(109)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},{109:109,81:81,94:94}],228:[function(e,t,n){var i=e(62);i(i.S,"Object",{setPrototypeOf:e(122).set})},{122:122,62:62}],229:[function(e,t,n){var i=e(47),r={};r[e(152)("toStringTag")]="z",r+""!="[object z]"&&e(118)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},{118:118,152:152,47:47}],230:[function(e,t,n){var i=e(62),r=e(112);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},{112:112,62:62}],231:[function(e,t,n){var i=e(62),r=e(113);i(i.G+i.F*(parseInt!=r),{parseInt:r})},{113:113,62:62}],232:[function(n,e,t){function i(){}function f(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t}function r(u,n){if(!u._n){u._n=!0;var i=u._c;P(function(){for(var l=u._v,c=1==u._s,e=0,t=function(e){var t,n,i,r=c?e.ok:e.fail,o=e.resolve,a=e.reject,s=e.domain;try{r?(c||(2==u._h&&H(u),u._h=1),!0===r?t=l:(s&&s.enter(),t=r(l),s&&(s.exit(),i=!0)),t===e.promise?a(S("Promise-chain cycle")):(n=f(t))?n.call(t,o,a):o(t)):a(l)}catch(e){s&&!i&&s.exit(),a(e)}};i.length>e;)t(i[e++]);u._c=[],u._n=!1,n&&!u._h&&N(u)})}}function o(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),r(t,!0))}function a(e){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw S("Promise can't be resolved itself");(n=f(e))?P(function(){var t={_w:i,_d:!1};try{n.call(e,h(a,t,1),h(o,t,1))}catch(e){o.call(t,e)}}):(i._v=e,i._s=1,r(i,!1))}catch(e){o.call({_w:i,_d:!1},e)}}}var s,l,c,u,p=n(89),d=n(70),h=n(54),v=n(47),m=n(62),g=n(81),y=n(33),_=n(37),w=n(68),x=n(127),b=n(136).set,P=n(95)(),C=n(96),T=n(114),k=n(148),E=n(115),M="Promise",S=d.TypeError,L=d.process,A=L&&L.versions,I=A&&A.v8||"",D=d[M],R="process"==v(L),F=l=C.f,z=!!function(){try{var e=D.resolve(1),t=(e.constructor={})[n(152)("species")]=function(e){e(i,i)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(i)instanceof t&&0!==I.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(e){}}(),N=function(o){b.call(d,function(){var e,t,n,i=o._v,r=O(o);if(r&&(e=T(function(){R?L.emit("unhandledRejection",i,o):(t=d.onunhandledrejection)?t({promise:o,reason:i}):(n=d.console)&&n.error&&n.error("Unhandled promise rejection",i)}),o._h=R||O(o)?2:1),o._a=void 0,r&&e.e)throw e.v})},O=function(e){return 1!==e._h&&0===(e._a||e._c).length},H=function(t){b.call(d,function(){var e;R?L.emit("rejectionHandled",t):(e=d.onrejectionhandled)&&e({promise:t,reason:t._v})})};z||(D=function(e){_(this,D,M,"_h"),y(e),s.call(this);try{e(h(a,this,1),h(o,this,1))}catch(e){o.call(this,e)}},(s=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(117)(D.prototype,{then:function(e,t){var n=F(x(this,D));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?L.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&r(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),c=function(){var e=new s;this.promise=e,this.resolve=h(a,e,1),this.reject=h(o,e,1)},C.f=F=function(e){return e===D||e===u?new c(e):l(e)}),m(m.G+m.W+m.F*!z,{Promise:D}),n(124)(D,M),n(123)(M),u=n(52)[M],m(m.S+m.F*!z,M,{reject:function(e){var t=F(this);return(0,t.reject)(e),t.promise}}),m(m.S+m.F*(p||!z),M,{resolve:function(e){return E(p&&this===u?D:this,e)}}),m(m.S+m.F*!(z&&n(86)(function(e){D.all(e).catch(i)})),M,{all:function(e){var a=this,t=F(a),s=t.resolve,l=t.reject,n=T(function(){var i=[],r=0,o=1;w(e,!1,function(e){var t=r++,n=!1;i.push(void 0),o++,a.resolve(e).then(function(e){n||(n=!0,i[t]=e,--o||s(i))},l)}),--o||s(i)});return n.e&&l(n.v),t.promise},race:function(e){var t=this,n=F(t),i=n.reject,r=T(function(){w(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},{114:114,115:115,117:117,123:123,124:124,127:127,136:136,148:148,152:152,33:33,37:37,47:47,52:52,54:54,62:62,68:68,70:70,81:81,86:86,89:89,95:95,96:96}],233:[function(e,t,n){var i=e(62),o=e(33),a=e(38),s=(e(70).Reflect||{}).apply,l=Function.apply;i(i.S+i.F*!e(64)(function(){s(function(){})}),"Reflect",{apply:function(e,t,n){var i=o(e),r=a(n);return s?s(i,t,r):l.call(i,t,r)}})},{33:33,38:38,62:62,64:64,70:70}],234:[function(e,t,n){var i=e(62),l=e(98),c=e(33),u=e(38),f=e(81),r=e(64),p=e(46),d=(e(70).Reflect||{}).construct,h=r(function(){function e(){}return!(d(function(){},[],e)instanceof e)}),v=!r(function(){d(function(){})});i(i.S+i.F*(h||v),"Reflect",{construct:function(e,t,n){c(e),u(t);var i=arguments.length<3?e:c(n);if(v&&!h)return d(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(p.apply(e,r))}var o=i.prototype,a=l(f(o)?o:Object.prototype),s=Function.apply.call(e,a,t);return f(s)?s:a}})},{33:33,38:38,46:46,62:62,64:64,70:70,81:81,98:98}],235:[function(e,t,n){var i=e(99),r=e(62),o=e(38),a=e(143);r(r.S+r.F*e(64)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return i.f(e,t,n),!0}catch(e){return!1}}})},{143:143,38:38,62:62,64:64,99:99}],236:[function(e,t,n){var i=e(62),r=e(101).f,o=e(38);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},{101:101,38:38,62:62}],237:[function(e,t,n){function i(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)}var r=e(62),o=e(38);e(84)(i,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},{38:38,62:62,84:84}],238:[function(e,t,n){var i=e(101),r=e(62),o=e(38);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(o(e),t)}})},{101:101,38:38,62:62}],239:[function(e,t,n){var i=e(62),r=e(105),o=e(38);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(o(e))}})},{105:105,38:38,62:62}],240:[function(e,t,n){var s=e(101),l=e(105),c=e(71),i=e(62),u=e(81),f=e(38);i(i.S,"Reflect",{get:function e(t,n,i){var r,o,a=arguments.length<3?t:i;return f(t)===a?t[n]:(r=s.f(t,n))?c(r,"value")?r.value:void 0!==r.get?r.get.call(a):void 0:u(o=l(t))?e(o,n,a):void 0}})},{101:101,105:105,38:38,62:62,71:71,81:81}],241:[function(e,t,n){var i=e(62);i(i.S,"Reflect",{has:function(e,t){return t in e}})},{62:62}],242:[function(e,t,n){var i=e(62),r=e(38),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!o||o(e)}})},{38:38,62:62}],243:[function(e,t,n){var i=e(62);i(i.S,"Reflect",{ownKeys:e(111)})},{111:111,62:62}],244:[function(e,t,n){var i=e(62),r=e(38),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return o&&o(e),!0}catch(e){return!1}}})},{38:38,62:62}],245:[function(e,t,n){var i=e(62),r=e(122);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}})},{122:122,62:62}],246:[function(e,t,n){var c=e(99),u=e(101),f=e(105),p=e(71),i=e(62),d=e(116),h=e(38),v=e(81);i(i.S,"Reflect",{set:function e(t,n,i,r){var o,a,s=arguments.length<4?t:r,l=u.f(h(t),n);if(!l){if(v(a=f(t)))return e(a,n,i,s);l=d(0)}if(p(l,"value")){if(!1===l.writable||!v(s))return!1;if(o=u.f(s,n)){if(o.get||o.set||!1===o.writable)return!1;o.value=i,c.f(s,n,o)}else c.f(s,n,d(0,i));return!0}return void 0!==l.set&&(l.set.call(s,i),!0)}})},{101:101,105:105,116:116,38:38,62:62,71:71,81:81,99:99}],247:[function(e,t,n){var i=e(70),o=e(75),r=e(99).f,a=e(103).f,s=e(82),l=e(66),c=i.RegExp,u=c,f=c.prototype,p=/a/g,d=/a/g,h=new c(p)!==p;if(e(58)&&(!h||e(64)(function(){return d[e(152)("match")]=!1,c(p)!=p||c(d)==d||"/a/i"!=c(p,"i")}))){var v=function(t){t in c||r(c,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})};c=function(e,t){var n=this instanceof c,i=s(e),r=void 0===t;return!n&&i&&e.constructor===c&&r?e:o(h?new u(i&&!r?e.source:e,t):u((i=e instanceof c)?e.source:e,i&&r?l.call(e):t),n?this:f,c)};for(var m=a(u),g=0;m.length>g;)v(m[g++]);(f.constructor=c).prototype=f,e(118)(i,"RegExp",c)}e(123)("RegExp")},{103:103,118:118,123:123,152:152,58:58,64:64,66:66,70:70,75:75,82:82,99:99}],248:[function(e,t,n){var i=e(120);e(62)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},{120:120,62:62}],249:[function(e,t,n){e(58)&&"g"!=/./g.flags&&e(99).f(RegExp.prototype,"flags",{configurable:!0,get:e(66)})},{58:58,66:66,99:99}],250:[function(e,t,n){var f=e(38),p=e(141),d=e(36),h=e(119);e(65)("match",1,function(i,r,c,u){return[function(e){var t=i(this),n=null==e?void 0:e[r];return void 0!==n?n.call(e,t):new RegExp(e)[r](String(t))},function(e){var t=u(c,e,this);if(t.done)return t.value;var n=f(e),i=String(this);if(!n.global)return h(n,i);for(var r,o=n.unicode,a=[],s=n.lastIndex=0;null!==(r=h(n,i));){var l=String(r[0]);""===(a[s]=l)&&(n.lastIndex=d(i,p(n.lastIndex),o)),s++}return 0===s?null:a}]})},{119:119,141:141,36:36,38:38,65:65}],251:[function(e,t,n){var C=e(38),i=e(142),T=e(141),k=e(139),E=e(36),M=e(119),S=Math.max,L=Math.min,p=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;e(65)("replace",2,function(r,o,x,b){return[function(e,t){var n=r(this),i=null==e?void 0:e[o];return void 0!==i?i.call(e,n,t):x.call(String(n),e,t)},function(e,t){var n=b(x,e,this,t);if(n.done)return n.value;var i=C(e),r=String(this),o="function"==typeof t;o||(t=String(t));var a=i.global;if(a){var s=i.unicode;i.lastIndex=0}for(var l=[];;){var c=M(i,r);if(null===c)break;if(l.push(c),!a)break;""===String(c[0])&&(i.lastIndex=E(r,T(i.lastIndex),s))}for(var u,f="",p=0,d=0;d<l.length;d++){c=l[d];for(var h=String(c[0]),v=S(L(k(c.index),r.length),0),m=[],g=1;g<c.length;g++)m.push(void 0===(u=c[g])?u:String(u));var y=c.groups;if(o){var _=[h].concat(m,v,r);void 0!==y&&_.push(y);var w=String(t.apply(void 0,_))}else w=P(h,r,v,m,y,t);p<=v&&(f+=r.slice(p,v)+w,p=v+h.length)}return f+r.slice(p)}];function P(o,a,s,l,c,e){var u=s+o.length,f=l.length,t=h;return void 0!==c&&(c=i(c),t=d),x.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,s);case"'":return a.slice(u);case"<":n=c[t.slice(1,-1)];break;default:var i=+t;if(0==i)return e;if(f<i){var r=p(i/10);return 0===r?e:r<=f?void 0===l[r-1]?t.charAt(1):l[r-1]+t.charAt(1):e}n=l[i-1]}return void 0===n?"":n})}})},{119:119,139:139,141:141,142:142,36:36,38:38,65:65}],252:[function(e,t,n){var l=e(38),c=e(121),u=e(119);e(65)("search",1,function(i,r,a,s){return[function(e){var t=i(this),n=null==e?void 0:e[r];return void 0!==n?n.call(e,t):new RegExp(e)[r](String(t))},function(e){var t=s(a,e,this);if(t.done)return t.value;var n=l(e),i=String(this),r=n.lastIndex;c(r,0)||(n.lastIndex=0);var o=u(n,i);return c(n.lastIndex,r)||(n.lastIndex=r),null===o?-1:o.index}]})},{119:119,121:121,38:38,65:65}],253:[function(e,t,n){var f=e(82),_=e(38),w=e(127),x=e(36),b=e(141),P=e(119),p=e(120),i=e(64),C=Math.min,d=[].push,a="split",h="length",v="lastIndex",T=4294967295,k=!i(function(){RegExp(T,"y")});e(65)("split",2,function(r,o,m,g){var y;return y="c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[h]||2!="ab"[a](/(?:ab)*/)[h]||4!="."[a](/(.?)(.?)/)[h]||1<"."[a](/()()/)[h]||""[a](/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!f(e))return m.call(n,e,t);for(var i,r,o,a=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,c=void 0===t?T:t>>>0,u=new RegExp(e.source,s+"g");(i=p.call(u,n))&&!(l<(r=u[v])&&(a.push(n.slice(l,i.index)),1<i[h]&&i.index<n[h]&&d.apply(a,i.slice(1)),o=i[0][h],l=r,a[h]>=c));)u[v]===i.index&&u[v]++;return l===n[h]?!o&&u.test("")||a.push(""):a.push(n.slice(l)),a[h]>c?a.slice(0,c):a}:"0"[a](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:m.call(this,e,t)}:m,[function(e,t){var n=r(this),i=null==e?void 0:e[o];return void 0!==i?i.call(e,n,t):y.call(String(n),e,t)},function(e,t){var n=g(y,e,this,t,y!==m);if(n.done)return n.value;var i=_(e),r=String(this),o=w(i,RegExp),a=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(k?"y":"g"),l=new o(k?i:"^(?:"+i.source+")",s),c=void 0===t?T:t>>>0;if(0==c)return[];if(0===r.length)return null===P(l,r)?[r]:[];for(var u=0,f=0,p=[];f<r.length;){l.lastIndex=k?f:0;var d,h=P(l,k?r:r.slice(f));if(null===h||(d=C(b(l.lastIndex+(k?0:f)),r.length))===u)f=x(r,f,a);else{if(p.push(r.slice(u,f)),p.length===c)return p;for(var v=1;v<=h.length-1;v++)if(p.push(h[v]),p.length===c)return p;f=u=d}}return p.push(r.slice(u)),p}]})},{119:119,120:120,127:127,141:141,36:36,38:38,64:64,65:65,82:82}],254:[function(t,e,n){function i(e){t(118)(RegExp.prototype,s,e,!0)}t(249);var r=t(38),o=t(66),a=t(58),s="toString",l=/./[s];t(64)(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?i(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?o.call(e):void 0)}):l.name!=s&&i(function(){return l.call(this)})},{118:118,249:249,38:38,58:58,64:64,66:66}],255:[function(e,t,n){var i=e(49),r=e(149);t.exports=e(51)("Set",function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)},{149:149,49:49,51:51}],256:[function(e,t,n){e(131)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{131:131}],257:[function(e,t,n){e(131)("big",function(e){return function(){return e(this,"big","","")}})},{131:131}],258:[function(e,t,n){e(131)("blink",function(e){return function(){return e(this,"blink","","")}})},{131:131}],259:[function(e,t,n){e(131)("bold",function(e){return function(){return e(this,"b","","")}})},{131:131}],260:[function(e,t,n){var i=e(62),r=e(129)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},{129:129,62:62}],261:[function(e,t,n){var i=e(62),s=e(141),l=e(130),c="endsWith",u=""[c];i(i.P+i.F*e(63)(c),"String",{endsWith:function(e,t){var n=l(this,e,c),i=1<arguments.length?t:void 0,r=s(n.length),o=void 0===i?r:Math.min(s(i),r),a=String(e);return u?u.call(n,a,o):n.slice(o-a.length,o)===a}})},{130:130,141:141,62:62,63:63}],262:[function(e,t,n){e(131)("fixed",function(e){return function(){return e(this,"tt","","")}})},{131:131}],263:[function(e,t,n){e(131)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{131:131}],264:[function(e,t,n){e(131)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{131:131}],265:[function(e,t,n){var i=e(62),o=e(137),a=String.fromCharCode,r=String.fromCodePoint;i(i.S+i.F*(!!r&&1!=r.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,r=0;r<i;){if(t=+arguments[r++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},{137:137,62:62}],266:[function(e,t,n){var i=e(62),r=e(130),o="includes";i(i.P+i.F*e(63)(o),"String",{includes:function(e,t){return!!~r(this,e,o).indexOf(e,1<arguments.length?t:void 0)}})},{130:130,62:62,63:63}],267:[function(e,t,n){e(131)("italics",function(e){return function(){return e(this,"i","","")}})},{131:131}],268:[function(e,t,n){var i=e(129)(!0);e(85)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},{129:129,85:85}],269:[function(e,t,n){e(131)("link",function(t){return function(e){return t(this,"a","href",e)}})},{131:131}],270:[function(e,t,n){var i=e(62),a=e(140),s=e(141);i(i.S,"String",{raw:function(e){for(var t=a(e.raw),n=s(t.length),i=arguments.length,r=[],o=0;o<n;)r.push(String(t[o++])),o<i&&r.push(String(arguments[o]));return r.join("")}})},{140:140,141:141,62:62}],271:[function(e,t,n){var i=e(62);i(i.P,"String",{repeat:e(133)})},{133:133,62:62}],272:[function(e,t,n){e(131)("small",function(e){return function(){return e(this,"small","","")}})},{131:131}],273:[function(e,t,n){var i=e(62),o=e(141),a=e(130),s="startsWith",l=""[s];i(i.P+i.F*e(63)(s),"String",{startsWith:function(e,t){var n=a(this,e,s),i=o(Math.min(1<arguments.length?t:void 0,n.length)),r=String(e);return l?l.call(n,r,i):n.slice(i,i+r.length)===r}})},{130:130,141:141,62:62,63:63}],274:[function(e,t,n){e(131)("strike",function(e){return function(){return e(this,"strike","","")}})},{131:131}],275:[function(e,t,n){e(131)("sub",function(e){return function(){return e(this,"sub","","")}})},{131:131}],276:[function(e,t,n){e(131)("sup",function(e){return function(){return e(this,"sup","","")}})},{131:131}],277:[function(e,t,n){e(134)("trim",function(e){return function(){return e(this,3)}})},{134:134}],278:[function(e,t,n){function i(e){var t=X[e]=L(H[B]);return t._k=e,t}function r(e,t){C(e);for(var n,i=b(t=E(t)),r=0,o=i.length;r<o;)te(e,n=i[r++],t[n]);return e}function o(e){var t=V.call(this,e=M(e,!0));return!(this===K&&u(X,e)&&!u(Y,e))&&(!(t||!u(this,e)||!u(X,e)||u(this,W)&&this[W][e])||t)}function a(e,t){if(e=E(e),t=M(t,!0),e!==K||!u(X,t)||u(Y,t)){var n=z(e,t);return!n||!u(X,t)||u(e,W)&&e[W][t]||(n.enumerable=!0),n}}function s(e){for(var t,n=O(E(e)),i=[],r=0;n.length>r;)u(X,t=n[r++])||t==W||t==h||i.push(t);return i}function l(e){for(var t,n=e===K,i=O(n?Y:E(e)),r=[],o=0;i.length>o;)!u(X,t=i[o++])||n&&!u(K,t)||r.push(X[t]);return r}var c=e(70),u=e(71),f=e(58),p=e(62),d=e(118),h=e(94).KEY,v=e(64),m=e(126),g=e(124),y=e(147),_=e(152),w=e(151),x=e(150),b=e(61),P=e(79),C=e(38),T=e(81),k=e(142),E=e(140),M=e(143),S=e(116),L=e(98),A=e(102),I=e(101),D=e(104),R=e(99),F=e(107),z=I.f,N=R.f,O=A.f,H=c.Symbol,j=c.JSON,U=j&&j.stringify,B="prototype",W=_("_hidden"),G=_("toPrimitive"),V={}.propertyIsEnumerable,Z=m("symbol-registry"),X=m("symbols"),Y=m("op-symbols"),K=Object[B],$="function"==typeof H&&!!D.f,q=c.QObject,J=!q||!q[B]||!q[B].findChild,Q=f&&v(function(){return 7!=L(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=z(K,t);i&&delete K[t],N(e,t,n),i&&e!==K&&N(K,t,i)}:N,ee=$&&"symbol"==_typeof2(H.iterator)?function(e){return"symbol"==_typeof2(e)}:function(e){return e instanceof H},te=function(e,t,n){return e===K&&te(Y,t,n),C(e),t=M(t,!0),C(n),u(X,t)?(n.enumerable?(u(e,W)&&e[W][t]&&(e[W][t]=!1),n=L(n,{enumerable:S(0,!1)})):(u(e,W)||N(e,W,S(1,{})),e[W][t]=!0),Q(e,t,n)):N(e,t,n)};$||(d((H=function(e){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var n=y(0<arguments.length?e:void 0);return f&&J&&Q(K,n,{configurable:!0,set:function e(t){this===K&&e.call(Y,t),u(this,W)&&u(this[W],n)&&(this[W][n]=!1),Q(this,n,S(1,t))}}),i(n)})[B],"toString",function(){return this._k}),I.f=a,R.f=te,e(103).f=A.f=s,e(108).f=o,D.f=l,f&&!e(89)&&d(K,"propertyIsEnumerable",o,!0),w.f=function(e){return i(_(e))}),p(p.G+p.W+p.F*!$,{Symbol:H});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ne.length>ie;)_(ne[ie++]);for(var re=F(_.store),oe=0;re.length>oe;)x(re[oe++]);p(p.S+p.F*!$,"Symbol",{for:function(e){return u(Z,e+="")?Z[e]:Z[e]=H(e)},keyFor:function(e){if(!ee(e))throw TypeError(e+" is not a symbol!");for(var t in Z)if(Z[t]===e)return t},useSetter:function(){J=!0},useSimple:function(){J=!1}}),p(p.S+p.F*!$,"Object",{create:function(e,t){return void 0===t?L(e):r(L(e),t)},defineProperty:te,defineProperties:r,getOwnPropertyDescriptor:a,getOwnPropertyNames:s,getOwnPropertySymbols:l});var ae=v(function(){D.f(1)});p(p.S+p.F*ae,"Object",{getOwnPropertySymbols:function(e){return D.f(k(e))}}),j&&p(p.S+p.F*(!$||v(function(){var e=H();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;r<arguments.length;)i.push(arguments[r++]);if(n=t=i[1],(T(t)||void 0!==e)&&!ee(e))return P(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ee(t))return t}),i[1]=t,U.apply(j,i)}}),H[B][G]||e(72)(H[B],G,H[B].valueOf),g(H,"Symbol"),g(Math,"Math",!0),g(c.JSON,"JSON",!0)},{101:101,102:102,103:103,104:104,107:107,108:108,116:116,118:118,124:124,126:126,140:140,142:142,143:143,147:147,150:150,151:151,152:152,38:38,58:58,61:61,62:62,64:64,70:70,71:71,72:72,79:79,81:81,89:89,94:94,98:98,99:99}],279:[function(e,t,n){var i=e(62),r=e(146),o=e(145),c=e(38),u=e(137),f=e(141),a=e(81),s=e(70).ArrayBuffer,p=e(127),d=o.ArrayBuffer,h=o.DataView,l=r.ABV&&s.isView,v=d.prototype.slice,m=r.VIEW,g="ArrayBuffer";i(i.G+i.W+i.F*(s!==d),{ArrayBuffer:d}),i(i.S+i.F*!r.CONSTR,g,{isView:function(e){return l&&l(e)||a(e)&&m in e}}),i(i.P+i.U+i.F*e(64)(function(){return!new d(2).slice(1,void 0).byteLength}),g,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(c(this),e);for(var n=c(this).byteLength,i=u(e,n),r=u(void 0===t?n:t,n),o=new(p(this,d))(f(r-i)),a=new h(this),s=new h(o),l=0;i<r;)s.setUint8(l++,a.getUint8(i++));return o}}),e(123)(g)},{123:123,127:127,137:137,141:141,145:145,146:146,38:38,62:62,64:64,70:70,81:81}],280:[function(e,t,n){var i=e(62);i(i.G+i.W+i.F*!e(146).ABV,{DataView:e(145).DataView})},{145:145,146:146,62:62}],281:[function(e,t,n){e(144)("Float32",4,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],282:[function(e,t,n){e(144)("Float64",8,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],283:[function(e,t,n){e(144)("Int16",2,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],284:[function(e,t,n){e(144)("Int32",4,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],285:[function(e,t,n){e(144)("Int8",1,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],286:[function(e,t,n){e(144)("Uint16",2,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],287:[function(e,t,n){e(144)("Uint32",4,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],288:[function(e,t,n){e(144)("Uint8",1,function(i){return function(e,t,n){return i(this,e,t,n)}})},{144:144}],289:[function(e,t,n){e(144)("Uint8",1,function(i){return function(e,t,n){return i(this,e,t,n)}},!0)},{144:144}],290:[function(e,t,n){function i(t){return function(e){return t(this,0<arguments.length?e:void 0)}}var o,r=e(70),a=e(42)(0),s=e(118),l=e(94),c=e(97),u=e(50),f=e(81),p=e(149),d=e(149),h=!r.ActiveXObject&&"ActiveXObject"in r,v="WeakMap",m=l.getWeak,g=Object.isExtensible,y=u.ufstore,_={get:function(e){if(f(e)){var t=m(e);return!0===t?y(p(this,v)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(p(this,v),e,t)}},w=t.exports=e(51)(v,i,_,u,!0,!0);d&&h&&(c((o=u.getConstructor(i,v)).prototype,_),l.NEED=!0,a(["delete","has","get","set"],function(i){var e=w.prototype,r=e[i];s(e,i,function(e,t){if(!f(e)||g(e))return r.call(this,e,t);this._f||(this._f=new o);var n=this._f[i](e,t);return"set"==i?this:n})}))},{118:118,149:149,42:42,50:50,51:51,70:70,81:81,94:94,97:97}],291:[function(e,t,n){var i=e(50),r=e(149),o="WeakSet";e(51)(o,function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{add:function(e){return i.def(r(this,o),e,!0)}},i,!1,!0)},{149:149,50:50,51:51}],292:[function(e,t,n){var i=e(62),o=e(67),a=e(142),s=e(141),l=e(33),c=e(45);i(i.P,"Array",{flatMap:function(e,t){var n,i,r=a(this);return l(e),n=s(r.length),i=c(r,0),o(i,r,r,n,0,1,e,t),i}}),e(35)("flatMap")},{141:141,142:142,33:33,35:35,45:45,62:62,67:67}],293:[function(e,t,n){var i=e(62),r=e(41)(!0);i(i.P,"Array",{includes:function(e,t){return r(this,e,1<arguments.length?t:void 0)}}),e(35)("includes")},{35:35,41:41,62:62}],294:[function(e,t,n){var i=e(62),r=e(110)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},{110:110,62:62}],295:[function(e,t,n){var i=e(62),l=e(111),c=e(140),u=e(101),f=e(53);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=c(e),r=u.f,o=l(i),a={},s=0;o.length>s;)void 0!==(n=r(i,t=o[s++]))&&f(a,t,n);return a}})},{101:101,111:111,140:140,53:53,62:62}],296:[function(e,t,n){var i=e(62),r=e(110)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},{110:110,62:62}],297:[function(e,t,n){var i=e(62),r=e(52),o=e(70),a=e(127),s=e(115);i(i.P+i.R,"Promise",{finally:function(t){var n=a(this,r.Promise||o.Promise),e="function"==typeof t;return this.then(e?function(e){return s(n,t()).then(function(){return e})}:t,e?function(e){return s(n,t()).then(function(){throw e})}:t)}})},{115:115,127:127,52:52,62:62,70:70}],298:[function(e,t,n){var i=e(62),r=e(132),o=e(148),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padEnd:function(e,t){return r(this,e,1<arguments.length?t:void 0,!1)}})},{132:132,148:148,62:62}],299:[function(e,t,n){var i=e(62),r=e(132),o=e(148),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padStart:function(e,t){return r(this,e,1<arguments.length?t:void 0,!0)}})},{132:132,148:148,62:62}],300:[function(e,t,n){e(134)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{134:134}],301:[function(e,t,n){e(134)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{134:134}],302:[function(e,t,n){e(150)("asyncIterator")},{150:150}],303:[function(e,t,n){for(var i=e(164),r=e(107),o=e(118),a=e(70),s=e(72),l=e(88),c=e(152),u=c("iterator"),f=c("toStringTag"),p=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=r(d),v=0;v<h.length;v++){var m,g=h[v],y=d[g],_=a[g],w=_&&_.prototype;if(w&&(w[u]||s(w,u,p),w[f]||s(w,f,g),l[g]=p,y))for(m in i)w[m]||o(w,m,i[m],!0)}},{107:107,118:118,152:152,164:164,70:70,72:72,88:88}],304:[function(e,t,n){var i=e(62),r=e(136);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},{136:136,62:62}],305:[function(e,t,n){function i(r){return function(e,t){var n=2<arguments.length,i=n&&s.call(arguments,2);return r(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,t)}}var r=e(70),o=e(62),a=e(148),s=[].slice,l=/MSIE .\./.test(a);o(o.G+o.B+o.F*l,{setTimeout:i(r.setTimeout),setInterval:i(r.setInterval)})},{148:148,62:62,70:70}],306:[function(e,t,n){e(305),e(304),e(303),t.exports=e(52)},{303:303,304:304,305:305,52:52}],307:[function(e,t,n){var i=function(o){var l,e=Object.prototype,c=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function a(e,t,n,i){var o,a,s,l,r=t&&t.prototype instanceof g?t:g,c=Object.create(r.prototype),u=new E(i||[]);return c._invoke=(o=e,a=n,s=u,l=p,function(e,t){if(l===h)throw new Error("Generator is already running");if(l===v){if("throw"===e)throw t;return S()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var i=C(n,s);if(i){if(i===m)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===p)throw l=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=h;var r=f(o,a,s);if("normal"===r.type){if(l=s.done?v:d,r.arg===m)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(l=v,s.method="throw",s.arg=r.arg)}}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=a;var p="suspendedStart",d="suspendedYield",h="executing",v="completed",m={};function g(){}function s(){}function u(){}var y={};y[r]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(M([])));w&&w!==e&&c.call(w,r)&&(y=w);var x=u.prototype=g.prototype=Object.create(y);function b(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function P(l){var t;this._invoke=function(n,i){function e(){return new Promise(function(e,t){!function t(e,n,i,r){var o=f(l[e],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==_typeof2(s)&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,i,r)},function(e){t("throw",e,i,r)}):Promise.resolve(s).then(function(e){a.value=e,i(a)},function(e){return t("throw",e,i,r)})}r(o.arg)}(n,i,e,t)})}return t=t?t.then(e,e):e()}}function C(e,t){var n=e.iterator[t.method];if(n===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,C(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,m):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:l,done:!0}}return s.prototype=x.constructor=u,u.constructor=s,u[i]=s.displayName="GeneratorFunction",o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(x),e},o.awrap=function(e){return{__await:e}},b(P.prototype),P.prototype[n]=function(){return this},o.AsyncIterator=P,o.async=function(e,t,n,i){var r=new P(a(e,t,n,i));return o.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},b(x),x[i]="Generator",x[r]=function(){return this},x.toString=function(){return"[object Generator]"},o.keys=function(n){var i=[];for(var e in n)i.push(e);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=M,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function e(e,t){return o.type="throw",o.arg=n,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var a=c.call(r,"catchLoc"),s=c.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),m}},o}("object"==_typeof2(t)?t.exports:{});try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},{}]},{},[1]),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.ZGLobe=t():e.ZGLobe=t()}(window,function(){return o={},r.m=n=[function(e,n,i){var r,f,o,a,s,l,c,u,p,d,h,v,m,g,y,_,w,x,b,P,C,T,k,E,M,S,L,A,I,D,R,F,z,N,O,H,j,U,B,W,G,V,Z,X,Y,K,q,J,Q,ee,te,ne,ie,re,oe,ae,se,le,ce,ue,fe,pe,de,he,ve,me,ge,ye=i(1);function _e(e,t,n){var i=f.Cartesian3.fromDegrees(e,t,n);return f.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,i)}function we(e){for(var t=e.split(";base64,"),n=t[0].split(":")[1],i=window.atob(t[1]),r=i.length,o=new Uint8Array(r),a=0;a<r;++a)o[a]=i.charCodeAt(a);return new Blob([o],{type:n})}function xe(){function _(e){return"number"==typeof e&&!isNaN(e)}function w(e,t,n,i,r,o,a,s){s=s||{};var l=i-e;return 0===l?i!==a?s.edge=3:(s.x=e,s.y=t,s.z=n,s.edge=4):(l=(a-e)/l)<0||1<l?s.edge=3:0===l?(s.x=e,s.y=t,s.z=n,s.edge=0):1===l?(s.x=i,s.y=r,s.z=o,s.edge=1):(s.x=e+(i-e)*l,s.y=t+(r-t)*l,s.z=n+(o-n)*l,s.edge=2),s}return function(e,t,n,i,r,o,a){var s,l,c,u={},f=4*t[0],p=3*t[0],d=4*t[1],h=3*t[1],v=4*t[2],m=3*t[2],g=4*t[3],y=3*t[3];if(_(v))switch(w(e[f],e[1+f],e[2+f],e[v],e[1+v],e[2+v],o,u),u.edge){case 1:i[p]=i[m];break;case 4:case 0:case 2:n[r++]=u.x,n[r++]=u.y,n[r++]=u.z,i[p]=Math.floor(r/3-1);break;default:i[p]=NaN}if(_(g))switch(w(e[f],e[1+f],e[2+f],e[g],e[1+g],e[2+g],o,u),u.edge){case 4:case 0:i[1+p]=i[p];break;case 1:i[1+p]=i[y];break;case 2:n[r++]=u.x,n[r++]=u.y,n[r++]=u.z,i[1+p]=Math.floor(r/3-1);break;default:i[1+p]=NaN}if(_(d))switch(w(e[f],e[1+f],e[2+f],e[d],e[1+d],e[2+d],o,u),u.edge){case 4:case 0:i[2+p]=i[p];break;case 1:i[2+p]=i[h];break;case 2:n[r++]=u.x,n[r++]=u.y,n[r++]=u.z,i[2+p]=Math.floor(r/3-1);break;default:i[2+p]=NaN}return s=i[p],_(s)&&2!==(c=e[f]!==e[v]?e[f]<e[v]:2)&&(l=i[2+m],_(l)&&l!==s&&(c?(a.push(l),a.push(s)):(a.push(s),a.push(l))),l=i[1+p],_(l)&&l!==s&&(c?(a.push(l),a.push(s)):(a.push(s),a.push(l)))),s=i[1+p],_(s)&&2!==(c=e[f]!==e[g]?e[f]<e[g]:2)&&(l=i[2+m],_(l)&&l!==s&&e[v]!==e[g]&&(c?(a.push(s),a.push(l)):(a.push(l),a.push(s))),l=i[h],_(l)&&l!==s&&e[d]!==e[g]&&(c?(a.push(l),a.push(s)):(a.push(s),a.push(l)))),s=i[2+p],_(s)&&2!==(c=e[f]!==e[d]?e[f]<e[d]:2)&&(l=i[1+p],_(l)&&l!==s&&(c?(a.push(s),a.push(l)):(a.push(l),a.push(s))),l=i[h],_(l)&&l!==s&&(c?(a.push(s),a.push(l)):(a.push(l),a.push(s)))),r}}function be(n){function i(e,t){var n=document.getElementById("zt-message");n.style.display="inline-block",n.getElementsByTagName("p")[0].innerHTML=e,setTimeout(function(){n.style.display="none"},t)}function e(e){switch(console.log(e),e.code){case e.PERMISSION_DENIED:i("位置服务被拒绝",3e3);break;case e.POSITION_UNAVAILABLE:i("暂时获取不到位置信息",3e3);break;case e.TIMEOUT:i("获取信息超时",3e3);break;case e.UNKNOWN_ERROR:i("未知错误",3e3)}}this.getCurrentPosition=function(t){console.log("getCurrentPosition"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){!function(e,t){e.locationPoint&&e.ZEntityCollection.romverZEntity(e.locationPoint);e.locationPoint=e.ZEntityCollection.addZEntity(new ZGLobe.ZEntity({type:ZGLobe.Constants.EntityTypes.POINT,position:{longitude:t.coords.longitude,latitude:t.coords.latitude},point:{color:ZGLobe.color.fromCssColor("#1e5",.9),pixelSize:20,outlineColor:ZGLobe.color.fromCssColor("#0ff",.9),outlineWidth:2,show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY}}))}(n,e),N(t)&&t(e.coords)},e,{enableHighAcuracy:!0,timeout:6e4,maximumAge:3e3}):i("Geolocation is not supported by this browser.",3e3)}}function Pe(e){this.heading=NaN,this.pitch=NaN,this.roll=NaN,this.hpr=new Z.HeadingPitchRoll(0,0,0),this.set(e)}function Ce(e){this.id=NaN,this.longitude=NaN,this.latitude=NaN,this.height=NaN,this.show=!0,this.content=NaN,this.screen=NaN,this.zViewer=NaN,this.isFollow=!0,this.offset=[0,0],this.setShow=this.showFunc,this.set(e)}ye._kLib._developeFlag=!0,function(e,t,n,i){var r=i.defined;r(t)||function(e,t){if(i._developeFlag)throw n(e,t)}("未引用CesiumJS","未引用CesiumJS");var o={};for(var a in o)o.hasOwnProperty(a)&&r(o[a])&&(e[a]=o[a])}(ye,Cesium,ye._kLib.intErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r){var o=e.Constants;o.EventType.MiddleDrag="MiddleDrag";function a(e,t){t._middleDrag.middleDown=!0}function s(e,t){t._middleDrag.middleDown=!1}function l(e,t){if(t._middleDrag.middleDown&&!(t.getEventLength(o.EventType.MiddleDrag)<=0)){var n=t._middleDrag.paramArr;n.splice(0,n.length),n.push(e),n.push(t),t.triggerEvent(o.EventType.MiddleDrag,n)}}r.createObj(function(){this._middleDrag={middleDown:!1,paramArr:[]},this.addEventListener(o.EventType.MiddleDown,"_middleDrag",a,0),this.addEventListener(o.EventType.MiddleUp,"_middleDrag",s,0),this.addEventListener(o.EventType.MouseMove,"_middleDrag",l,0)})}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),f=Cesium,o=(r=ye)._kLib.throwErr,a=ye._kLib,ye._dataCenter,ye._auxiliary,s=ye._funcs,l=a.isBool,c=a.isArray,r.util={},s.util={showFPS:function(e){l(e)||(e=!1),this.viewer.scene.debugShowFramesPerSecond=e},fromScreenToCartesian:function(e,t){var n=new f.Cartesian2(e,t);return this.viewer.scene.globe.pick(this.viewer.camera.getPickRay(n),this.viewer.scene)},fromScreenToMap:function(e,t){var n=new f.Cartesian2(e,t),i=this.viewer.scene.globe.pick(this.viewer.camera.getPickRay(n),this.viewer.scene),r=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(i);return{latitude:f.Math.toDegrees(r.latitude),longitude:f.Math.toDegrees(r.longitude),height:r.height}},fromMapToCartesian:function(e,t,n){return f.Cartesian3.fromDegrees(e,t,n)},fromMapToScreen:_e,getGroundHtight:function(e,t){var n=0;try{var i=this.viewer.scene.globe.ellipsoid.cartographicToCartesian(f.Cartographic.fromDegrees(e,t,1e4)),r=this.viewer.scene.globe.ellipsoid.cartographicToCartesian(f.Cartographic.fromDegrees(e,t,0)),o=f.Cartesian3.normalize(f.Cartesian3.subtract(r,i,new f.Cartesian3),new f.Cartesian3),a=new f.Ray(i,o);console.log(i,o,a);var s=this.viewer.scene.globe.pick(a,this.viewer.scene);console.log("position1",s);var l=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(s),c=this.viewer.scene.pickFromRay(a);if(console.log("position1",s,c),null==c)n=l.height;else if(c instanceof f.Cesium3DTileFeature){var u=this.viewer.scene.pickPosition(_e(e,t));if(f.defined(u))n=f.Cartographic.fromCartesian(u).height}}catch(e){n=0}return n},fromMapToScreenInRadian:function(e,t,n){e=180*e/Math.PI,t=180*t/Math.PI,console.log(e,t);var i=f.Cartesian3.fromDegrees(e,t,n);return console.log(i),f.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,i)},downloadImg:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"地图截图.png";this.viewer.scene.context.options.webgl&&this.viewer.scene.context.options.webgl.preserveDrawingBuffer?function(e,t){var n=document.createElement("a");n.download=e;var i=we(t);document.createEvent("HTMLEvents").initEvent("click",!0,!0),n.download=e,n.href=URL.createObjectURL(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e,this.viewer.scene.canvas.toDataURL("image/png")):o("downloadImg:","init must set： contextOptions: {\n      webgl: {\n        preserveDrawingBuffer: true\n      }\n    }")},getImg:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isBlob:!1};if(this.viewer.scene.context.options.webgl){if(this.viewer.scene.context.options.webgl.preserveDrawingBuffer){var t=this.viewer.scene.canvas;return e.isBlob?we(t.toDataURL("image/png")):t.toDataURL("image/png")}o("downloadImg:","init must set： contextOptions: {\n      webgl: {\n        preserveDrawingBuffer: true\n      }\n    }")}else o("downloadImg:","init must set： contextOptions: {\n      webgl: {\n        preserveDrawingBuffer: true\n      }\n    }")},removePrimitives:function(e){if(!c(e))return!1;for(var t=this.viewer.scene.primitives,n=e.length;n--;)t.remove(e[n]);return!0},removePostProcessStage:function(e){return!!e&&(this.viewer.scene.postProcessStages.remove(e),!0)}},function(u,f,e,t,n,i,r){var p="_pickControl",d=t.defined;if(!d(f))return;var h=t.isJson,o=t.isBool;u.Constants.EventType.Pick="Pick";function v(){}var a=function(e){var t=e.viewer.entities,n=t.remove,i=t.removeAll,r=t.removeById;t.remove=function(n,i){return function(e){for(var t=i.length;t--;)if(i[t].id===e.id){i.splice(t,1);break}return n.call(this,e)}}(n,e._pickControl.noSelect),t.removeAll=function(e,t){return function(){return t.splice(0,t.length),e.call(this)}}(i,e._pickControl.noSelect),t.removeById=function(n,i){return function(e){for(var t=i.length;t--;)if(i[t].id===e){i.splice(t,1);break}return n.call(this,e)}}(r,e._pickControl.noSelect)};n.createObj(function(){this._pickControl={postProcessRecord:null,pickFlag:!0,noSelect:[],selectedEntity:new f.Entity},this.pickControl.start(),this.pickControl.setCanPick(!1),a(this)}),n.destroyObj(function(){this.pickControl.stop()});var s={start:function(e){var i=this,r=i.viewer,o=r.scene,a=i._pickControl;a.pickFlag=!0;var t=a.postProcessRecord;h(t)?(i.removeEventListener(u.Constants.EventType.LeftClick,p),i.removeEventListener(u.Constants.EventType.MouseMove,p),t.stage.destroy=t.stage._destroy_,t.silhouette.destroy=t.silhouette._destroy_,o.postProcessStages.remove(t.stage),t.stage.destroy(),t.silhouette.destroy(),delete t.stage,delete t.silhouette):t={};var n=f.PostProcessStageLibrary.createEdgeDetectionStage();n.uniforms.color=new f.Color(1,.2,.2,1),n.uniforms.length=.01,n.selected=[];var s=f.PostProcessStageLibrary.createSilhouetteStage([n]);n._destroy_=n.destroy,n.destroy=v,s._destroy_=s.destroy,s.destroy=v,t.silhouette=n,t.stage=s,a.postProcessRecord=t;var l=[],c=!1;return o.postProcessStages.add(s),i.addEventListener(u.Constants.EventType.LeftClick,p,function(e){if(r.selectedEntity=null,a.pickFlag){var t=o.pick(e.position),n=a.selectedEntity;l.splice(0,l.length),l[2]=i,!d(t)||0<=a.noSelect.indexOf(t.id)?i.triggerEvent("Pick",l):(l[0]=t,l[1]=n,(l[2]=i).triggerEvent("Pick",l))}},0),e||i.addEventListener(u.Constants.EventType.MouseMove,p,function(e){if(a.pickFlag){var t=o.pick(e.endPosition);if(!d(t)||0<=a.noSelect.indexOf(t.id))return n.selected=[],void(c=!1);c=!0,d(t,f.Cesium3DTileFeature)?n.selected=[t]:n.selected=[t.primitive]}else c&&(n.selected=[],c=!1)},0),!0},stop:function(){var e=this._pickControl,t=e.postProcessRecord;if(!h(t))return!1;var n=this.viewer.scene;return this.removeEventListener(u.Constants.EventType.LeftClick,p),this.removeEventListener(u.Constants.EventType.MouseMove,p),t.stage.destroy=t.stage._destroy_,t.silhouette.destroy=t.silhouette._destroy_,n.postProcessStages.remove(t.stage),t.stage.destroy(),t.silhouette.destroy(),e.postProcessRecord=null,!(e.pickFlag=!1)},setCanPick:function(e){var t=this.viewer,n=this._pickControl,i=n.postProcessRecord;return!!h(i)&&(o(e)||(e=!1),e!==n.pickFlag&&(e?t.scene.postProcessStages.add(i.stage):t.scene.postProcessStages.remove(i.stage),n.pickFlag=e),!0)}};r.pickControl=s}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),u=ye,Cesium,p=ye._kLib.throwErr,d=ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs,h=d.defined,v=d.isFunc,m=d.isNum,g=d.isJson,y=d.pointMap,_=new d.ZWorker(function(e,t,n,i,r,o,a,s,l){var c=l(a),u=s.singleProcess;o.data[2]=e,o.ps[2]=1;var f,p,d,h=[NaN,NaN,NaN,NaN],v=[],m=[],g=0,y=[];for(f=n;f--;)for(c(50*(1-(f+1)/n)),d=f*t,p=t;p--;)h[0]=d+p,h[1]=f+1<n?(f+1)*t+p:NaN,h[2]=p+1<t?d+p+1:NaN,h[3]=f+1<n&&p+1<t?(f+1)*t+p+1:NaN,g=u(e,h,v,m,g,i,y);if(!(v.length<=0)){var _=new Float64Array(v.length);for(f=v.length-3;0<=f;f-=3)_[f]=v[f]+r,_[f+1]=v[f+1],_[f+2]=v[f+2];c(60);for(var w,x=[],b=[],P=y.length,C=!1;0<y.length;){if((w=b.length)<=0)b[0]=y.pop(),b[1]=y.pop();else{for(w-=1,C=!1,f=y.length-2;0<=f;f-=2){if(y[f]===b[0])b.unshift(y[f+1]);else{if(y[f+1]!==b[w])continue;b.push(y[f])}y.splice(f,2),C=!0;break}C||(x.push(b),b=[])}c(30*(1-y.length/P)+60)}for(0<b.length&&x.push(b),P=0,f=x.length;f--;)P+=x[f].length;var T=new Uint16Array(P+x.length-1);for(w=0,f=P=x.length;f--;){for(c(10*(1-(f+1)/P)+90),p=(b=x[f]).length;p--;)T[w++]=b[p]+1;T[w++]=0}o.data[0]=_,o.data[1]=T,o.ps[0]=1,o.ps[1]=1}},null,null,["singleProcess",xe,"",xe()]),w=h,x=y,b=v,P=m,C=_,T=[1],k=function(i,e,r,t){var n="isoHeightCalculator: ";return w(i,x)?P(e)?b(r)?(P(t)||(t=0),C.do([i.getBuffer(),i.getWidth(),i.getHeight(),e,t],T,function(e,t,n){i.setBuffer(n),r(-1,e,t)},function(e){r(e)}),!0):(p(n,"参数3(reFunc)不合法","analysis\\isoHeight\\calculator.js",321),!1):(p(n,"参数2(heightValue)不合法","analysis\\isoHeight\\calculator.js",317),!1):(p(n,"参数1(pointMap)不合法","analysis\\isoHeight\\calculator.js",313),!1)},E=u.calculator,g(E)||(E={}),(u.calculator=E).isoHeight=k,Cesium,ye._kLib.throwErr,M=ye._kLib,S=ye._dataCenter,ye._auxiliary,ye._funcs,A=M.accelerator,L=A,S.createObj(function(){var e=this.divId+"-d3tool",t=new L,n=document.createElement("canvas");n.id=e,n.width=1,n.height=1,n.style.display="none",document.getElementById(this.divId).appendChild(n),t.init(e,10,10),this._analysisTool={canvasId:e,accelerator:t,cvSize:10,cvPixel:1024}}),function(e,i,t,n){function r(e){this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=null,this.duration=null,this._time=(new Date).getTime(),this._init(e)}var o=n.defined,a=n.isJson,s=n.isNum,l=n.isString;r.prototype._init=function(e){a(e)||t("TrailMaterialPropertyX.set:","Illegal parameters.","classes\\zTrailMaterialProperty.js",20),o(e.color)||t("TrailMaterialPropertyX.set","param.color is NULL.","classes\\zTrailMaterialProperty.js",21),l(e.image)||(e.image="./img/colors-line.png"),s(e.duration)||(e.duration=2e3),this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.image=e.image,this.color=e.color,this.duration=e.duration,this._time=(new Date).getTime()},i.defineProperties(r.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:i.createPropertyDescriptor("color")}),r.prototype.getType=function(e){return"TrailMaterialPropertyX"},r.prototype.getValue=function(e,t){return i.defined(t)||(t={}),t.color=i.Property.getValueOrClonedDefault(this._color,e,i.Color.WHITE,t.color),t.image=this.image,t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},r.prototype.equals=function(e){return this===e||e instanceof r},i.Material._materialCache.addMaterial("TrailMaterialPropertyX",{fabric:{type:"TrailMaterialPropertyX",uniforms:{color:new i.Color(1,0,0,.5),image:"./img/colors-line.png",time:0},source:"czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                      {\n                                                           czm_material material = czm_getDefaultMaterial(materialInput);\n                                                           vec2 st = materialInput.st;\n                                                           vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                                                           material.alpha = colorImage.a;\n                                                           material.diffuse = colorImage.rgb;\n                                                           return material;\n                                                       }"},translucent:function(){return!0}}),e.TrailMaterialPropertyX=r;function c(e){this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=null,this.duration=null,this._time=(new Date).getTime(),this._init(e)}c.prototype._init=function(e){a(e)||t("TrailMaterialPropertyY.set:","Illegal parameters.","classes\\zTrailMaterialProperty.js",102),o(e.color)||t("TrailMaterialPropertyY.set","param.color is NULL.","classes\\zTrailMaterialProperty.js",103),l(e.image)||(e.image="./img/colors-line.png"),s(e.duration)||(e.duration=2e3),this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.image=e.image,this.color=e.color,this.duration=e.duration,this._time=(new Date).getTime()},i.defineProperties(c.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:i.createPropertyDescriptor("color")}),c.prototype.getType=function(e){return"TrailMaterialPropertyY"},c.prototype.getValue=function(e,t){return i.defined(t)||(t={}),t.color=i.Property.getValueOrClonedDefault(this._color,e,i.Color.WHITE,t.color),t.image=this.image,t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},c.prototype.equals=function(e){return this===e||e instanceof c},i.Material._materialCache.addMaterial("TrailMaterialPropertyY",{fabric:{type:"TrailMaterialPropertyY",uniforms:{color:new i.Color(1,0,0,.5),image:"./img/colors-line.png",time:0},source:"czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                      {\n                                                           czm_material material = czm_getDefaultMaterial(materialInput);\n                                                           vec2 st = materialInput.st;\n                                                           vec4 colorImage = texture2D(image, vec2(st.s, fract(st.t - time)));\n                                                           material.alpha = colorImage.a;\n                                                           material.diffuse = colorImage.rgb;\n                                                           return material;\n                                                       }"},translucent:function(){return!0}}),e.TrailMaterialPropertyY=c;function u(e){this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=null,this.duration=null,this._time=(new Date).getTime(),this._init(e)}u.prototype._init=function(e){a(e)||t("TrailMaterialPropertyRota.set:","Illegal parameters.","classes\\zTrailMaterialProperty.js",184),o(e.color)||t("TrailMaterialPropertyRota.set","param.color is NULL.","classes\\zTrailMaterialProperty.js",185),l(e.image)||(e.image="./img/colors-line.png"),s(e.duration)||(e.duration=2e3),this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.image=e.image,this.color=e.color,this.duration=e.duration,this._time=(new Date).getTime()},i.defineProperties(u.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:i.createPropertyDescriptor("color")}),u.prototype.getType=function(e){return"TrailMaterialPropertyRota"},u.prototype.getValue=function(e,t){i.defined(t)||(t={}),t.color=i.Property.getValueOrClonedDefault(this._color,e,i.Color.WHITE,t.color),t.image=this.image;var n=((new Date).getTime()-this._time)%this.duration/this.duration*2*Math.PI;return t.time=n,t},u.prototype.equals=function(e){return this===e||e instanceof u},i.Material._materialCache.addMaterial("TrailMaterialPropertyRota",{fabric:{type:"TrailMaterialPropertyRota",uniforms:{color:new i.Color(1,0,0,.5),image:"./img/colors-line.png",time:0},source:"czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                      {\n                                                           czm_material material = czm_getDefaultMaterial(materialInput);\n                                                           vec2 st = materialInput.st;\n                                                           vec4 colorImage = texture2D(image, vec2( (st.s - 0.5)*cos(time )- (st.t-0.5)*sin(time) + 0.5, (st.s - 0.5)*sin(time) + (st.t-0.5)*cos(time) + 0.5 ));\n                                                           material.alpha = colorImage.a;\n                                                           material.diffuse = colorImage.rgb;\n                                                           return material;\n                                                       }"},translucent:function(){return!0}}),e.TrailMaterialPropertyRota=u}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,r,n){var i=n.defined;if(i(t)){n.isJson;var o,a,s,l,c,u=n.isFunc,f=n,p=n._base_,d=n.compute.matrix4,h=n.compute._matrix4_,v=new n.ZWorker(function(e,t,n,i,r,o){var a=o(i),s=[NaN,NaN,NaN,NaN,NaN,NaN],l=[NaN,NaN,NaN,NaN,NaN,NaN],c=[0,0,0,1],u=new r.Matrix4(!0);u.setFromBuffer(t);var f,p=e.length;for(f=p-3;0<=f;f-=3)a(100*(1-(f+3)/p)),c[0]=e[f],c[1]=e[f+1],c[2]=e[f+2],c[3]=1,(isNaN(s[0])||s[0]>c[0])&&(s[0]=c[0]),(isNaN(s[3])||s[3]<c[0])&&(s[3]=c[0]),(isNaN(s[1])||s[1]>c[1])&&(s[1]=c[1]),(isNaN(s[4])||s[4]<c[1])&&(s[4]=c[1]),(isNaN(s[2])||s[2]>c[2])&&(s[2]=c[2]),(isNaN(s[5])||s[5]<c[2])&&(s[5]=c[2]),u.mvec(c),(isNaN(l[0])||l[0]>c[0])&&(l[0]=c[0]),(isNaN(l[3])||l[3]<c[0])&&(l[3]=c[0]),(isNaN(l[1])||l[1]>c[1])&&(l[1]=c[1]),(isNaN(l[4])||l[4]<c[1])&&(l[4]=c[1]),(isNaN(l[2])||l[2]>c[2])&&(l[2]=c[2]),(isNaN(l[5])||l[5]<c[2])&&(l[5]=c[2]);n.ps[0]=1,n.data[0]=e,n.data[1]=s,n.data[2]=l},null,null,["base",p,"",f,"Matrix4",h,"__f.base.defined, __f.base.isNum, __f.base.isArray, __f.base.isFunc",d]),m=(o=v,a=i,s=u,l=d,c=[1],function(e,t,i){var n="getBox: ";return a(e,Float32Array)||a(e,Float64Array)?a(t,l)?s(i)?o.do([e,t.getBuffer()],c,function(e,t,n){i(-1,e,t,n),o.getLength()||o.stop()},function(e){i(e)}):(r(n,"参数3(reFunc)不合法","analysis\\octoPath\\getBox.js",81),!1):(r(n,"参数2(viewMatrix)不合法","analysis\\octoPath\\getBox.js",77),!1):(r(n,"参数1(vertices)不合法","analysis\\octoPath\\getBox.js",73),!1)});e.getBox=m}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,o,n){var i=n.defined;if(i(t)){var a,s,l,c,u,f,r=n.isJson,p=n.isFunc,d=n.isNum,h=n.pointMap,v=n.compute.funcAng,m=n.compute._funcAng_,g=(n.compute.matrix4,new n.ZWorker(function(e,t,n,i,r,o,a){var s=a(r),l=o.funcAng,c=o.findNear,u=Math.ceil(360/t);t=2*Math.PI/u;var f,p=new Float64Array(5*u);for(f=5*u;f--;)p[f]=NaN;var d,h,v,m=[0,0,0,1],g=e.length;for(f=g-4;0<=f;f-=4)s(100*(1-(f+4)/g)),isNaN(e[f])||isNaN(e[f+1])||isNaN(e[f+2])||isNaN(e[f+3])||(m[0]=e[f],m[1]=e[f+1],m[2]=e[f+2],n<(v=Math.sqrt(m[0]*m[0]+m[1]*m[1]+m[2]*m[2]))||(h=Math.asin(m[0]/v),d=5*c(l(m[1],m[2]),t,u),(isNaN(p[d])||isNaN(p[1+d])||isNaN(p[2+d])||isNaN(p[3+d])||isNaN(p[4+d])||p[3+d]<h||p[3+d]===h&&p[4+d]>v)&&(p[d]=m[0],p[1+d]=m[1],p[2+d]=m[2],p[3+d]=h,p[4+d]=v)));i.data[0]=p,i.ps[0]=1,i.data[1]=e,i.ps[1]=1},null,null,["funcAng",m,"",v,"findNear",w,"",w()])),y=(a=g,s=i,l=d,c=p,u=h,f=[1],function(n,e,t,i){var r="skylineCalculator: ";return s(n,u)?!l(e)||e<=0||180<e?(o(r,"参数2(precision)不合法","analysis\\skyline\\calculator.js",99),!1):!l(t)||t<=0?(o(r,"参数3(radius)不合法","analysis\\skyline\\calculator.js",103),!1):c(i)?(a.do([n.getBuffer(),e,t],f,function(e,t){n._bufferPosition=t,i(-1,e),a.getLength()||a.stop()},function(e){i(e)}),!0):(o(r,"参数4(reFunc)不合法","analysis\\skyline\\calculator.js",107),!1):(o(r,"参数1(pointMap)不合法","analysis\\skyline\\calculator.js",94),!1)}),_=e.calculator;r(_)||(_={}),(e.calculator=_).skyline=y}function w(){return function(e,t,n){for(var i=Math.round(e/t);n<=i;)i-=n;for(;i<0;)i+=n;return i}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,m,g,t,n,i,r){var y=t.defined;if(y(m)){var _=t.isNum,o=t.isJson,w=t.compute.matrix4,x=i.getFaMatrix,a=r.skyline;o(a)||(a={}),a.getGeometryLine=function(e,t,n,i){var r="skylineGeometry: ",o=2*Math.PI,a=isNaN(n)||n<=0,s={};if(!y(e,Float32Array)&&!y(e,Float64Array))return g(r,"参数1(skylineBuffer)不合法","analysis\\skyline\\geometry.js",22),null;if(y(t,m.Cartesian3)||y(t,m.Cartographic))s.modelMatrix=new w(!0),x(t,this.viewer.scene.mapProjection.ellipsoid,s.modelMatrix,!0);else{if(!y(t,w))return g(r,"参数2(modelMatrix)不合法","analysis\\skyline\\geometry.js",34),null;s.modelMatrix=t}_(i)||(i=2);var l,c,u,f,p,d=Math.floor(e.length/5),h=new Float64Array(3*d),v=new Uint16Array(d+2);for(v[d]=1,l=d;l--;)v[l]=l+1;for(l=d;l--;)c=3*l,f=o/d*l,e[3+(u=5*l)]<=0||isNaN(e[u])||isNaN(e[1+u])||isNaN(e[2+u])||isNaN(e[3+u])?(h[c]=i,a?(h[1+c]=0,h[2+c]=0):(h[1+c]=n*Math.cos(f),h[2+c]=n*Math.sin(f))):a?(h[c]=e[u]+i,h[1+c]=e[1+u],h[2+c]=e[2+u]):(p=n*Math.cos(e[3+u]),h[c]=n*Math.sin(e[3+u])+i,h[1+c]=p*Math.cos(f),h[2+c]=p*Math.sin(f));return s.vertices=h,s.indices=v,s},r.skyline=a}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,s,n,i){function a(){}function r(e){if(w(e)&&w(e.viewer,_)){this._arrowLength=.002,this._arrowBilly=0,this._arrowSensitive=.015;var t=e.viewer,n=t.scene.canvas;this._vector=[new h,new h],this._vectorScreen=[new f,new f],this._distanceWeight=[],this._enuMatrix=new m,this._enuRotate=new v,this.zInst=e,this.viewer=t,this.downHandler=new o(n),this.upHandler=new o(n),this.moveHandler=new o(n),this.planeParams=[],this.planes=[],this.entities=[],this.moveCallbacks=[],this.selectedPlane=null,this.selectedPlaneIndex=-1,this.isRunning=!1,this.modelMatrix=new m(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this._lastRoot=null,this._appliedTiles=[],this._downHandlerAction=function(e,c){var u=e.scene,f=e.camera,p=u.canvas;return function(e){var t,n,i=u.pick(e.position);if(w(i)&&w(i.id)&&0<=(n=function(e,t){e=e._id;for(var n=t.length;n--;)if(e===t[n]._id)return n;return-1}(i.id,c.entities))){var r,o;(t=i.id.plane).material=d.WHITE.withAlpha(.05),t.outlineColor=d.WHITE,c.selectedPlane=t,c.selectedPlaneIndex=n,t=c.entities[n],r=c._vector[0],o=t.position._value,r.x=o.x,r.y=o.y,r.z=o.z,o=c.planes[n].normal,g.eastNorthUpToFixedFrame(r,u.mapProjection.ellipsoid,c._enuMatrix),m.getRotation(c._enuMatrix,c._enuRotate),r=c._vector[1],v.multiplyByVector(c._enuRotate,o,r),o=c._vector[0];var a=c.planes[n].distance;o.x-=r.x*a,o.y-=r.y*a,o.z-=r.z*a,c._arrowBilly=h.distance(o,f.positionWC)/f.frustum.near,h.multiplyByScalar(r,c._arrowBilly*c._arrowLength,r),h.add(r,o,r),u.cartesianToCanvasCoordinates(c._vector[0],c._vectorScreen[0]),u.cartesianToCanvasCoordinates(c._vector[1],c._vectorScreen[1]),r=c._vectorScreen[0],o=c._vectorScreen[1];var s=2*p.width-1,l=2*p.height-1;r.x/=s,r.y/=l,o.x/=s,o.y/=l,c._distanceWeight[0]=(o.x-r.x)/c._arrowLength*c._arrowBilly,c._distanceWeight[1]=(o.y-r.y)/c._arrowLength*c._arrowBilly,u.screenSpaceCameraController.enableInputs=!1}}}(t,this),this._upHandlerAction=function(e,t){var n=e.scene;return function(){var e=t.selectedPlane;w(e)&&(e.material=d.WHITE.withAlpha(.1),e.outlineColor=d.WHITE,t.selectedPlane=void 0,t.selectedPlaneIndex=-1),n.screenSpaceCameraController.enableInputs=!0}}(t,this),this._moveHandlerAction=function(e,r){var o=e.scene.canvas;return function(e){var t=r.selectedPlaneIndex;if(0<=t){var n=(e.startPosition.x-e.endPosition.x)/o.width*r._distanceWeight[0]*r._arrowSensitive,i=(e.startPosition.y-e.endPosition.y)/o.height*r._distanceWeight[1]*r._arrowSensitive;r.planes[t].distance+=n+i,r.moveCallbacks[t](r.planes[t].distance,r.planes)}}}(t,this),this._valid=!0}else s(T,"Invalid viewer.")}var o=t.ScreenSpaceEventHandler,l=t.ScreenSpaceEventType,d=t.Color,c=t.ClippingPlaneCollection,u=t.ClippingPlane,f=t.Cartesian2,h=t.Cartesian3,v=t.Matrix3,m=t.Matrix4,g=t.Transforms,p=t.Entity,y=t.CallbackProperty,_=t.Viewer,w=n.defined,x=n.isNum,b=n.isFunc,P=n.isArray,C=n.isJson,T=(s=function(e,t){throw new Error(e,t)},"ClippingPlane"),k=r.prototype;k.add=function(e,t,n,i){if(!w(e,h)||!x(t)||!b(n))return s(T,"Invalid arguments."),null;b(i)||(i=a),h.normalize(e,e);this.planeParams.push({normal:e,distance:t,whFunc:n});var r=new u(e.clone(),t);this.planes.push(r);var o=new p({plane:{dimensions:new y(n(new f,this.planes),!1),material:d.WHITE.withAlpha(.1),plane:new y(function(){return r},!1),outline:!0,outlineColor:d.WHITE}});return this.entities.push(o),this.moveCallbacks.push(i),r},k.applyPlanes=function(e){var t,n,i,r=this.planes,o=this._appliedTiles;if(P(e)){for(n=e.length;n--;)if(C(e[n])){for(w(e[n].clippingPlanes,c)||(e[n].clippingPlanes=new c),(t=e[n].clippingPlanes).removeAll(),i=r.length;i--;)t.add(r[i]);t.enabled=!0,t.unionClippingRegions=!0,t.edgeWidth=1,o.push(e[n])}return!0}if(C(e)){for(w(e.clippingPlanes,c)||(e.clippingPlanes=new c),(t=e.clippingPlanes).removeAll(),i=r.length;i--;)t.add(r[i]);return t.enabled=!0,t.unionClippingRegions=!0,t.edgeWidth=1,o.push(e),!0}return s(T,"Invalid arguments."),!1},k.batchAdd=function(e){if(!P(e))return s(T,"Invalid arguments."),null;for(var t,n,i=[],r=0,o=e.length;r<o;++r){if(t=e[r],!C(t))return this.clear(),s(T,"Invalid arguments."),null;if(n=this.add(t.normal,t.distance,t.whCallback,t.mvCallback),!w(n))return this.clear(),s(T,"Invalid plane."),null;i.push(n)}return i},k.clear=function(){var e,t=this.viewer.entities,n=this.entities;if(this.isRunning)for(e=n.length;e--;)t.remove(n[e]);else for(n.splice(0,n.length),(n=this.planes).splice(0,n.length),(n=this.planeParams).splice(0,n.length),(n=this.moveCallbacks).splice(0,n.length),e=(n=this._appliedTiles).length;e--;)n[e].clippingPlanes.removeAll()},k.remove=function(e){var t=this.entities;if(e<0||e>=t.length)return s(T,"Invalid arguments."),!1;t.splice(e,1);var n=(t=this.planes)[e];t.splice(e,1),(t=this.planeParams).splice(e,1),(t=this.moveCallbacks).splice(e,1);for(var i=(t=this._appliedTiles).length;i--;)t[i].clippingPlanes.remove(n);return!0},k.reset=function(e){if(!w(e,h)){if(!w(this._lastRoot))return s(T,"Invalid arguments."),!1;e=this._lastRoot}this._lastRoot=e;for(var t,n,i=this.planes,r=this.planeParams,o=this.entities,a=i.length;a--;)t=i[a].normal,n=r[a].normal,t.x=n.x,t.y=n.y,t.z=n.z,i[a].distance=r[a].distance,o[a].position=e.clone();return!0},k.start=function(e){var t=this;if(t.isRunning)return s(T,"Already start."),!1;t.reset(e);for(var n=t.viewer.entities,i=t.entities,r=i.length;r--;)n.add(i[r]);return t.downHandler.setInputAction(t._downHandlerAction,l.LEFT_DOWN),t.upHandler.setInputAction(t._upHandlerAction,l.LEFT_UP),t.moveHandler.setInputAction(t._moveHandlerAction,l.MOUSE_MOVE),t.isRunning=!0},k.stop=function(){if(!this.isRunning)return s(T,"Already stop."),!1;this.downHandler.setInputAction(a,l.LEFT_DOWN),this.upHandler.setInputAction(a,l.LEFT_UP),this.moveHandler.setInputAction(a,l.MOUSE_MOVE);for(var e=this.viewer.entities,t=this.entities,n=t.length;n--;)e.remove(t[n]);for(n=(t=this._appliedTiles).length;n--;)t[n].clippingPlanes.removeAll(),t[n].clippingPlanes.enabled=!1;return this.isRunning=!1,this._upHandlerAction(),!0};i.createObj(function(){this.ClippingPlane=new r(this)})}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,a,n,i,r,o){var s=n.defined;if(s(t)){var l,c,u,f,p,d,h,v=n.isJson,m=n.isString,g=n.isArray,y=(n.isNum,n.compute.matrix4),_=r.convertMatrix,w=(l=s,c=_.mIToC,u=y,f=v,p=m,d=g,h=t,function(e,t){if(!(f(e)&&p(e.data)&&l(e.vpMatrix,u)&&l(e.boxMin,h.Cartesian3)&&l(e.boxMax,h.Cartesian3)&&d(e.boxEye)))return a("slopeMapGeometry: ","参数1(dataJson)不合法","analysis\\slopeMap\\geometry.js",148),null;d(t)||(t=[]),p(t[0])||(t[0]="#00FF00"),p(t[1])||(t[1]="#FFFF00"),p(t[2])||(t[2]="#FF0000");for(var n=0;n<3;n++)t[n]=h.Color.fromCssColorString(t[n]).withAlpha(1);var i=e.boxMin,r=e.boxMax;i.x-=100,i.y-=100,i.z-=100,r.x+=100,r.y+=100,r.z+=100;var o=new h.PostProcessStage({fragmentShader:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform sampler2D orthoMap;\nuniform mat4 vpMatrix;\nuniform mat4 viewMatrix;\nuniform vec3 boxMin;\nuniform vec3 boxMax;\nuniform vec3 heights;\nuniform vec4 color1;\nuniform vec4 color2;\nuniform vec4 color3;\nuniform float PI;\nfloat getDepth(in float z_window) {\n   z_window = czm_reverseLogDepth(z_window);\n   float n_range = czm_depthRange.near;\n   float f_range = czm_depthRange.far;\n   return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nfloat unPackDepth(in vec4 vz) {\n   if(1.0 == vz.x && 1.0 == vz.y && 1.0 == vz.z && 1.0 == vz.w) return 2.0;\n   float result = vz.x + vz.y / 256.0 + vz.z / (256.0 * 256.0) + vz.w / (256.0 * 256.0 * 256.0);\n   return result;\n}\nvec4 toReal(in vec2 uv, in float depth) {\n   vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = czm_inverseView3D * posInCamera;\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\nvoid main() {\n   gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n   float zWindow = czm_unpackDepth(texture2D(depthTexture, v_textureCoordinates));\n   float depth = getDepth(zWindow);\n   vec4 realPosition = toReal(v_textureCoordinates, depth);\n   if(realPosition.x < boxMin.x || realPosition.x > boxMax.x || realPosition.y < boxMin.y || realPosition.y > boxMax.y || realPosition.z < boxMin.z || realPosition.z > boxMax.z) return;\n   vec4 orthoPosition = vpMatrix * realPosition;\n   orthoPosition = orthoPosition / orthoPosition.w;\n   if(orthoPosition.x < -1.0 || orthoPosition.x > 1.0 || orthoPosition.y < -1.0 || orthoPosition.y > 1.0) return;\n   float orthoDepth = unPackDepth(texture2D(orthoMap, vec2(orthoPosition.x / 2.0 + 0.5, orthoPosition.y / 2.0 + 0.5)));\n   if(orthoDepth >= 1.0) return; \n   if( orthoDepth < 0.5){gl_FragColor = gl_FragColor * 0.0 + ((1.0 - orthoDepth/(0.5))* color1 + orthoDepth/(0.5) * color2) * 1.0;}\n   else { gl_FragColor = gl_FragColor * 0.0 + ((1.0 - (orthoDepth - 0.5)/(0.5))* color2 + (orthoDepth - 0.5)/(0.5) * color3) * 1.0;}\n}\n",uniforms:{orthoMap:e.data,vpMatrix:c(e.vpMatrix),boxMin:i,boxMax:r,color1:t[0],color2:t[1],color3:t[2],PI:Math.PI}});return this.viewer.scene.postProcessStages.add(o),o}),x=o.calculator;v(x)||(x={}),(o.calculator=x).slopeMapGeometry=w}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i){var r=i.defined;if(r(t)){var o,a,s,l,c,u,f,p=i.isFunc,d=i.isJson,h=i.isNum,v=i._base_,m=i,g=i.compute._matrix4_,y=i.compute.matrix4,_=new i.ZWorker(function(e,t,n,i,r,o,a){var s,l=a(r),c=new o.Matrix4(!0);c.setFromBuffer(t);var u,f=[0,0,0,1],p=[NaN,NaN,NaN,NaN,NaN,NaN],d=[[],[],[],[],[],[]],h=e.length;for(s=h-n;0<=s;s-=n)l(100*(1-(s+n)/h)),f[0]=e[s],f[1]=e[s+1],f[2]=e[s+2],f[3]=1,c.mvec(f),(isNaN(p[0])||p[0]>f[0])&&(p[0]=f[0],(u=d[0])[0]=e[s],u[1]=e[s+1],u[2]=e[s+2]),(isNaN(p[3])||p[3]<f[0])&&(p[3]=f[0],(u=d[3])[0]=e[s],u[1]=e[s+1],u[2]=e[s+2]),(isNaN(p[1])||p[1]>f[1])&&(p[1]=f[1],(u=d[1])[0]=e[s],u[1]=e[s+1],u[2]=e[s+2]),(isNaN(p[4])||p[4]<f[1])&&(p[4]=f[1],(u=d[4])[0]=e[s],u[1]=e[s+1],u[2]=e[s+2]),(isNaN(p[2])||p[2]>f[2])&&(p[2]=f[2],(u=d[2])[0]=e[s],u[1]=e[s+1],u[2]=e[s+2]),(isNaN(p[5])||p[5]<f[2])&&(p[5]=f[2],(u=d[5])[0]=e[s],u[1]=e[s+1],u[2]=e[s+2]);i.ps[0]=1,i.data[0]=e,i.data[1]=d,i.data[2]=p},null,null,["base",v,"",m,"Matrix4",g,"__f.base.defined, __f.base.isNum, __f.base.isArray, __f.base.isFunc",y]),w=(o=_,a=r,s=d,l=p,c=h,u=y,f=[1],function(i,r){var e="findExtreme: ";return s(i)&&(a(i.vertices,Float32Array)||a(i.vertices,Float64Array))&&a(i.viewMatrix,u)?((!c(i.uLen)||i.uLen<=0)&&(i.uLen=3),l(r)?(o.do([i.vertices,i.viewMatrix.getBuffer(),i.uLen],f,function(e,t,n){i.vertices=e,r(-1,t,n),o.getLength()||o.stop()},function(e){r(e)}),!0):(n(e,"参数2(reFunc)不合法","analysis\\triangles\\findExtreme.js",123),!1)):(n(e,"参数1(dataJson)不合法","analysis\\triangles\\findExtreme.js",116),!1)});e.findExtreme=w}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,x,p,t,n,i){var b=t.defined;if(b(x)){var d,h,v,P=t.isJson,C=t.isNum,T=t.isFunc,r=t._base_,o=t,a=t.compute._matrix4_,k=t.compute.matrix4,s=t.isArray,l=t.ZWorker,c=t.pointMap,E=i.getFaMatrix,u=[],f=[],M=(new l(function(){for(var e,t,n,i,r,o=[],a=[],s=[],l=0,c=0;r=arguments[l+2],(arguments[l]instanceof Float32Array||arguments[l]instanceof Float64Array)&&arguments[l+1]instanceof Uint16Array&&(r instanceof Float32Array||r instanceof Float64Array);)o.push(arguments[l]),a.push(arguments[l+1]),s.push(r),l+=3;e=arguments[l],r=new arguments[l+2].Matrix4(!0);var u=0,f=0;for(t=o.length;t--;)u+=o[t].length,f+=a[t].length;var p=new Uint16Array(f),d=new Float32Array(u),h=[];for(l=0,t=o.length;t--;){for(r.setFromBuffer(s[t]),f=a[t],n=(u=o[t]).length-3;0<=n;n-=3)h[0]=u[n],h[1]=u[n+1],h[2]=u[n+2],r.mvec(h),d[i=n+3*c]=h[0],d[i+1]=h[1],d[i+2]=h[2];for(n=f.length;n--;)p[n+l]=f[n]+c;c+=Math.floor(u.length/3),l+=f.length}e.data[0]=d,e.data[1]=p,e.ps[0]=1,e.ps[1]=1},null,null,["base",r,"",o,"Matrix4",a,"__f.base.defined, __f.base.isNum, __f.base.isArray, __f.base.isFunc",k]),new l(function(e,t,n){var i,r,o=new Uint16Array((e-1)*(t-1)*6),a=0,s=[];for(i=e-1;i--;)for(r=t-1;r--;)s[0]=r+i*t,s[1]=s[0]+1,s[2]=s[0]+t,s[3]=s[2]+1,o[a++]=s[2],o[a++]=s[0],o[a++]=s[1],o[a++]=s[1],o[a++]=s[3],o[a++]=s[2];n.data[0]=o,n.ps[0]=1}));n.createObj(function(){this._triangles={samplePoints:[]}}),e.Viewer.prototype.getTerrainTriangles=function(e,t,n,i,r,o,a){if(!(C(e)&&C(t)&&C(n)&&C(i)&&C(r)&&T(a)))return!1;P(o)||(o={}),e=e*Math.PI/180,t=t*Math.PI/180;var s=this.viewer.scene.mapProjection.ellipsoid,l=new x.Cartographic,c=new x.Cartesian3;l.longitude=e,l.latitude=t,l.height=n,o.matrix=new k(!0),s.cartographicToCartesian(l,c),E(c,s,o.matrix,!0);var u,f,p,d,h,v,m,g,y,_=new Float64Array(r*r*3),w=[];for(u=r;u--;)for(f=r;f--;)d=t+(g=(u-(r-1)/2)*i*2/r,b(y=s,x.Ellipsoid)||(y=x.Ellipsoid.WGS84),g/y.radii.x),p=e+(h=d,v=(f-(r-1)/2)*i*2/r,b(m=s,x.Ellipsoid)||(m=x.Ellipsoid.WGS84),v/(m.radii.x*Math.cos(Math.abs(h)))),(l=new x.Cartographic).latitude=d,l.longitude=p,l.height=0,w.push(l);return x.sampleTerrainMostDetailed(this.viewer.terrainProvider,w).then(function(e){for(var t,n=new x.Cartesian3,i=e.length;i--;)s.cartographicToCartesian(e[i],n),_[t=3*i]=n.x,_[1+t]=n.y,_[2+t]=n.z;o.vertices=_,M.do([r,r],[0,0],function(e){o.indices=e,M.getLength()||M.stop(),a(o)})}),!0},e.Viewer.prototype.drawSamplePoints=(d=c,v=new(h=x).Appearance({vertexShaderSource:"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute float batchId;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvoid main() {\n\tvec4 p = czm_computePosition();\n\tv_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n\tv_normalEC = czm_normal * normal;\n\tgl_Position = czm_modelViewProjectionRelativeToEye * p;\n\tgl_PointSize = 10.0;\n}\n",fragmentShaderSource:"precision mediump float;\nvoid main() {\n\tfloat d = distance(gl_PointCoord, vec2(0.5, 0.5));\n\tif(d <= 0.3) gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n\telse if(d <= 0.5) gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n\telse discard;\n}\n",renderState:h.Appearance.getDefaultRenderState(!0,!1)}),function(e,t){var n,i=null;if(b(e,d)&&(e=(i=e)._bufferPosition,t=4),!b(e,Float32Array)&&!b(e,Float64Array))return p("参数错误","参数0必须是Float32Array或Float64Array","analysis\\triangles\\terrain.js",295),!1;(!C(t)||t<=0)&&(t=3),this.removeSamplePoints();var r,o=0,a=0,s=this._triangles.samplePoints;if(null===i){var l,c;for(r=e.length-t;0<=r;r-=t){for(c=!1,l=t;l--;)if(isNaN(e[r+l])){c=!0;break}c||(a+=1)}for(n=new Float64Array(3*a),r=e.length-t;0<=r;r-=t)0===e[r]&&0===e[r+1]&&0===e[r+2]||(n[o++]=e[r],n[o++]=e[r+1],n[o++]=e[r+2])}else{var u;for(i.setPointer(0);null!==(u=i.getData(u));)a+=1;for(n=new Float64Array(3*a),i.setPointer(0),r=a;r--;)u=i.getData(u),n[o++]=u[3],n[o++]=u[4],n[o++]=u[5]}var f=this.viewer.scene.primitives.add(new h.Primitive(function(e){var t,n=new Uint16Array(Math.floor(e.length/3));for(t=n.length;t--;)n[t]=t;var i=new h.Geometry({attributes:{position:new h.GeometryAttribute({componentDatatype:h.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e})},primitiveType:h.PrimitiveType.POINTS,boundingSphere:h.BoundingSphere.fromVertices(e)});return{geometryInstances:new h.GeometryInstance({geometry:i}),appearance:v,asynchronous:!0,allowPicking:!1,show:!0,debugShowBoundingVolume:!1}}(n)));return s.push(f),!0}),e.Viewer.prototype.removeSamplePoints=function(){for(var e=this._triangles.samplePoints,t=this.viewer.scene.primitives,n=e.length;n--;)t.remove(e[n]);e.splice(0,e.length)};var m,g;m=s,g=x}function y(e,t){var n,i,r;if(t.splice(0,t.length),b(e,g.Primitive)){if(e.geometryInstances,m(i))for(i.length;n--;)i[n].geometry,console.log("Type:",geom.primitiveType),console.log("Len:",geom.attributes.position.componentsPerAttribute),t.push(r.attributes.position.values),t.push(r.indices),t.push(i[n].modelMatrix);else i.geometry,console.log("Type:",geom.primitiveType),console.log("Len:",geom.attributes.position.componentsPerAttribute),t.push(r.attributes.position.values),t.push(r.indices),t.push(i.modelMatrix);return!0}return!1}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,c,t,n,i,r){var u=n.defined;if(u(c)){var f=n.isJson,p=r.compareDist,o=e.Constants;o.EventType.LeftClickWorld="LeftClickWorld",o.EventType.RightClickWorld="RightClickWorld",o.EventType.MiddleClickWorld="MiddleClickWorld",o.EventType.MouseMoveWorld="MouseMoveWorld";var a="_"+o.EventType.LeftClickWorld,s="_"+o.EventType.RightClickWorld,l="_"+o.EventType.MiddleClickWorld,d="_"+o.EventType.MouseMoveWorld;i.createObj(function(){this._mouseWorld={stwCartesian:new c.Cartesian3(0,0,0),lcArr:[],rcArr:[],mcArr:[],mmArr:[],mmJsn:{}},this.addEventListener(o.EventType.LeftClick,a,function(e,t){if(!(t.getEventLength(o.EventType.LeftClickWorld)<=0)){var n=t.screenToWorld(e.position);if(u(n)){var i=t._mouseWorld.lcArr;i[0]=n.position,i[1]=n.object,(i[2]=t).triggerEvent(o.EventType.LeftClickWorld,i)}}},0),this.addEventListener(o.EventType.RightClick,s,function(e,t){if(!(t.getEventLength(o.EventType.RightClickWorld)<=0)){var n=t.screenToWorld(e.position);if(u(n)){var i=t._mouseWorld.rcArr;i[0]=n.position,i[1]=n.object,(i[2]=t).triggerEvent(o.EventType.RightClickWorld,i)}}},0),this.addEventListener(o.EventType.MiddleClick,l,function(e,t){if(!(t.getEventLength(o.EventType.MiddleClickWorld)<=0)){var n=t.screenToWorld(e.position);if(u(n)){var i=t._mouseWorld.mcArr;i[0]=n.position,i[1]=n.object,(i[2]=t).triggerEvent(o.EventType.MiddleClickWorld,i)}}},0),this.addEventListener(o.EventType.MouseMove,d,function(e,t){if(!(t.getEventLength(o.EventType.MouseMoveWorld)<=0)){var n=t.screenToWorld(e.endPosition,t._mouseWorld.mmJsn);if(u(n)){var i=t._mouseWorld.mmArr;i[0]=n.position,i[1]=n.object,(i[2]=t).triggerEvent(o.EventType.MouseMoveWorld,i)}}},0)});var h=e.Viewer.prototype;h.screenToWorld=function(e,t){var n=this.viewer;if(n.scene.mode===c.SceneMode.MORPHING)return null;var i,r=this._mouseWorld.stwCartesian;f(t)||(t={});var o=t.position;u(o,c.Cartesian3)||(o=new c.Cartesian3(0,0,0)),t.object=void 0;var a=this._pickControl.noSelect,s=n.camera.getPickRay(e),l=n.scene.pickFromRay(s,a);if(u(l)&&u(l.position)?(i=l.position,t.object=l.object):l=null,u(n.scene.globe.pick(s,n.scene,r)))u(l)?(l=s.origin,p(i,r,l)?(o.x=i.x,o.y=i.y,o.z=i.z):(o.x=r.x,o.y=r.y,o.z=r.z,t.object=void 0)):(o.x=r.x,o.y=r.y,o.z=r.z);else{if(!u(l))return;o.x=i.x,o.y=i.y,o.z=i.z}return t.position=o,t},h.worldToScreen=function(e,t){return this.viewer.scene.cartesianToCanvasCoordinates(e,t)},h.cartesianToCartographic=function(e,t){return this.viewer.scene.mapProjection.ellipsoid.cartesianToCartographic(e,t)},h.cartographicToCartesian=function(e,t){return this.viewer.scene.mapProjection.ellipsoid.cartographicToCartesian(e,t)}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){var s=i.defined;if(s(t)){var l,c,u,f,p,d,h,v=i.isString,m=i.isJson,g=i.isArray,y=i.compute.matrix4,_=o.convertMatrix,w=(l=s,c=_.mIToC,u=y,f=v,p=m,d=g,h=t,function(e){if(!p(e)||!f(e.data)||!l(e.vpMatrix,u)||!l(e.boxMin,h.Cartesian3)||!l(e.boxMax,h.Cartesian3)||!d(e.boxEye)||e.boxEye.length<6)return n("visualAnalysisGeometry: ","参数1(dataJson)不合法","analysis\\visualAnalysis\\geometry.js",77),null;var t=new h.PostProcessStage({fragmentShader:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec3 boxMin;\nuniform vec3 boxMax;\nuniform mat4 vpMatrix;\nuniform sampler2D visualMap;\nfloat getDepth(in float z_window) {\n   z_window = czm_reverseLogDepth(z_window);\n   float n_range = czm_depthRange.near;\n   float f_range = czm_depthRange.far;\n   return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvec4 toReal(in vec2 uv, in float depth) {\n   vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = czm_inverseView3D * posInCamera;\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\nvoid main() {\n   gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n   float zWindow = czm_unpackDepth(texture2D(depthTexture, v_textureCoordinates));\n   float depth = getDepth(zWindow);\n   vec4 realPosition = toReal(v_textureCoordinates, depth);\n   if(realPosition.x < boxMin.x || realPosition.x > boxMax.x || realPosition.y < boxMin.y || realPosition.y > boxMax.y || realPosition.z < boxMin.z || realPosition.z > boxMax.z) return;\n   realPosition = vpMatrix * realPosition;\n   vec2 mapPosition = vec2(realPosition.x / realPosition.w / 2.0 + 0.5, realPosition.y / realPosition.w / 2.0 + 0.5);\n   if(mapPosition.x < 0.0 || mapPosition.x > 1.0 || mapPosition.y < 0.0 || mapPosition.y > 1.0) return;\n   vec4 mapColor = texture2D(visualMap, mapPosition);\n   if(1.0 == mapColor.r && 1.0 == mapColor.g && 1.0 == mapColor.b && 1.0 == mapColor.a) return;\n   gl_FragColor = gl_FragColor * mapColor * 2.0;\n}\n",uniforms:{vpMatrix:c(e.vpMatrix),visualMap:e.data,boxMin:e.boxMin,boxMax:e.boxMax}});return this.viewer.scene.postProcessStages.add(t),t}),x=a.calculator;m(x)||(x={}),(a.calculator=x).visualAnalysisGeometry=w}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,n,t,i,r){i.isJson;r.createObj(function(){this._ambientLight={color:new n.Cartesian4(1,1,1,1),postStage:null},this.initParams.enableAmbientLight&&this.enableAmbientPostStage()});function o(){null!=this._ambientLight.postStage&&(this.viewer.scene.postProcessStages.remove(this._ambientLight.postStage),this._ambientLight.postStage=null)}var a=e.Viewer.prototype;a.enableAmbientPostStage=function(){var e=this;o.apply(e);var t=new n.PostProcessStage({fragmentShader:"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 ambientLight;\nvec4 toReal(in vec2 uv, in float depth) {\n   vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = czm_inverseView3D * posInCamera;\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\nfloat getDepth(in vec4 depth) {\n   float z_window = czm_unpackDepth(depth);\n   z_window = czm_reverseLogDepth(z_window);\n   float n_range = czm_depthRange.near;\n   float f_range = czm_depthRange.far;\n   return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main() {\n   float depth = getDepth(texture2D(depthTexture, v_textureCoordinates));\n   vec4 realPosition = toReal(v_textureCoordinates, depth);\n   gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n   gl_FragColor = (gl_FragColor + ambientLight)/2.0;\n}\n",uniforms:{ambientLight:function(){return e._ambientLight.color}}});return e._ambientLight.postStage=t,e.viewer.scene.postProcessStages.add(t),t},a.disableAmbientPostStage=o,a.ambientColor=function(e,t,n,i){if(e&&t&&n&&i){var r=this._ambientLight.color;return r.x=e,r.y=t,r.z=n,r.w=i,!0}return!1}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){var s=i.defined;if(s(t)){var l=i.isJson,c=(i.isFunc,i.isNum),u=(i.paramIntoString,i.compute.matrix4),f=o.convertMatrix;r.createObj(function(){this._visualizer={},this.visualizer.pointAppearance(5,1,t.Color.RED,t.Color.YELLOW,!1),this.visualizer.lineAppearance(3,1,t.Color.YELLOW,t.Color.RED,!1),this.visualizer.triangleAppearance("1.0, 1.0, 0.0, 0.5")});var p,d,h,v,m,g,y,_,w,x,b=(p=s,d=c,h=f.mIToC,v=u,m=t,{f:function(e,t,n,i,r){if(p(r)||(r=this),!p(e,Float32Array)&&!p(e,Float64Array))return null;(!d(i)||i<3)&&(i=3);var o=function(e,t,n,i){var r,o,a,s,l,c=new m.PointPrimitiveCollection;if(p(t,Uint16Array))for(r=t.length;r--;){for(l=t[r]*n,s=!1,a=n;a--;)if(isNaN(e[l+a])){s=!0;break}s||(o={position:new m.Cartesian3(e[l],e[1+l],e[2+l])},c.add(i(o)))}else for(r=e.length-n;0<=r;r-=n){for(s=!1,a=n;a--;)if(isNaN(e[r+a])){s=!0;break}s||(o={position:new m.Cartesian3(e[r],e[r+1],e[r+2])},c.add(i(o)))}return c}(e,t,i,r._visualizer.pointAppearance);return p(n,v)&&(o.modelMatrix=h(n)),o=r.viewer.scene.primitives.add(o)},s:function(t,n,i,r,o){this._visualizer.pointAppearance=function(e){return e.color=i,e.pixelSize=t,e.outlineColor=r,e.outlineWidth=n,e.disableDepthTestDistance=o?0:Number.POSITIVE_INFINITY,e}}}),P=(g=s,y=c,_=f.mIToC,w=u,x=t,{f:function(e,t,n,i,r){if(g(r)||(r=this),!g(e,Float32Array)&&!g(e,Float64Array))return null;(!y(i)||i<3)&&(i=3);var o=function(e,t,n,i){var r,o,a,s,l=new x.PolylineCollection,c={positions:[]};if(g(t,Uint16Array))for(r=t.length;r--;)if(0!==t[r]){for(s=(t[r]-1)*n,a=!1,o=n;o--;)if(isNaN(e[s+o])){a=!0;break}a||c.positions.push(new x.Cartesian3(e[s],e[1+s],e[2+s]))}else l.add(i(c)),c={positions:[]};else for(r=e.length-n;0<=r;r-=n){for(a=!1,o=n;o--;)if(isNaN(e[r+o])){a=!0;break}a||c.positions.push(new x.Cartesian3(e[r],e[r+1],e[r+2]))}return 0<c.positions.length&&l.add(i(c)),l}(e,t,i,r._visualizer.lineAppearance);return g(n,w)&&(o.modelMatrix=_(n)),o=r.viewer.scene.primitives.add(o)},s:function(t,e,n,i,r){var o=new x.Material({fabric:{type:"PolylineOutline",uniforms:{color:n,outlineWidth:e,outlineColor:i}}});this._visualizer.lineAppearance=function(e){return e.width=t,e.material=o,e.disableDepthTestDistance=r?0:Number.POSITIVE_INFINITY,e}}}),C=(f.mIToC,{f:function(){},s:function(){}}),T=a.visualizer;l(T)||(T={}),T.point=b.f,T.line=P.f,T.triangle=C.f,T.pointAppearance=b.s,T.lineAppearance=P.s,T.triangleAppearance=C.s,T.pointObj=function(e){return s(e)?b.f(e.vertices,e.indices,e.modelMatrix,3,this):null},T.lineObj=function(e){return s(e)?P.f(e.vertices,e.indices,e.modelMatrix,3,this):null},T.triangleObj=function(e){return s(e)?C.f(e.vertices,e.indices,e.modelMatrix,3,this):null},a.visualizer=T}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(t,u,e,n,i,r,o){if((0,n.defined)(u)){var a=function(e,t){var n=t.viewer,i=new u.Cartesian2(e.endPosition.x,e.endPosition.y);if(i){var r=n.scene.globe.pick(n.camera.getPickRay(i),n.scene);if(r){var o=n.scene.globe.ellipsoid.cartesianToCartographic(r);if(o){var a=n.scene.globe.getHeight(o),s=Math.sqrt(n.scene.camera.positionWC.x*n.scene.camera.positionWC.x+n.scene.camera.positionWC.y*n.scene.camera.positionWC.y+n.scene.camera.positionWC.z*n.scene.camera.positionWC.z),l=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z),c=[o.longitude/Math.PI*180,o.latitude/Math.PI*180];a=a||0,s=s||0,l=l||0,c=c||[0,0],t._show3DCoordinates.coordinatesDiv.innerHTML="<span id='cd_label' style='font-size:13px;text-align:center;font-family:微软雅黑;color:#edffff;'>视角海拔高度:"+(s-l).toFixed(2)+"米&nbsp;&nbsp;&nbsp;&nbsp;海拔:"+a.toFixed(2)+"米&nbsp;&nbsp;&nbsp;&nbsp;经度："+c[0].toFixed(6)+"&nbsp;&nbsp;纬度："+c[1].toFixed(6)+"</span>"}}}};i.createObj(function(){var e=function(e){var t=e.divId+"_coordinates",n=e.divId+"_elementbottom",i=document.getElementById(n);i?i.style.display="block":((i=document.createElement("div")).id=n,i.style.position="absolute",i.style.bottom="0",i.style.backgroundColor="#000000",i.style.height="20px",i.style.width="100%",i.style.filter="alpha(Opacity=50)",i.style.opacity="0.5",document.getElementById(e.divId).getElementsByClassName("cesium-viewer")[0].append(i));var r=document.getElementById(t);return r?r.style.display="block":((r=document.createElement("div")).id=t,r.style.position="absolute",r.style.bottom="0",r.innerHTML="<span id='cd_label' style='font-size:13px;text-align:center;font-family:微软雅黑;color:#edffff;'>暂无坐标信息</span>",document.getElementById(e.divId).getElementsByClassName("cesium-viewer")[0].appendChild(r)),[i,r]}(this);this._show3DCoordinates={elementBottom:e[0],coordinatesDiv:e[1]},this.initParams.show3DCoordinates?this.show3DCoordinates.show():this.show3DCoordinates.hide()});var s={show:function(){var e=this._show3DCoordinates;e.elementBottom.style.display="block",e.coordinatesDiv.style.display="block",this.addEventListener(t.Constants.EventType.MouseMove,"bottomInformation",a,0)},hide:function(){var e=this._show3DCoordinates;e.elementBottom.style.display="none",e.coordinatesDiv.style.display="none",this.removeEventListener(t.Constants.EventType.MouseMove,"bottomInformation")}};o.show3DCoordinates=s}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){var s=i.defined;if(s(t)){var l={};(a.skybox=l).create=function(e){return new t.SkyBox(e)},l.set=function(e){return!!s(e,t.SkyBox)&&(this.viewer.scene.skyBox=e,!0)},l.unset=function(){var e=this.viewer.scene.skyBox;return this.viewer.scene.skyBox=void 0,s(e,t.SkyBox)&&e.destroy(),!0}}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i){if((0,i.defined)(t)){var r=i.isJson,o=function(e){this.init.apply(this,arguments)};o.prototype={_frameDiv:null,_div:null,_title:null,init:function(e){var t=document.createElement("DIV");t.className="twipsy right";var n=document.createElement("DIV");n.className="twipsy-arrow",t.appendChild(n);var i=document.createElement("DIV");i.className="twipsy-inner",t.appendChild(i),e.appendChild(t),this._div=t,this._title=i,this._frameDiv=e},setVisible:function(e){this._div.style.display=e?"block":"none"},showAt:function(e,t){e&&t&&(this.setVisible(!0),this._title.innerHTML=t,this._div.style.left=e.x+10+"px",this._div.style.top=e.y-this._div.clientHeight/2+"px")}};var a=e.SWHZ;r(a)||(a={}),(e.SWHZ=a).GlobeTooltip=o}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){var s=e.Constants;r.createObj(function(){this._noUg={minimumZoomDistance:NaN,lastY:NaN},this.initParams.noUnderGround?this.noUg.on():this.noUg.off()});function l(e,t){t._noUg.lastY=e.position.y}function c(e,t){var n=e.endPosition,i=n.y-t._noUg.lastY;t._noUg.lastY=n.y,0<i&&(t.viewer.scene.screenSpaceCameraController.enableTilt=!0)}function u(e,t,n,i,r,o,a){a.viewer.scene.screenSpaceCameraController.enableTilt=!(0<=r)}a.noUg={on:function(){this.addEventListener(s.EventType.MiddleDown,"_noUg",l,0),this.addEventListener(s.EventType.MiddleDrag,"_noUg",c,0),this.addEventListener(s.EventType.CameraMove,"_noUg",u,0),this._noUg.minimumZoomDistance=this.viewer.scene.screenSpaceCameraController.minimumZoomDistance,this.viewer.scene.screenSpaceCameraController.minimumZoomDistance=100},off:function(){this.removeEventListener(s.EventType.MiddleDown,"_noUg"),this.removeEventListener(s.EventType.MiddleDrag,"_noUg"),this.removeEventListener(s.EventType.CameraMove,"_noUg"),isNaN(this._noUg.minimumZoomDistance)||(this.viewer.scene.screenSpaceCameraController.minimumZoomDistance=this._noUg.minimumZoomDistance)}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,n,i,r){if((0,r.defined)(n)){var o=r.isJson,x={version:"1.0.0",PlotUtils:{}};x.PlotUtils.distance=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},x.PlotUtils.wholeDistance=function(e){for(var t=0,n=0;n<e.length-1;n++)t+=x.PlotUtils.distance(e[n],e[n+1]);return t},x.PlotUtils.getBaseLength=function(e){return Math.pow(x.PlotUtils.wholeDistance(e),.99)},x.PlotUtils.mid=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},x.PlotUtils.getCircleCenterOfThreePoints=function(e,t,n){var i=[(e[0]+t[0])/2,(e[1]+t[1])/2],r=[i[0]-e[1]+t[1],i[1]+e[0]-t[0]],o=[(e[0]+n[0])/2,(e[1]+n[1])/2],a=[o[0]-e[1]+n[1],o[1]+e[0]-n[0]];return x.PlotUtils.getIntersectPoint(i,r,o,a)},x.PlotUtils.getIntersectPoint=function(e,t,n,i){if(e[1]==t[1]){var r=(i[0]-n[0])/(i[1]-n[1]),o=r*(e[1]-n[1])+n[0],a=e[1];return[o,a]}if(n[1]!=i[1])return s=(t[0]-e[0])/(t[1]-e[1]),r=(i[0]-n[0])/(i[1]-n[1]),[o=s*(a=(s*e[1]-e[0]-r*n[1]+n[0])/(s-r))-s*e[1]+e[0],a];var s=(t[0]-e[0])/(t[1]-e[1]);return[o=s*(n[1]-e[1])+e[0],a=n[1]]},x.PlotUtils.getAzimuth=function(e,t){var n,i=Math.asin(Math.abs(t[1]-e[1])/x.PlotUtils.distance(e,t));return t[1]>=e[1]&&t[0]>=e[0]?n=i+Math.PI:t[1]>=e[1]&&t[0]<e[0]?n=x.Constants.TWO_PI-i:t[1]<e[1]&&t[0]<e[0]?n=i:t[1]<e[1]&&t[0]>=e[0]&&(n=Math.PI-i),n},x.PlotUtils.getAngleOfThreePoints=function(e,t,n){var i=x.PlotUtils.getAzimuth(t,e)-x.PlotUtils.getAzimuth(t,n);return i<0?i+x.Constants.TWO_PI:i},x.PlotUtils.isClockWise=function(e,t,n){return(n[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(n[0]-e[0])},x.PlotUtils.getPointOnLine=function(e,t,n){return[t[0]+e*(n[0]-t[0]),t[1]+e*(n[1]-t[1])]},x.PlotUtils.getCubicValue=function(e,t,n,i,r){var o=1-(e=Math.max(Math.min(e,1),0)),a=e*e,s=a*e,l=o*o,c=l*o;return[c*t[0]+3*l*e*n[0]+3*o*a*i[0]+s*r[0],c*t[1]+3*l*e*n[1]+3*o*a*i[1]+s*r[1]]},x.PlotUtils.getThirdPoint=function(e,t,n,i,r){var o=x.PlotUtils.getAzimuth(e,t),a=r?o+n:o-n,s=i*Math.cos(a),l=i*Math.sin(a);return[t[0]+s,t[1]+l]},x.PlotUtils.getArcPoints=function(e,t,n,i){var r,o,a=[],s=i-n;s=s<0?s+x.Constants.TWO_PI:s;for(var l=0;l<=x.Constants.FITTING_COUNT;l++){var c=n+s*l/x.Constants.FITTING_COUNT;r=e[0]+t*Math.cos(c),o=e[1]+t*Math.sin(c),a.push([r,o])}return a},x.PlotUtils.getBisectorNormals=function(e,t,n,i){var r=x.PlotUtils.getNormal(t,n,i),o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=r[0]/o,s=r[1]/o,l=x.PlotUtils.distance(t,n),c=x.PlotUtils.distance(n,i);if(o>x.Constants.ZERO_TOLERANCE)if(x.PlotUtils.isClockWise(t,n,i)){var u=e*l,f=n[0]-u*s,p=n[1]+u*a,d=[f,p];u=e*c;var h=[f=n[0]+u*s,p=n[1]-u*a]}else u=e*l,d=[f=n[0]+u*s,p=n[1]-u*a],u=e*c,h=[f=n[0]-u*s,p=n[1]+u*a];else d=[f=n[0]+e*(t[0]-n[0]),p=n[1]+e*(t[1]-n[1])],h=[f=n[0]+e*(i[0]-n[0]),p=n[1]+e*(i[1]-n[1])];return[d,h]},x.PlotUtils.getNormal=function(e,t,n){var i=e[0]-t[0],r=e[1]-t[1],o=Math.sqrt(i*i+r*r);i/=o,r/=o;var a=n[0]-t[0],s=n[1]-t[1],l=Math.sqrt(a*a+s*s);return[i+(a/=l),r+(s/=l)]},x.PlotUtils.getCurvePoints=function(e,t){for(var n=[x.PlotUtils.getLeftMostControlPoint(t)],i=0;i<t.length-2;i++){var r=t[i],o=t[i+1],a=t[i+2],s=x.PlotUtils.getBisectorNormals(e,r,o,a);n=n.concat(s)}var l=x.PlotUtils.getRightMostControlPoint(t);n.push(l);var c=[];for(i=0;i<t.length-1;i++){r=t[i],o=t[i+1],c.push(r);for(e=0;e<x.Constants.FITTING_COUNT;e++){var u=x.PlotUtils.getCubicValue(e/x.Constants.FITTING_COUNT,r,n[2*i],n[2*i+1],o);c.push(u)}c.push(o)}return c},x.PlotUtils.getLeftMostControlPoint=function(e){var n=e[0],i=e[1],r=e[2],o=x.PlotUtils.getBisectorNormals(0,n,i,r)[0],a=x.PlotUtils.getNormal(n,i,r);if(Math.sqrt(a[0]*a[0]+a[1]*a[1])>x.Constants.ZERO_TOLERANCE)var s=x.PlotUtils.mid(n,i),l=n[0]-s[0],c=n[1]-s[1],u=2/x.PlotUtils.distance(n,i),f=-u*c,p=u*l,d=f*f-p*p,h=2*f*p,v=p*p-f*f,m=o[0]-s[0],g=o[1]-s[1],y=s[0]+d*m+h*g,_=s[1]+h*m+v*g;else y=n[0]+t*(i[0]-n[0]),_=n[1]+t*(i[1]-n[1]);return[y,_]},x.PlotUtils.getRightMostControlPoint=function(e){var n=e.length,i=e[n-3],r=e[n-2],o=e[n-1],a=x.PlotUtils.getBisectorNormals(0,i,r,o)[1],s=x.PlotUtils.getNormal(i,r,o);if(Math.sqrt(s[0]*s[0]+s[1]*s[1])>x.Constants.ZERO_TOLERANCE)var l=x.PlotUtils.mid(r,o),c=o[0]-l[0],u=o[1]-l[1],f=2/x.PlotUtils.distance(r,o),p=-f*u,d=f*c,h=p*p-d*d,v=2*p*d,m=d*d-p*p,g=a[0]-l[0],y=a[1]-l[1],_=l[0]+h*g+v*y,w=l[1]+v*g+m*y;else _=o[0]+t*(r[0]-o[0]),w=o[1]+t*(r[1]-o[1]);return[_,w]},x.PlotUtils.getBezierPoints=function(e){var t;if(e.length<=2)return e;for(var n=[],i=e.length-1,r=0;r<=1;r+=.01){for(var o=t=0,a=0;a<=i;a++){var s=x.PlotUtils.getBinomialFactor(i,a),l=Math.pow(r,a),c=Math.pow(1-r,i-a);o+=s*l*c*e[a][0],t+=s*l*c*e[a][1]}n.push([o,t])}return n.push(e[i]),n},x.PlotUtils.getBinomialFactor=function(e,t){return x.PlotUtils.getFactorial(e)/(x.PlotUtils.getFactorial(t)*x.PlotUtils.getFactorial(e-t))},x.PlotUtils.getFactorial=function(e){if(e<=1)return 1;if(2==e)return 2;if(3==e)return 6;if(4==e)return 24;if(5==e)return 120;for(var t=1,n=1;n<=e;n++)t*=n;return t},x.PlotUtils.getQBSplinePoints=function(e){if(e.length<=2)return e;var t,n=[],i=e.length-2-1;n.push(e[0]);for(var r=0;r<=i;r++)for(var o=0;o<=1;o+=.05){for(var a=t=0,s=0;s<=2;s++){var l=x.PlotUtils.getQuadricBSplineFactor(s,o);a+=l*e[r+s][0],t+=l*e[r+s][1]}n.push([a,t])}return n.push(e[e.length-1]),n},x.PlotUtils.getQuadricBSplineFactor=function(e,t){return 0==e?Math.pow(t-1,2)/2:1==e?(-2*Math.pow(t,2)+2*t+1)/2:2==e?Math.pow(t,2)/2:0},x.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4};var a=e.SWHZ;o(a)||(a={}),(e.SWHZ=a).plotUtil=x}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){var s=i.defined;if(s(t)){var l=i.isJson,c=i.isNum,u=i.isArray,f=i.isFunc,p=e.Constants;r.createObj(function(){this._cameraTour={nowPlay:null}});var d,h,v,m,g,y,_=(d=s,h=c,v=u,m=f,g=p,y=t,function(e,t){if(!v(e)){var n=this._cameraTour.nowPlay;return!!d(n,y.KmlTour)&&(d(n.entryStart,y.Event)||(n.entryStart=new y.Event),n.entryStart.addEventListener(function(e){t(e.index)}),!0)}var i=function(e,t,n,i){for(var r,o,a,s=[],l=0,c=e.length;l<c;++l)r=new y.KmlCamera(new y.Cartesian3(e[l][0],e[l][1],e[l][2]),new y.HeadingPitchRoll(e[l][3],e[l][4],e[l][5])),d(r)&&(o=new y.KmlTourFlyTo(e[l][6],e[l][7],r),d(o)&&(o.index=s.length,s.push(o)));return r=Math.uuid(),(a=new y.KmlTour(r,r,s)).playlist=s,m(t)&&(a.tourEnd=new y.Event,a.tourEnd.addEventListener(t)),m(n)&&(a.tourStart=new y.Event,a.tourStart.addEventListener(n)),m(i)&&(a.entryStart=new y.Event,a.entryStart.addEventListener(i)),a}(function(e,t){for(var n,i=[],r=new y.Cartographic(0,0,0),o=new y.Cartesian3(0,0,0),a=0,s=e.length;a<s;++a)n=e[a],h(n.longitude)&&h(n.latitude)&&h(n.height)&&(r.longitude=n.longitude/180*Math.PI,r.latitude=n.latitude/180*Math.PI,r.height=n.height,t.cartographicToCartesian(r,o),n.x=o.x,n.y=o.y,n.z=o.z),h(n.x)&&h(n.y)&&h(n.z)&&i.push([n.x,n.y,n.z,h(n.heading)?n.heading*Math.PI/180:0,h(n.pitch)?n.pitch*Math.PI/180:0,h(n.roll)?n.roll*Math.PI/180:0,h(n.time)&&0<n.time?n.time:2,h(n.mode)?n.mode:g.TourType.Smooth]);return i}(e,this.viewer.scene.mapProjection.ellipsoid),function(){t(-1)},null,m(t)?function(e){t(e.index)}:null);return!!d(i,y.KmlTour)&&(this._cameraTour.nowPlay=i,!0)}),w=a.cameraTour;l(w)||(w={}),w.set=_,w.play=function(){var e=this._cameraTour.nowPlay;return!!s(e,t.KmlTour)&&(e.play(this.viewer),!0)},w.stop=function(){var e=this._cameraTour.nowPlay;s(e)&&e.stop()},a.cameraTour=w}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,d,t,n){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function l(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,f="attribute vec3 position;\nattribute vec2 st;\nvarying vec2 textureCoordinate;\nvoid main() {\n    textureCoordinate = st;\n\tgl_Position = vec4(position, 1.0);\n}\n",r={},p={loadText:function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.responseText},getFullscreenQuad:function(){return new d.Geometry({attributes:new d.GeometryAttributes({position:new d.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new d.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})},createTexture:function(e,t){if(d.defined(t)){var n={};n.arrayBufferView=t,e.source=n}return new d.Texture(e)},createFramebuffer:function(e,t,n){return new d.Framebuffer({context:e,colorTextures:[t],depthTexture:n})},createRawRenderState:function(e){var t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return d.Appearance.getDefaultRenderState(!0,!1,t)},viewRectangleToLonLatRange:function(e){var t,n,i={},r=d.Math.mod(e.west,d.Math.TWO_PI),o=d.Math.mod(e.east,d.Math.TWO_PI),a=e.width;n=a>d.Math.THREE_PI_OVER_TWO?(t=0,d.Math.TWO_PI):o-r<a?(t=r)+a:(t=r,o),i.lon={min:d.Math.toDegrees(t),max:d.Math.toDegrees(n)};var s=e.south,l=e.north,c=e.height,u=c>d.Math.PI/12?c/2:0,f=d.Math.clampToLatitudeRange(s-u),p=d.Math.clampToLatitudeRange(l+u);return f<-d.Math.PI_OVER_THREE&&(f=-d.Math.PI_OVER_TWO),p>d.Math.PI_OVER_THREE&&(p=d.Math.PI_OVER_TWO),i.lat={min:d.Math.toDegrees(f),max:d.Math.toDegrees(p)},i}},o={loadData:function(){var e=function(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var i=s.apply(e,a);function r(e){l(i,t,n,r,o,"next",e)}function o(e){l(i,t,n,r,o,"throw",e)}r(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.dataDirectory+b.dataFile,e.next=3,h(t);case 3:return n=b.dataDirectory+"colorTable.json",v(n),e.abrupt("return",u);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),randomizeParticles:function(e,t){for(var n=new Float32Array(4*e),i=0;i<e;i++)n[4*i]=d.Math.randomBetween(t.lonRange.x,t.lonRange.y),n[4*i+1]=d.Math.randomBetween(t.latRange.x,t.latRange.y),n[4*i+2]=d.Math.randomBetween(u.lev.min,u.lev.max),n[4*i+3]=0;return n}};function h(e){return new Promise(function(a){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="arraybuffer",s.onload=function(){function e(e){return e.reduce(function(e,t){return e[t.name]=t,e},{})}var t=new netcdfjs(s.response);u={};var n=e(t.dimensions);u.dimensions={},u.dimensions.lon=n.lon.size,u.dimensions.lat=n.lat.size,u.dimensions.lev=n.lev.size;var i=e(t.variables),r=e(i.U.attributes),o=e(i.V.attributes);u.lon={},u.lon.array=new Float32Array(t.getDataVariable("lon").flat()),u.lon.min=Math.min.apply(Math,c(u.lon.array)),u.lon.max=Math.max.apply(Math,c(u.lon.array)),u.lat={},u.lat.array=new Float32Array(t.getDataVariable("lat").flat()),u.lat.min=Math.min.apply(Math,c(u.lat.array)),u.lat.max=Math.max.apply(Math,c(u.lat.array)),u.lev={},u.lev.array=new Float32Array(t.getDataVariable("lev").flat()),u.lev.min=Math.min.apply(Math,c(u.lev.array)),u.lev.max=Math.max.apply(Math,c(u.lev.array)),u.U={},u.U.array=new Float32Array(t.getDataVariable("U").flat()),u.U.min=r.min.value,u.U.max=r.max.value,u.V={},u.V.array=new Float32Array(t.getDataVariable("V").flat()),u.V.min=o.min.value,u.V.max=o.max.value,a(u)},s.send()})}function v(e){for(var t=p.loadText(e),n=JSON.parse(t),i=n.ncolors,r=n.colorTable,o=new Float32Array(3*i),a=0;a<i;a++)o[3*a]=r[3*a],o[3*a+1]=r[3*a+1],o[3*a+2]=r[3*a+2];u.colorTable={},u.colorTable.colorNum=i,u.colorTable.array=o}var m=function(){function t(e){a(this,t),this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=d.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new d.ClearCommand({color:new d.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:d.Pass.OPAQUE}))}return s(t,[{key:"createCommand",value:function(e){switch(this.commandType){case"Draw":var t=d.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:d.BufferUsage.STATIC_DRAW}),n=d.ShaderProgram.fromCache({context:e,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),i=d.RenderState.fromCache(this.rawRenderState);return new d.DrawCommand({owner:this,vertexArray:t,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:d.Matrix4.IDENTITY,shaderProgram:n,framebuffer:this.framebuffer,renderState:i,pass:d.Pass.OPAQUE});case"Compute":return new d.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}},{key:"setGeometry",value:function(e,t){this.geometry=t;var n=d.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:d.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=n}},{key:"update",value:function(e){this.show&&(d.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(e.context)),d.defined(this.preExecute)&&this.preExecute(),d.defined(this.clearCommand)&&e.commandList.push(this.clearCommand),e.commandList.push(this.commandToExecute))}},{key:"isDestroyed",value:function(){return!1}},{key:"destroy",value:function(){return d.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),d.destroyObject(this)}}]),t}(),g=function(){function r(e,t,n,i){a(this,r),this.createWindTextures(e,t),this.createParticlesTextures(e,n,i),this.createComputingPrimitives(t,n,i)}return s(r,[{key:"createWindTextures",value:function(e,t){var n={context:e,width:t.dimensions.lon,height:t.dimensions.lat*t.dimensions.lev,pixelFormat:d.PixelFormat.LUMINANCE,pixelDatatype:d.PixelDatatype.FLOAT,flipY:!1,sampler:new d.Sampler({minificationFilter:d.TextureMinificationFilter.NEAREST,magnificationFilter:d.TextureMagnificationFilter.NEAREST})};this.windTextures={U:p.createTexture(n,t.U.array),V:p.createTexture(n,t.V.array)}}},{key:"createParticlesTextures",value:function(e,t,n){var i={context:e,width:t.particlesTextureSize,height:t.particlesTextureSize,pixelFormat:d.PixelFormat.RGBA,pixelDatatype:d.PixelDatatype.FLOAT,flipY:!1,sampler:new d.Sampler({minificationFilter:d.TextureMinificationFilter.NEAREST,magnificationFilter:d.TextureMagnificationFilter.NEAREST})},r=o.randomizeParticles(t.maxParticles,n);this.particlesTextures={particlesWind:p.createTexture(i),currentParticlesPosition:p.createTexture(i,r),nextParticlesPosition:p.createTexture(i,r),currentParticlesSpeed:p.createTexture(i),nextParticlesSpeed:p.createTexture(i),postProcessingPosition:p.createTexture(i,r),postProcessingSpeed:p.createTexture(i)}}},{key:"destroyParticlesTextures",value:function(){var t=this;Object.keys(this.particlesTextures).forEach(function(e){t.particlesTextures[e].destroy()})}},{key:"createComputingPrimitives",value:function(e,t,n){var i=new d.Cartesian3(e.dimensions.lon,e.dimensions.lat,e.dimensions.lev),r=new d.Cartesian3(e.lon.min,e.lat.min,e.lev.min),o=new d.Cartesian3(e.lon.max,e.lat.max,e.lev.max),a=new d.Cartesian3((o.x-r.x)/(i.x-1),(o.y-r.y)/(i.y-1),1<i.z?(o.z-r.z)/(i.z-1):1),s=new d.Cartesian2(e.U.min,e.U.max),l=new d.Cartesian2(e.V.min,e.V.max),c=this;this.primitives={getWind:new m({commandType:"Compute",uniformMap:{U:function(){return c.windTextures.U},V:function(){return c.windTextures.V},currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},dimension:function(){return i},minimum:function(){return r},maximum:function(){return o},interval:function(){return a}},fragmentShaderSource:new d.ShaderSource({sources:["// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind \nuniform sampler2D V; // northward wind\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\nvarying vec2 v_textureCoordinates;\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n    // ensure the range of longitude and latitude\n    lonLatLev.x = mod(lonLatLev.x, 360.0);\n    lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n    vec3 index3D = vec3(0.0);\n    index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n    index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n    index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n    // the st texture coordinate corresponding to (col, row) index\n    // example\n    // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n    // the content of texture will be\n    // t 1.0\n    //    |  3 4 5\n    //    |\n    //    |  0 1 2\n    //   0.0------1.0 s\n    vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n    vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n    return normalizedIndex2D;\n}\nfloat getWind(sampler2D windTexture, vec3 lonLatLev) {\n    vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n    float result = texture2D(windTexture, normalizedIndex2D).r;\n    return result;\n}\nconst mat4 kernelMatrix = mat4(\n    0.0, -1.0, 2.0, -1.0, // first column\n    2.0, 0.0, -5.0, 3.0, // second column\n    0.0, 1.0, 4.0, -3.0, // third column\n    0.0, 0.0, -1.0, 1.0 // fourth column\n);\nfloat oneDimensionInterpolation(float t, float p0, float p1, float p2, float p3) {\n    vec4 tVec4 = vec4(1.0, t, t * t, t * t * t);\n    tVec4 = tVec4 / 2.0;\n    vec4 pVec4 = vec4(p0, p1, p2, p3);\n    return dot((tVec4 * kernelMatrix), pVec4);\n}\nfloat calculateB(sampler2D windTexture, float t, float lon, float lat, float lev) {\n    float lon0 = floor(lon) - 1.0 * interval.x;\n    float lon1 = floor(lon);\n    float lon2 = floor(lon) + 1.0 * interval.x;\n    float lon3 = floor(lon) + 2.0 * interval.x;\n    float p0 = getWind(windTexture, vec3(lon0, lat, lev));\n    float p1 = getWind(windTexture, vec3(lon1, lat, lev));\n    float p2 = getWind(windTexture, vec3(lon2, lat, lev));\n    float p3 = getWind(windTexture, vec3(lon3, lat, lev));\n    return oneDimensionInterpolation(t, p0, p1, p2, p3);\n}\nfloat interpolateOneTexture(sampler2D windTexture, vec3 lonLatLev) {\n    float lon = lonLatLev.x;\n    float lat = lonLatLev.y;\n    float lev = lonLatLev.z;\n    float lat0 = floor(lat) - 1.0 * interval.y;\n    float lat1 = floor(lat);\n    float lat2 = floor(lat) + 1.0 * interval.y;\n    float lat3 = floor(lat) + 2.0 * interval.y;\n    vec2 coef = lonLatLev.xy - floor(lonLatLev.xy);\n    float b0 = calculateB(windTexture, coef.x, lon, lat0, lev);\n    float b1 = calculateB(windTexture, coef.x, lon, lat1, lev);\n    float b2 = calculateB(windTexture, coef.x, lon, lat2, lev);\n    float b3 = calculateB(windTexture, coef.x, lon, lat3, lev);\n    return oneDimensionInterpolation(coef.y, b0, b1, b2, b3);\n}\nvec3 bicubic(vec3 lonLatLev) {\n    // https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\n    float u = interpolateOneTexture(U, lonLatLev);\n    float v = interpolateOneTexture(V, lonLatLev);\n    float w = 0.0;\n    return vec3(u, v, w);\n}\nvoid main() {\n    // texture coordinate must be normalized\n    vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n    vec3 windVector = bicubic(lonLatLev);\n\tgl_FragColor = vec4(windVector, 0.0);\n}\n"]}),outputTexture:this.particlesTextures.particlesWind,preExecute:function(){c.primitives.getWind.commandToExecute.outputTexture=c.particlesTextures.particlesWind}}),updateSpeed:new m({commandType:"Compute",uniformMap:{currentParticlesSpeed:function(){return c.particlesTextures.currentParticlesSpeed},particlesWind:function(){return c.particlesTextures.particlesWind},uSpeedRange:function(){return s},vSpeedRange:function(){return l},pixelSize:function(){return n.pixelSize},speedFactor:function(){return t.speedFactor}},fragmentShaderSource:new d.ShaderSource({sources:["uniform sampler2D currentParticlesSpeed; // (u, v, w, normalization)\nuniform sampler2D particlesWind;\n// use to calculate the relative speed\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\nvarying vec2 v_textureCoordinates;\nvec4 calcRelativeSpeed(vec3 speed) {\n    vec3 percent = vec3(0.0);\n    percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n    percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n\tfloat normalization = length(percent);\n    float minRelativeSpeed = -speedFactor * pixelSize;\n    float maxRelativeSpeed = speedFactor * pixelSize;\n\tvec3 relativeSpeed = vec3(0.0);\n    relativeSpeed.x = mix(minRelativeSpeed, maxRelativeSpeed, percent.x);\n    relativeSpeed.y = mix(minRelativeSpeed, maxRelativeSpeed, percent.y);\n\treturn vec4(relativeSpeed, normalization);\n}\nvoid main() {\n    // texture coordinate must be normalized\n    vec3 currentSpeed = texture2D(currentParticlesSpeed, v_textureCoordinates).rgb;\n\tvec3 windVector = texture2D(particlesWind, v_textureCoordinates).rgb;\n\tvec4 nextSpeed = calcRelativeSpeed(windVector);\n\tgl_FragColor = nextSpeed;\n}\n"]}),outputTexture:this.particlesTextures.nextParticlesSpeed,preExecute:function(){var e;e=c.particlesTextures.currentParticlesSpeed,c.particlesTextures.currentParticlesSpeed=c.particlesTextures.postProcessingSpeed,c.particlesTextures.postProcessingSpeed=e,c.primitives.updateSpeed.commandToExecute.outputTexture=c.particlesTextures.nextParticlesSpeed}}),updatePosition:new m({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},currentParticlesSpeed:function(){return c.particlesTextures.currentParticlesSpeed}},fragmentShaderSource:new d.ShaderSource({sources:["uniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D currentParticlesSpeed; // (u, v, w, normalization)\nvarying vec2 v_textureCoordinates;\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n    // unit conversion: meters -> longitude latitude degrees\n    // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n    // Calculate the length of a degree of latitude and longitude in meters\n    float latitude = radians(lonLatLev.y);\n    float term1 = 111132.92;\n    float term2 = 559.82 * cos(2.0 * latitude);\n    float term3 = 1.175 * cos(4.0 * latitude);\n    float term4 = 0.0023 * cos(6.0 * latitude);\n    float latLength = term1 - term2 + term3 - term4;\n    float term5 = 111412.84 * cos(latitude);\n    float term6 = 93.5 * cos(3.0 * latitude);\n    float term7 = 0.118 * cos(5.0 * latitude);\n    float longLength = term5 - term6 + term7;\n    return vec2(longLength, latLength);\n}\nvoid updatePosition(vec3 lonLatLev, vec3 speed) {\n    vec2 lonlatLengthgth = lengthOfLonLat(lonLatLev);\n    float u = speed.x / lonlatLengthgth.x;\n    float v = speed.y / lonlatLengthgth.y;\n    float w = 0.0;\n    vec3 windVectorInLonLatLev = vec3(u, v, w);\n    vec3 nextParticle = lonLatLev + windVectorInLonLatLev;\n    gl_FragColor = vec4(nextParticle, 0.0);\n}\nvoid main() {\n    // texture coordinate must be normalized\n    vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n    vec3 speed = texture2D(currentParticlesSpeed, v_textureCoordinates).rgb;\n    updatePosition(lonLatLev, speed);\n}\n"]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){var e;e=c.particlesTextures.currentParticlesPosition,c.particlesTextures.currentParticlesPosition=c.particlesTextures.postProcessingPosition,c.particlesTextures.postProcessingPosition=e,c.primitives.updatePosition.commandToExecute.outputTexture=c.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new m({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return c.particlesTextures.nextParticlesPosition},nextParticlesSpeed:function(){return c.particlesTextures.nextParticlesSpeed},lonRange:function(){return n.lonRange},latRange:function(){return n.latRange},randomCoef:function(){var e=Math.random();return e},dropRate:function(){return t.dropRate},dropRateBump:function(){return t.dropRateBump}},fragmentShaderSource:new d.ShaderSource({sources:["uniform sampler2D nextParticlesPosition;\nuniform sampler2D nextParticlesSpeed; // (u, v, w, normalization)\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\nuniform float randomCoef; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\nvarying vec2 v_textureCoordinates;\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n    vec2 randomSeed = randomCoef * seed;\n    float temp = dot(randomConstants.xy, randomSeed);\n    temp = fract(sin(temp) * (randomConstants.z + temp));\n    return temp * (range.y - range.x) + range.x;\n}\nvec3 generateRandomParticle(vec2 seed, float lev) {\n    // ensure the longitude is in [0, 360]\n    float randomLon = mod(rand(seed, lonRange), 360.0);\n    float randomLat = rand(-seed, latRange);\n    return vec3(randomLon, randomLat, lev);\n}\nbool particleOutbound(vec3 particle) {\n    return particle.y < -90.0 || particle.y > 90.0;\n}\nvoid main() {\n\tvec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;\n    vec4 nextSpeed = texture2D(nextParticlesSpeed, v_textureCoordinates);\n    float particleDropRate = dropRate + dropRateBump * nextSpeed.a;\n    vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n    vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n    vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n    float randomNumber = rand(seed2, normalRange);\n\t\n    if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n\t\tgl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n    } else {\n\t\tgl_FragColor = vec4(nextParticle, 0.0);\n    }\n}\n"]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){c.primitives.postProcessingPosition.commandToExecute.outputTexture=c.particlesTextures.postProcessingPosition}}),postProcessingSpeed:new m({commandType:"Compute",uniformMap:{postProcessingPosition:function(){return c.particlesTextures.postProcessingPosition},nextParticlesSpeed:function(){return c.particlesTextures.nextParticlesSpeed}},fragmentShaderSource:new d.ShaderSource({sources:["uniform sampler2D postProcessingPosition;\nuniform sampler2D nextParticlesSpeed;\nvarying vec2 v_textureCoordinates;\nvoid main() {\n\tvec4 randomParticle = texture2D(postProcessingPosition, v_textureCoordinates);\n\tvec4 particleSpeed = texture2D(nextParticlesSpeed, v_textureCoordinates);\n\t\n    if (randomParticle.a > 0.0) {\n\t\tgl_FragColor = vec4(0.0);\n    } else {\n\t\tgl_FragColor = particleSpeed;\n    }\n}\n"]}),outputTexture:this.particlesTextures.postProcessingSpeed,preExecute:function(){c.primitives.postProcessingSpeed.commandToExecute.outputTexture=c.particlesTextures.postProcessingSpeed}})}}}]),r}(),y=function(){function o(e,t,n,i,r){a(this,o),this.createRenderingTextures(e,t),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,n,i,r)}return s(o,[{key:"createRenderingTextures",value:function(e,t){var n={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:d.PixelFormat.RGBA,pixelDatatype:d.PixelDatatype.UNSIGNED_BYTE},i={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:d.PixelFormat.DEPTH_COMPONENT,pixelDatatype:d.PixelDatatype.UNSIGNED_INT},r={context:e,width:t.colorTable.colorNum,height:1,pixelFormat:d.PixelFormat.RGB,pixelDatatype:d.PixelDatatype.FLOAT,sampler:new d.Sampler({minificationFilter:d.TextureMinificationFilter.LINEAR,magnificationFilter:d.TextureMagnificationFilter.LINEAR})};this.textures={segmentsColor:p.createTexture(n),segmentsDepth:p.createTexture(i),currentTrailsColor:p.createTexture(n),currentTrailsDepth:p.createTexture(i),nextTrailsColor:p.createTexture(n),nextTrailsDepth:p.createTexture(i),colorTable:p.createTexture(r,t.colorTable.array)}}},{key:"createRenderingFramebuffers",value:function(e){this.framebuffers={segments:p.createFramebuffer(e,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:p.createFramebuffer(e,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:p.createFramebuffer(e,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}},{key:"createSegmentsGeometry",value:function(e){for(var t=[],n=0;n<e.particlesTextureSize;n++)for(var i=0;i<e.particlesTextureSize;i++)for(var r=0;r<4;r++)t.push(n/e.particlesTextureSize),t.push(i/e.particlesTextureSize);t=new Float32Array(t);var o=[],a=[-1,1],s=[-1,1];for(r=0;r<e.maxParticles;r++)for(var l=0;l<2;l++)for(var c=0;c<2;c++)o.push(a[l]),o.push(s[c]),o.push(0);o=new Float32Array(o);for(var u=6*e.maxParticles,f=new Uint32Array(u),p=(r=0,l=0,0);r<e.maxParticles;r++)f[l++]=p+0,f[l++]=p+1,f[l++]=p+2,f[l++]=p+2,f[l++]=p+1,f[l++]=p+3,p+=4;return new d.Geometry({attributes:new d.GeometryAttributes({st:new d.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:t}),normal:new d.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:o})}),indices:f})}},{key:"createRenderingPrimitives",value:function(e,t,n,i){var r=this;this.primitives={segments:new m({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(t),primitiveType:d.PrimitiveType.TRIANGLES,uniformMap:{currentParticlesPosition:function(){return i.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return i.particlesTextures.postProcessingPosition},postProcessingSpeed:function(){return i.particlesTextures.postProcessingSpeed},colorTable:function(){return r.textures.colorTable},aspect:function(){return e.drawingBufferWidth/e.drawingBufferHeight},pixelSize:function(){return n.pixelSize},lineWidth:function(){return t.lineWidth},particleHeight:function(){return t.particleHeight}},vertexShaderSource:new d.ShaderSource({sources:["attribute vec2 st;\n// it is not normal itself, but used to control normal\nattribute vec3 normal; // (point to use, offset sign, not used component)\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\nuniform sampler2D postProcessingSpeed;\nuniform float particleHeight;\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\nvarying float speedNormalization;\nvec3 convertCoordinate(vec3 lonLatLev) {\n    // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n    // see https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n    // WGS 84 geometric constants \n    float a = 6378137.0; // Semi-major axis \n    float b = 6356752.3142; // Semi-minor axis \n    float e2 = 6.69437999014e-3; // First eccentricity squared\n    float latitude = radians(lonLatLev.y);\n    float longitude = radians(lonLatLev.x);\n    float cosLat = cos(latitude);\n    float sinLat = sin(latitude);\n    float cosLon = cos(longitude);\n    float sinLon = sin(longitude);\n    float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n    float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n    vec3 cartesian = vec3(0.0);\n    cartesian.x = (N_Phi + h) * cosLat * cosLon;\n    cartesian.y = (N_Phi + h) * cosLat * sinLon;\n    cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n    return cartesian;\n}\nvec4 calcProjectedCoord(vec3 lonLatLev) {\n    // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n    // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n    lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n    vec3 particlePosition = convertCoordinate(lonLatLev);\n    vec4 projectedCoord = czm_modelViewProjection * vec4(particlePosition, 1.0);\n    return projectedCoord;\n}\nvec4 calcOffset(vec4 currentProjectedCoord, vec4 nextProjectedCoord, float offsetSign) {\n    vec2 aspectVec2 = vec2(aspect, 1.0);\n    vec2 currentXY = (currentProjectedCoord.xy / currentProjectedCoord.w) * aspectVec2;\n    vec2 nextXY = (nextProjectedCoord.xy / nextProjectedCoord.w) * aspectVec2;\n    float offsetLength = lineWidth / 2.0;\n    vec2 direction = normalize(nextXY - currentXY);\n    vec2 normalVector = vec2(-direction.y, direction.x);\n\tnormalVector.x = normalVector.x / aspect;\n    normalVector = offsetLength * normalVector;\n    vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n    return offset;\n}\nvoid main() {\n    vec2 particleIndex = st;\n\t\n\tvec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;\n\tvec4 nextPosition = texture2D(postProcessingPosition, particleIndex);\n\t\n\tvec4 currentProjectedCoord = vec4(0.0);\n\tvec4 nextProjectedCoord = vec4(0.0);\n\tif (nextPosition.w > 0.0) {\n\t\tcurrentProjectedCoord = calcProjectedCoord(currentPosition);\n\t\tnextProjectedCoord = calcProjectedCoord(currentPosition);\n\t} else {\n\t    currentProjectedCoord = calcProjectedCoord(currentPosition);\n\t\tnextProjectedCoord = calcProjectedCoord(nextPosition.xyz);\n\t}\n\tfloat pointToUse = normal.x; // -1 is currentProjectedCoord and +1 is nextProjectedCoord\n\tfloat offsetSign = normal.y;\n\t\n    vec4 offset = pixelSize * calcOffset(currentProjectedCoord, nextProjectedCoord, offsetSign);\n    if (pointToUse < 0.0) {\n        gl_Position = currentProjectedCoord + offset;\n    } else {\n        gl_Position = nextProjectedCoord + offset;\n    }\n\t\n    speedNormalization = texture2D(postProcessingSpeed, particleIndex).a;\n}\n"]}),fragmentShaderSource:new d.ShaderSource({sources:["uniform sampler2D colorTable;\nvarying float speedNormalization;\nvoid main() {\n    gl_FragColor = texture2D(colorTable, vec2(speedNormalization, 0.0));\n}\n"]}),rawRenderState:p.createRawRenderState({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new m({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:p.getFullscreenQuad(),primitiveType:d.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return r.textures.segmentsColor},segmentsDepthTexture:function(){return r.textures.segmentsDepth},currentTrailsColor:function(){return r.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return r.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return t.fadeOpacity}},vertexShaderSource:new d.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[f]}),fragmentShaderSource:new d.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["uniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\nuniform float fadeOpacity;\nvarying vec2 textureCoordinate;\nvoid main() {\n    vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);\n    vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);\n    trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n    float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;\n    float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n\tfloat globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\tgl_FragColor = vec4(0.0);\n\tif (pointsDepth < globeDepth) {\n\t\tgl_FragColor = gl_FragColor + pointsColor;\n\t}\n\tif (trailsDepth < globeDepth) {\n\t\tgl_FragColor = gl_FragColor + trailsColor;\n\t}\n\tgl_FragDepthEXT = min(pointsDepth, trailsDepth);\n}\n"]}),rawRenderState:p.createRawRenderState({viewport:void 0,depthTest:{enabled:!0,func:d.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){var e;e=r.framebuffers.currentTrails,r.framebuffers.currentTrails=r.framebuffers.nextTrails,r.framebuffers.nextTrails=e,r.primitives.trails.commandToExecute.framebuffer=r.framebuffers.nextTrails,r.primitives.trails.clearCommand.framebuffer=r.framebuffers.nextTrails}}),screen:new m({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:p.getFullscreenQuad(),primitiveType:d.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return r.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return r.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new d.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[f]}),fragmentShaderSource:new d.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["uniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\nvarying vec2 textureCoordinate;\nvoid main() {\n    vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);\n    float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n    float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n    if (trailsDepth < globeDepth) {\n        gl_FragColor = trailsColor;\n    } else {\n        gl_FragColor = vec4(0.0);\n    }\n}\n"]}),rawRenderState:p.createRawRenderState({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}]),o}(),_=function(){function r(e,t,n,i){a(this,r),this.context=e,this.data=t,this.userInput=n,this.viewerParameters=i,this.particlesComputing=new g(this.context,this.data,this.userInput,this.viewerParameters),this.particlesRendering=new y(this.context,this.data,this.userInput,this.viewerParameters,this.particlesComputing)}return s(r,[{key:"canvasResize",value:function(e){var t=this;this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach(function(e){t.particlesComputing.windTextures[e].destroy()}),this.particlesRendering.textures.colorTable.destroy(),Object.keys(this.particlesRendering.framebuffers).forEach(function(e){t.particlesRendering.framebuffers[e].destroy()}),this.context=e,this.particlesComputing=new g(this.context,this.data,this.userInput,this.viewerParameters),this.particlesRendering=new y(this.context,this.data,this.userInput,this.viewerParameters,this.particlesComputing)}},{key:"clearFramebuffers",value:function(){var t=this,n=new d.ClearCommand({color:new d.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:d.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach(function(e){n.framebuffer=t.particlesRendering.framebuffers[e],n.execute(t.context)})}},{key:"refreshParticles",value:function(e){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.userInput,this.viewerParameters),e){var t=this.particlesRendering.createSegmentsGeometry(this.userInput);this.particlesRendering.primitives.segments.geometry=t;var n=d.VertexArray.fromGeometry({context:this.context,geometry:t,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:d.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=n}}},{key:"applyUserInput",value:function(t){var n=this,e=!1;this.userInput.maxParticles!=t.maxParticles&&(e=!0),Object.keys(t).forEach(function(e){n.userInput[e]=t[e]}),this.refreshParticles(e)}},{key:"applyViewerParameters",value:function(t){var n=this;Object.keys(t).forEach(function(e){n.viewerParameters[e]=t[e]}),this.refreshParticles(!1)}}]),r}(),w=function(){function r(e,t,n){var i=this;a(this,r),t.debug&&(n.viewer.useDefaultRenderLoop=!1),this.viewer=n.viewer,this.scene=this.viewer.scene,this.camera=this.viewer.camera,this.panel=e,this.viewerParameters={lonRange:new d.Cartesian2,latRange:new d.Cartesian2,pixelSize:0},this.globeBoundingSphere=new d.BoundingSphere(d.Cartesian3.ZERO,6314355.63),this.updateViewerParameters(),o.loadData().then(function(e){i.particleSystem=new _(i.scene.context,e,i.panel.getUserInput(),i.viewerParameters),i.addPrimitives(),i.setupEventListeners(),t.debug&&i.debug()}),this.imageryLayers=this.viewer.imageryLayers,this.setGlobeLayer(this.panel.getUserInput())}return s(r,[{key:"addPrimitives",value:function(){this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.getWind),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.updateSpeed),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.updatePosition),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.postProcessingPosition),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.postProcessingSpeed),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.segments),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.trails),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.screen)}},{key:"updateViewerParameters",value:function(){var e=this.camera.computeViewRectangle(this.scene.globe.ellipsoid),t=p.viewRectangleToLonLatRange(e);this.viewerParameters.lonRange.x=t.lon.min,this.viewerParameters.lonRange.y=t.lon.max,this.viewerParameters.latRange.x=t.lat.min,this.viewerParameters.latRange.y=t.lat.max;var n=this.camera.getPixelSize(this.globeBoundingSphere,this.scene.drawingBufferWidth,this.scene.drawingBufferHeight);0<n&&(this.viewerParameters.pixelSize=n)}},{key:"setGlobeLayer",value:function(e){this.viewer.imageryLayers.removeAll(),this.viewer.terrainProvider=new d.EllipsoidTerrainProvider;var t=e.globeLayer;switch(t.type){case"NaturalEarthII":this.viewer.imageryLayers.addImageryProvider(d.createTileMapServiceImageryProvider({url:d.buildModuleUrl("Assets/Textures/NaturalEarthII")}));break;case"WMS":this.viewer.imageryLayers.addImageryProvider(new d.WebMapServiceImageryProvider({url:e.WMS_URL,layers:t.layer,parameters:{ColorScaleRange:t.ColorScaleRange}}));break;case"WorldTerrain":this.viewer.imageryLayers.addImageryProvider(d.createWorldImagery()),this.viewer.terrainProvider=d.createWorldTerrain()}}},{key:"setupEventListeners",value:function(){var e=this;this.camera.moveStart.addEventListener(function(){e.scene.primitives.show=!1}),this.camera.moveEnd.addEventListener(function(){e.updateViewerParameters(),e.particleSystem.applyViewerParameters(e.viewerParameters),e.scene.primitives.show=!0});var t=!1;window.addEventListener("resize",function(){t=!0,e.scene.primitives.show=!1,e.scene.primitives.removeAll()}),this.scene.preRender.addEventListener(function(){t&&(e.particleSystem.canvasResize(e.scene.context),t=!1,e.addPrimitives(),e.scene.primitives.show=!0)}),window.addEventListener("particleSystemOptionsChanged",function(){e.particleSystem.applyUserInput(e.panel.getUserInput())}),window.addEventListener("layerOptionsChanged",function(){e.setGlobeLayer(e.panel.getUserInput())})}},{key:"debug",value:function(){var t=this,e=new SPECTOR.Spector;e.displayUI(),e.spyCanvases(),function e(){t.viewer.resize(),t.viewer.render(),requestAnimationFrame(e)}()}}]),r}();r.Wind3D=w;var x=d.defaultValue(x,!1),b={dataDirectory:x?"https://raw.githubusercontent.com/RaymanNg/3D-Wind-Field/master/data/":n.selfPath+"img/3DWind/",dataFile:"demo.nc",glslDirectory:x?"../Cesium-3D-Wind/glsl/":n.selfPath+"img/3DWind/"},P=16384,C=100,T=.996,k=.003,E=.01,M=4,S=4,L=[{name:"NaturalEarthII",type:"NaturalEarthII"},{name:"WMS:Rainfall",type:"WMS",layer:"Precipitable_water_entire_atmosphere_single_layer",ColorScaleRange:"0.1,66.8"},{name:"WMS:Air Pressure",type:"WMS",layer:"Pressure_surface",ColorScaleRange:"51640,103500"},{name:"WMS:Temperature",type:"WMS",layer:"Temperature_surface",ColorScaleRange:"204.1,317.5"},{name:"WMS:Wind Speed",type:"WMS",layer:"Wind_speed_gust_surface",ColorScaleRange:"0.1095,35.31"},{name:"WorldTerrain",type:"WorldTerrain"}],A={globeLayer:L[0],WMS_URL:"https://www.ncei.noaa.gov/thredds/wms/gfs-004-files/201809/20180916/gfs_4_20180916_0000_000.grb2"},I=function(){function e(){a(this,e),this.maxParticles=P,this.particleHeight=C,this.fadeOpacity=T,this.dropRate=k,this.dropRateBump=E,this.speedFactor=M,this.lineWidth=S,this.globeLayer=A.globeLayer,this.WMS_URL=A.WMS_URL;var n=[];L.forEach(function(e){n.push(e.name)}),this.layerToShow=n[0];function i(){var e=new CustomEvent("particleSystemOptionsChanged");window.dispatchEvent(e)}function r(){for(var e=0;e<L.length;e++)if(o.layerToShow==L[e].name){o.globeLayer=L[e];break}var t=new CustomEvent("layerOptionsChanged");window.dispatchEvent(t)}var o=this;window.onload=function(){var e=new dat.GUI({autoPlace:!1});e.add(o,"maxParticles",1,65536,1).onFinishChange(i),e.add(o,"particleHeight",1,1e4,1).onFinishChange(i),e.add(o,"fadeOpacity",.9,.999,.001).onFinishChange(i),e.add(o,"dropRate",0,.1).onFinishChange(i),e.add(o,"dropRateBump",0,.2).onFinishChange(i),e.add(o,"speedFactor",.5,100).onFinishChange(i),e.add(o,"lineWidth",.01,16).onFinishChange(i),e.add(o,"layerToShow",n).onFinishChange(r);var t=document.getElementsByClassName("cesium-widget").item(0);e.domElement.classList.add("myPanel"),t.appendChild(e.domElement)}}return s(e,[{key:"getUserInput",value:function(){var e=Math.ceil(Math.sqrt(this.maxParticles));return this.maxParticles=e*e,{particlesTextureSize:e,maxParticles:this.maxParticles,particleHeight:this.particleHeight,fadeOpacity:this.fadeOpacity,dropRate:this.dropRate,dropRateBump:this.dropRateBump,speedFactor:this.speedFactor,lineWidth:this.lineWidth,globeLayer:this.globeLayer,WMS_URL:this.WMS_URL}}}]),e}();r.Panel=I,e.Cesium3DWind=r}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),D=Cesium,(I=ye)._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs,I.color={fromCssColor:function(e,t){return t=t||1,e?D.Color.fromCssColorString(e).withAlpha(t):new Error("color is null")},fromRgba:function(e,t,n,i){return e&&t&&n&&i?D.Color.fromBytes(e,t,n,255*i):new Error("rgba cannot be empty")}},function(e,t){function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function G(e){return(G="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}var r={};!function o(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,o,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){r.min=e("./node_modules/lodash/min"),r.max=e("./node_modules/lodash/max"),r.sortBy=e("./node_modules/lodash/sortBy")},{"./node_modules/lodash/max":135,"./node_modules/lodash/min":137,"./node_modules/lodash/sortBy":139}],2:[function(e,t,n){var i=e("./_getNative")(e("./_root"),"DataView");t.exports=i},{"./_getNative":67,"./_root":105}],3:[function(e,t,n){var i=e("./_hashClear"),r=e("./_hashDelete"),o=e("./_hashGet"),a=e("./_hashHas"),s=e("./_hashSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_hashClear":73,"./_hashDelete":74,"./_hashGet":75,"./_hashHas":76,"./_hashSet":77}],4:[function(e,t,n){var i=e("./_listCacheClear"),r=e("./_listCacheDelete"),o=e("./_listCacheGet"),a=e("./_listCacheHas"),s=e("./_listCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_listCacheClear":86,"./_listCacheDelete":87,"./_listCacheGet":88,"./_listCacheHas":89,"./_listCacheSet":90}],5:[function(e,t,n){var i=e("./_getNative")(e("./_root"),"Map");t.exports=i},{"./_getNative":67,"./_root":105}],6:[function(e,t,n){var i=e("./_mapCacheClear"),r=e("./_mapCacheDelete"),o=e("./_mapCacheGet"),a=e("./_mapCacheHas"),s=e("./_mapCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_mapCacheClear":91,"./_mapCacheDelete":92,"./_mapCacheGet":93,"./_mapCacheHas":94,"./_mapCacheSet":95}],7:[function(e,t,n){var i=e("./_getNative")(e("./_root"),"Promise");t.exports=i},{"./_getNative":67,"./_root":105}],8:[function(e,t,n){var i=e("./_getNative")(e("./_root"),"Set");t.exports=i},{"./_getNative":67,"./_root":105}],9:[function(e,t,n){var i=e("./_MapCache"),r=e("./_setCacheAdd"),o=e("./_setCacheHas");function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,t.exports=a},{"./_MapCache":6,"./_setCacheAdd":106,"./_setCacheHas":107}],10:[function(e,t,n){var i=e("./_ListCache"),r=e("./_stackClear"),o=e("./_stackDelete"),a=e("./_stackGet"),s=e("./_stackHas"),l=e("./_stackSet");function c(e){var t=this.__data__=new i(e);this.size=t.size}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},{"./_ListCache":4,"./_stackClear":111,"./_stackDelete":112,"./_stackGet":113,"./_stackHas":114,"./_stackSet":115}],11:[function(e,t,n){var i=e("./_root").Symbol;t.exports=i},{"./_root":105}],12:[function(e,t,n){var i=e("./_root").Uint8Array;t.exports=i},{"./_root":105}],13:[function(e,t,n){var i=e("./_getNative")(e("./_root"),"WeakMap");t.exports=i},{"./_getNative":67,"./_root":105}],14:[function(e,t,n){t.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},{}],15:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}},{}],16:[function(e,t,n){var u=e("./_baseTimes"),f=e("./isArguments"),p=e("./isArray"),d=e("./isBuffer"),h=e("./_isIndex"),v=e("./isTypedArray"),m=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=p(e),i=!n&&f(e),r=!n&&!i&&d(e),o=!n&&!i&&!r&&v(e),a=n||i||r||o,s=a?u(e.length,String):[],l=s.length;for(var c in e)!t&&!m.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||h(c,l))||s.push(c);return s}},{"./_baseTimes":49,"./_isIndex":79,"./isArguments":124,"./isArray":125,"./isBuffer":127,"./isTypedArray":133}],17:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},{}],18:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},{}],19:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}},{}],20:[function(e,t,n){var i=e("./eq");t.exports=function(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},{"./eq":120}],21:[function(e,t,n){var i=e("./_baseForOwn"),r=e("./_createBaseEach")(i);t.exports=r},{"./_baseForOwn":25,"./_createBaseEach":57}],22:[function(e,t,n){var c=e("./isSymbol");t.exports=function(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],a=t(o);if(null!=a&&(void 0===s?a==a&&!c(a):n(a,s)))var s=a,l=o}return l}},{"./isSymbol":132}],23:[function(e,t,n){var c=e("./_arrayPush"),u=e("./_isFlattenable");t.exports=function e(t,n,i,r,o){var a=-1,s=t.length;for(i=i||u,o=o||[];++a<s;){var l=t[a];0<n&&i(l)?1<n?e(l,n-1,i,r,o):c(o,l):r||(o[o.length]=l)}return o}},{"./_arrayPush":18,"./_isFlattenable":78}],24:[function(e,t,n){var i=e("./_createBaseFor")();t.exports=i},{"./_createBaseFor":58}],25:[function(e,t,n){var i=e("./_baseFor"),r=e("./keys");t.exports=function(e,t){return e&&i(e,t,r)}},{"./_baseFor":24,"./keys":134}],26:[function(e,t,n){var r=e("./_castPath"),o=e("./_toKey");t.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},{"./_castPath":53,"./_toKey":117}],27:[function(e,t,n){var r=e("./_arrayPush"),o=e("./isArray");t.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},{"./_arrayPush":18,"./isArray":125}],28:[function(e,t,n){var i=e("./_Symbol"),r=e("./_getRawTag"),o=e("./_objectToString"),a=i?i.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):o(e)}},{"./_Symbol":11,"./_getRawTag":68,"./_objectToString":102}],29:[function(e,t,n){t.exports=function(e,t){return t<e}},{}],30:[function(e,t,n){t.exports=function(e,t){return null!=e&&t in Object(e)}},{}],31:[function(e,t,n){var i=e("./_baseGetTag"),r=e("./isObjectLike");t.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},{"./_baseGetTag":28,"./isObjectLike":131}],32:[function(e,t,n){var a=e("./_baseIsEqualDeep"),s=e("./isObjectLike");t.exports=function e(t,n,i,r,o){return t===n||(null==t||null==n||!s(t)&&!s(n)?t!=t&&n!=n:a(t,n,i,r,e,o))}},{"./_baseIsEqualDeep":33,"./isObjectLike":131}],33:[function(e,t,n){var v=e("./_Stack"),m=e("./_equalArrays"),g=e("./_equalByTag"),y=e("./_equalObjects"),_=e("./_getTag"),w=e("./isArray"),x=e("./isBuffer"),b=e("./isTypedArray"),P="[object Arguments]",C="[object Array]",T="[object Object]",k=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,i,r,o){var a=w(e),s=w(t),l=a?C:_(e),c=s?C:_(t),u=(l=l==P?T:l)==T,f=(c=c==P?T:c)==T,p=l==c;if(p&&x(e)){if(!x(t))return!1;u=!(a=!0)}if(p&&!u)return o=o||new v,a||b(e)?m(e,t,n,i,r,o):g(e,t,l,n,i,r,o);if(!(1&n)){var d=u&&k.call(e,"__wrapped__"),h=f&&k.call(t,"__wrapped__");if(d||h)return r(d?e.value():e,h?t.value():t,n,i,o=o||new v)}return p&&(o=o||new v,y(e,t,n,i,r,o))}},{"./_Stack":10,"./_equalArrays":60,"./_equalByTag":61,"./_equalObjects":62,"./_getTag":70,"./isArray":125,"./isBuffer":127,"./isTypedArray":133}],34:[function(e,t,n){var d=e("./_Stack"),h=e("./_baseIsEqual");t.exports=function(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=Object(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var l=(s=n[r])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var f=new d;if(i)var p=i(c,u,l,e,t,f);if(!(void 0===p?h(u,c,3,i,f):p))return!1}}return!0}},{"./_Stack":10,"./_baseIsEqual":32}],35:[function(e,t,n){var i=e("./isFunction"),r=e("./_isMasked"),o=e("./isObject"),a=e("./_toSource"),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,f=c.hasOwnProperty,p=RegExp("^"+u.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!o(e)||r(e))&&(i(e)?p:s).test(a(e))}},{"./_isMasked":83,"./_toSource":118,"./isFunction":128,"./isObject":130}],36:[function(e,t,n){var i=e("./_baseGetTag"),r=e("./isLength"),o=e("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(e){return o(e)&&r(e.length)&&!!a[i(e)]}},{"./_baseGetTag":28,"./isLength":129,"./isObjectLike":131}],37:[function(e,t,n){var i=e("./_baseMatches"),r=e("./_baseMatchesProperty"),o=e("./identity"),a=e("./isArray"),s=e("./property");t.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==G(e)?a(e)?r(e[0],e[1]):i(e):s(e)}},{"./_baseMatches":41,"./_baseMatchesProperty":42,"./identity":123,"./isArray":125,"./property":138}],38:[function(e,t,n){var i=e("./_isPrototype"),r=e("./_nativeKeys"),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},{"./_isPrototype":84,"./_nativeKeys":100}],39:[function(e,t,n){t.exports=function(e,t){return e<t}},{}],40:[function(e,t,n){var a=e("./_baseEach"),s=e("./isArrayLike");t.exports=function(e,i){var r=-1,o=s(e)?Array(e.length):[];return a(e,function(e,t,n){o[++r]=i(e,t,n)}),o}},{"./_baseEach":21,"./isArrayLike":126}],41:[function(e,t,n){var i=e("./_baseIsMatch"),r=e("./_getMatchData"),o=e("./_matchesStrictComparable");t.exports=function(t){var n=r(t);return 1==n.length&&n[0][2]?o(n[0][0],n[0][1]):function(e){return e===t||i(e,t,n)}}},{"./_baseIsMatch":34,"./_getMatchData":66,"./_matchesStrictComparable":97}],42:[function(e,t,n){var r=e("./_baseIsEqual"),o=e("./get"),a=e("./hasIn"),s=e("./_isKey"),l=e("./_isStrictComparable"),c=e("./_matchesStrictComparable"),u=e("./_toKey");t.exports=function(n,i){return s(n)&&l(i)?c(u(n),i):function(e){var t=o(e,n);return void 0===t&&t===i?a(e,n):r(i,t,3)}}},{"./_baseIsEqual":32,"./_isKey":81,"./_isStrictComparable":85,"./_matchesStrictComparable":97,"./_toKey":117,"./get":121,"./hasIn":122}],43:[function(e,t,n){var o=e("./_arrayMap"),a=e("./_baseIteratee"),s=e("./_baseMap"),l=e("./_baseSortBy"),c=e("./_baseUnary"),u=e("./_compareMultiple"),f=e("./identity");t.exports=function(e,i,n){var r=-1;i=o(i.length?i:[f],c(a));var t=s(e,function(t,e,n){return{criteria:o(i,function(e){return e(t)}),index:++r,value:t}});return l(t,function(e,t){return u(e,t,n)})}},{"./_arrayMap":17,"./_baseIteratee":37,"./_baseMap":40,"./_baseSortBy":48,"./_baseUnary":51,"./_compareMultiple":55,"./identity":123}],44:[function(e,t,n){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},{}],45:[function(e,t,n){var i=e("./_baseGet");t.exports=function(t){return function(e){return i(e,t)}}},{"./_baseGet":26}],46:[function(e,t,n){var i=e("./identity"),r=e("./_overRest"),o=e("./_setToString");t.exports=function(e,t){return o(r(e,t,i),e+"")}},{"./_overRest":104,"./_setToString":109,"./identity":123}],47:[function(e,t,n){var i=e("./constant"),r=e("./_defineProperty"),o=e("./identity"),a=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:o;t.exports=a},{"./_defineProperty":59,"./constant":119,"./identity":123}],48:[function(e,t,n){t.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},{}],49:[function(e,t,n){t.exports=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},{}],50:[function(e,t,n){var i=e("./_Symbol"),r=e("./_arrayMap"),o=e("./isArray"),a=e("./isSymbol"),s=1/0,l=i?i.prototype:void 0,c=l?l.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(o(t))return r(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},{"./_Symbol":11,"./_arrayMap":17,"./isArray":125,"./isSymbol":132}],51:[function(e,t,n){t.exports=function(t){return function(e){return t(e)}}},{}],52:[function(e,t,n){t.exports=function(e,t){return e.has(t)}},{}],53:[function(e,t,n){var i=e("./isArray"),r=e("./_isKey"),o=e("./_stringToPath"),a=e("./toString");t.exports=function(e,t){return i(e)?e:r(e,t)?[e]:o(a(e))}},{"./_isKey":81,"./_stringToPath":116,"./isArray":125,"./toString":142}],54:[function(e,t,n){var u=e("./isSymbol");t.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,r=e==e,o=u(e),a=void 0!==t,s=null===t,l=t==t,c=u(t);if(!s&&!c&&!o&&t<e||o&&a&&l&&!s&&!c||i&&a&&l||!n&&l||!r)return 1;if(!i&&!o&&!c&&e<t||c&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!l)return-1}return 0}},{"./isSymbol":132}],55:[function(e,t,n){var c=e("./_compareAscending");t.exports=function(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;++i<a;){var l=c(r[i],o[i]);if(l)return s<=i?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}},{"./_compareAscending":54}],56:[function(e,t,n){var i=e("./_root")["__core-js_shared__"];t.exports=i},{"./_root":105}],57:[function(e,t,n){var s=e("./isArrayLike");t.exports=function(o,a){return function(e,t){if(null==e)return e;if(!s(e))return o(e,t);for(var n=e.length,i=a?n:-1,r=Object(e);(a?i--:++i<n)&&!1!==t(r[i],i,r););return e}}},{"./isArrayLike":126}],58:[function(e,t,n){t.exports=function(l){return function(e,t,n){for(var i=-1,r=Object(e),o=n(e),a=o.length;a--;){var s=o[l?a:++i];if(!1===t(r[s],s,r))break}return e}}},{}],59:[function(e,t,n){var i=e("./_getNative"),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=r},{"./_getNative":67}],60:[function(e,t,n){var m=e("./_SetCache"),g=e("./_arraySome"),y=e("./_cacheHas");t.exports=function(e,t,n,i,r,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&s<l))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,f=!0,p=2&n?new m:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var d=e[u],h=t[u];if(i)var v=a?i(h,d,u,t,e,o):i(d,h,u,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!g(t,function(e,t){if(!y(p,t)&&(d===e||r(d,e,n,i,o)))return p.push(t)})){f=!1;break}}else if(d!==h&&!r(d,h,n,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}},{"./_SetCache":9,"./_arraySome":19,"./_cacheHas":52}],61:[function(e,t,n){var i=e("./_Symbol"),f=e("./_Uint8Array"),p=e("./eq"),d=e("./_equalArrays"),h=e("./_mapToArray"),v=e("./_setToArray"),r=i?i.prototype:void 0,m=r?r.valueOf:void 0;t.exports=function(e,t,n,i,r,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new f(e),new f(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=h;case"[object Set]":var l=1&i;if(s=s||v,e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;i|=2,a.set(e,t);var u=d(s(e),s(t),i,r,o,a);return a.delete(e),u;case"[object Symbol]":if(m)return m.call(e)==m.call(t)}return!1}},{"./_Symbol":11,"./_Uint8Array":12,"./_equalArrays":60,"./_mapToArray":96,"./_setToArray":108,"./eq":120}],62:[function(e,t,n){var _=e("./_getAllKeys"),w=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,i,r,o){var a=1&n,s=_(e),l=s.length;if(l!=_(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:w.call(t,u)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var d=a;++c<l;){var h=e[u=s[c]],v=t[u];if(i)var m=a?i(v,h,u,t,e,o):i(h,v,u,e,t,o);if(!(void 0===m?h===v||r(h,v,n,i,o):m)){p=!1;break}d=d||"constructor"==u}if(p&&!d){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(e),o.delete(t),p}},{"./_getAllKeys":64}],63:[function(e,n,t){(function(e){var t="object"==G(e)&&e&&e.Object===Object&&e;n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(e,t,n){var i=e("./_baseGetAllKeys"),r=e("./_getSymbols"),o=e("./keys");t.exports=function(e){return i(e,o,r)}},{"./_baseGetAllKeys":27,"./_getSymbols":69,"./keys":134}],65:[function(e,t,n){var i=e("./_isKeyable");t.exports=function(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},{"./_isKeyable":82}],66:[function(e,t,n){var o=e("./_isStrictComparable"),a=e("./keys");t.exports=function(e){for(var t=a(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,o(r)]}return t}},{"./_isStrictComparable":85,"./keys":134}],67:[function(e,t,n){var i=e("./_baseIsNative"),r=e("./_getValue");t.exports=function(e,t){var n=r(e,t);return i(n)?n:void 0}},{"./_baseIsNative":35,"./_getValue":71}],68:[function(e,t,n){var i=e("./_Symbol"),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;t.exports=function(e){var t=o.call(e,s),n=e[s];try{var i=!(e[s]=void 0)}catch(e){}var r=a.call(e);return i&&(t?e[s]=n:delete e[s]),r}},{"./_Symbol":11}],69:[function(e,t,n){var i=e("./_arrayFilter"),r=e("./stubArray"),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),i(a(t),function(e){return o.call(t,e)}))}:r;t.exports=s},{"./_arrayFilter":15,"./stubArray":140}],70:[function(e,t,n){var i=e("./_DataView"),r=e("./_Map"),o=e("./_Promise"),a=e("./_Set"),s=e("./_WeakMap"),l=e("./_baseGetTag"),c=e("./_toSource"),u="[object Map]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",h="[object DataView]",v=c(i),m=c(r),g=c(o),y=c(a),_=c(s),w=l;(i&&w(new i(new ArrayBuffer(1)))!=h||r&&w(new r)!=u||o&&w(o.resolve())!=f||a&&w(new a)!=p||s&&w(new s)!=d)&&(w=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case v:return h;case m:return u;case g:return f;case y:return p;case _:return d}return t}),t.exports=w},{"./_DataView":2,"./_Map":5,"./_Promise":7,"./_Set":8,"./_WeakMap":13,"./_baseGetTag":28,"./_toSource":118}],71:[function(e,t,n){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],72:[function(e,t,n){var s=e("./_castPath"),l=e("./isArguments"),c=e("./isArray"),u=e("./_isIndex"),f=e("./isLength"),p=e("./_toKey");t.exports=function(e,t,n){for(var i=-1,r=(t=s(t,e)).length,o=!1;++i<r;){var a=p(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&f(r)&&u(a,r)&&(c(e)||l(e))}},{"./_castPath":53,"./_isIndex":79,"./_toKey":117,"./isArguments":124,"./isArray":125,"./isLength":129}],73:[function(e,t,n){var i=e("./_nativeCreate");t.exports=function(){this.__data__=i?i(null):{},this.size=0}},{"./_nativeCreate":99}],74:[function(e,t,n){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],75:[function(e,t,n){var i=e("./_nativeCreate"),r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},{"./_nativeCreate":99}],76:[function(e,t,n){var i=e("./_nativeCreate"),r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:r.call(t,e)}},{"./_nativeCreate":99}],77:[function(e,t,n){var i=e("./_nativeCreate");t.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":99}],78:[function(e,t,n){var i=e("./_Symbol"),r=e("./isArguments"),o=e("./isArray"),a=i?i.isConcatSpreadable:void 0;t.exports=function(e){return o(e)||r(e)||!!(a&&e&&e[a])}},{"./_Symbol":11,"./isArguments":124,"./isArray":125}],79:[function(e,t,n){var i=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=G(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&-1<e&&e%1==0&&e<t}},{}],80:[function(e,t,n){var r=e("./eq"),o=e("./isArrayLike"),a=e("./_isIndex"),s=e("./isObject");t.exports=function(e,t,n){if(!s(n))return!1;var i=G(t);return!!("number"==i?o(n)&&a(t,n.length):"string"==i&&t in n)&&r(n[t],e)}},{"./_isIndex":79,"./eq":120,"./isArrayLike":126,"./isObject":130}],81:[function(e,t,n){var i=e("./isArray"),r=e("./isSymbol"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(e,t){if(i(e))return!1;var n=G(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},{"./isArray":125,"./isSymbol":132}],82:[function(e,t,n){t.exports=function(e){var t=G(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],83:[function(e,t,n){var i,r=e("./_coreJsData"),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(e){return!!o&&o in e}},{"./_coreJsData":56}],84:[function(e,t,n){var i=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}},{}],85:[function(e,t,n){var i=e("./isObject");t.exports=function(e){return e==e&&!i(e)}},{"./isObject":130}],86:[function(e,t,n){t.exports=function(){this.__data__=[],this.size=0}},{}],87:[function(e,t,n){var i=e("./_assocIndexOf"),r=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():r.call(t,n,1),--this.size,!0)}},{"./_assocIndexOf":20}],88:[function(e,t,n){var i=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},{"./_assocIndexOf":20}],89:[function(e,t,n){var i=e("./_assocIndexOf");t.exports=function(e){return-1<i(this.__data__,e)}},{"./_assocIndexOf":20}],90:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},{"./_assocIndexOf":20}],91:[function(e,t,n){var i=e("./_Hash"),r=e("./_ListCache"),o=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},{"./_Hash":3,"./_ListCache":4,"./_Map":5}],92:[function(e,t,n){var i=e("./_getMapData");t.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":65}],93:[function(e,t,n){var i=e("./_getMapData");t.exports=function(e){return i(this,e).get(e)}},{"./_getMapData":65}],94:[function(e,t,n){var i=e("./_getMapData");t.exports=function(e){return i(this,e).has(e)}},{"./_getMapData":65}],95:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},{"./_getMapData":65}],96:[function(e,t,n){t.exports=function(e){var n=-1,i=Array(e.size);return e.forEach(function(e,t){i[++n]=[t,e]}),i}},{}],97:[function(e,t,n){t.exports=function(t,n){return function(e){return null!=e&&(e[t]===n&&(void 0!==n||t in Object(e)))}}},{}],98:[function(e,t,n){var i=e("./memoize");t.exports=function(e){var t=i(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},{"./memoize":136}],99:[function(e,t,n){var i=e("./_getNative")(Object,"create");t.exports=i},{"./_getNative":67}],100:[function(e,t,n){var i=e("./_overArg")(Object.keys,Object);t.exports=i},{"./_overArg":103}],101:[function(e,t,n){var i=e("./_freeGlobal"),r="object"==G(n)&&n&&!n.nodeType&&n,o=r&&"object"==G(t)&&t&&!t.nodeType&&t,a=o&&o.exports===r&&i.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s},{"./_freeGlobal":63}],102:[function(e,t,n){var i=Object.prototype.toString;t.exports=function(e){return i.call(e)}},{}],103:[function(e,t,n){t.exports=function(t,n){return function(e){return t(n(e))}}},{}],104:[function(e,t,n){var l=e("./_apply"),c=Math.max;t.exports=function(o,a,s){return a=c(void 0===a?o.length-1:a,0),function(){for(var e=arguments,t=-1,n=c(e.length-a,0),i=Array(n);++t<n;)i[t]=e[a+t];t=-1;for(var r=Array(a+1);++t<a;)r[t]=e[t];return r[a]=s(i),l(o,this,r)}}},{"./_apply":14}],105:[function(e,t,n){var i=e("./_freeGlobal"),r="object"==("undefined"==typeof self?"undefined":G(self))&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},{"./_freeGlobal":63}],106:[function(e,t,n){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},{}],107:[function(e,t,n){t.exports=function(e){return this.__data__.has(e)}},{}],108:[function(e,t,n){t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},{}],109:[function(e,t,n){var i=e("./_baseSetToString"),r=e("./_shortOut")(i);t.exports=r},{"./_baseSetToString":47,"./_shortOut":110}],110:[function(e,t,n){var o=Date.now;t.exports=function(n){var i=0,r=0;return function(){var e=o(),t=16-(e-r);if(r=e,0<t){if(800<=++i)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}},{}],111:[function(e,t,n){var i=e("./_ListCache");t.exports=function(){this.__data__=new i,this.size=0}},{"./_ListCache":4}],112:[function(e,t,n){t.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},{}],113:[function(e,t,n){t.exports=function(e){return this.__data__.get(e)}},{}],114:[function(e,t,n){t.exports=function(e){return this.__data__.has(e)}},{}],115:[function(e,t,n){var r=e("./_ListCache"),o=e("./_Map"),a=e("./_MapCache");t.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},{"./_ListCache":4,"./_Map":5,"./_MapCache":6}],116:[function(e,t,n){var i=e("./_memoizeCapped"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=i(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(o,function(e,t,n,i){r.push(n?i.replace(a,"$1"):t||e)}),r});t.exports=r},{"./_memoizeCapped":98}],117:[function(e,t,n){var i=e("./isSymbol");t.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},{"./isSymbol":132}],118:[function(e,t,n){var i=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],119:[function(e,t,n){t.exports=function(e){return function(){return e}}},{}],120:[function(e,t,n){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],121:[function(e,t,n){var r=e("./_baseGet");t.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},{"./_baseGet":26}],122:[function(e,t,n){var i=e("./_baseHasIn"),r=e("./_hasPath");t.exports=function(e,t){return null!=e&&r(e,t,i)}},{"./_baseHasIn":30,"./_hasPath":72}],123:[function(e,t,n){t.exports=function(e){return e}},{}],124:[function(e,t,n){var i=e("./_baseIsArguments"),r=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=l},{"./_baseIsArguments":31,"./isObjectLike":131}],125:[function(e,t,n){var i=Array.isArray;t.exports=i},{}],126:[function(e,t,n){var i=e("./isFunction"),r=e("./isLength");t.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},{"./isFunction":128,"./isLength":129}],127:[function(e,t,n){var i=e("./_root"),r=e("./stubFalse"),o="object"==G(n)&&n&&!n.nodeType&&n,a=o&&"object"==G(t)&&t&&!t.nodeType&&t,s=a&&a.exports===o?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||r;t.exports=l},{"./_root":105,"./stubFalse":141}],128:[function(e,t,n){var i=e("./_baseGetTag"),r=e("./isObject");t.exports=function(e){if(!r(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":28,"./isObject":130}],129:[function(e,t,n){t.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},{}],130:[function(e,t,n){t.exports=function(e){var t=G(e);return null!=e&&("object"==t||"function"==t)}},{}],131:[function(e,t,n){t.exports=function(e){return null!=e&&"object"==G(e)}},{}],132:[function(e,t,n){var i=e("./_baseGetTag"),r=e("./isObjectLike");t.exports=function(e){return"symbol"==G(e)||r(e)&&"[object Symbol]"==i(e)}},{"./_baseGetTag":28,"./isObjectLike":131}],133:[function(e,t,n){var i=e("./_baseIsTypedArray"),r=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,s=a?r(a):i;t.exports=s},{"./_baseIsTypedArray":36,"./_baseUnary":51,"./_nodeUtil":101}],134:[function(e,t,n){var i=e("./_arrayLikeKeys"),r=e("./_baseKeys"),o=e("./isArrayLike");t.exports=function(e){return o(e)?i(e):r(e)}},{"./_arrayLikeKeys":16,"./_baseKeys":38,"./isArrayLike":126}],135:[function(e,t,n){var i=e("./_baseExtremum"),r=e("./_baseGt"),o=e("./identity");t.exports=function(e){return e&&e.length?i(e,o,r):void 0}},{"./_baseExtremum":22,"./_baseGt":29,"./identity":123}],136:[function(e,t,n){var i=e("./_MapCache"),s="Expected a function";function l(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError(s);function a(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var i=r.apply(this,e);return a.cache=n.set(t,i)||n,i}return a.cache=new(l.Cache||i),a}l.Cache=i,t.exports=l},{"./_MapCache":6}],137:[function(e,t,n){var i=e("./_baseExtremum"),r=e("./_baseLt"),o=e("./identity");t.exports=function(e){return e&&e.length?i(e,o,r):void 0}},{"./_baseExtremum":22,"./_baseLt":39,"./identity":123}],138:[function(e,t,n){var i=e("./_baseProperty"),r=e("./_basePropertyDeep"),o=e("./_isKey"),a=e("./_toKey");t.exports=function(e){return o(e)?i(a(e)):r(e)}},{"./_baseProperty":44,"./_basePropertyDeep":45,"./_isKey":81,"./_toKey":117}],139:[function(e,t,n){var i=e("./_baseFlatten"),r=e("./_baseOrderBy"),o=e("./_baseRest"),a=e("./_isIterateeCall"),s=o(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&a(e,t[0],t[1])?t=[]:2<n&&a(t[0],t[1],t[2])&&(t=[t[0]]),r(e,i(t,1),[])});t.exports=s},{"./_baseFlatten":23,"./_baseOrderBy":43,"./_baseRest":46,"./_isIterateeCall":80}],140:[function(e,t,n){t.exports=function(){return[]}},{}],141:[function(e,t,n){t.exports=function(){return!1}},{}],142:[function(e,t,n){var i=e("./_baseToString");t.exports=function(e){return null==e?"":i(e)}},{"./_baseToString":50}]},{},[1]);var N=r.min,O=r.max,E=r.sortBy,M=function(e){return E(e)[Math.floor(e.length/2)]},s=.5*Math.PI,S=!1,L=.25,A=function(e,t){return{x:e%t,y:Math.floor(e/t)}},I=function(e,t){return e.x+e.y*t},D=function(i,r,o){function e(e,t){var n={x:o.x+e,y:o.y+t};return i[I(n,r)]}var t=Math.floor(.2*r),n=e(t,0)-e(-t,0),a=e(0,t)-e(0,-t);return Math.atan2(a,n)+s};function V(e){var t=e.canvas,n=e.values,i=e.maskSamples,r=e.majorContour,o=e.minorContour,a=e.fontSize,s=e.formatLabel,l=e.shouldRenderContourLabel,c=e.textColor,u=e.textOutlineColor,f=t.width,p=(M(n),Math.sqrt(n.length)),d=Math.round(M(n)/r)*r,h=n.map(function(e,t){return{value:e,index:t}}).filter(function(e){return function(e){var t=e.x,n=e.y;return p*L<t&&t<p*(1-L)&&p*L<n&&n<p*(1-L)}(A(e.index,p))}),v=h.map(function(e){return e.value}),m=N(v),g=O(v);if(d<m||g<d||!l(d))return t;var y=E(h,function(e){return Math.abs(e.value-d)})[0];if(Math.abs(y.value-d)>.5*o)return t;var _=A(y.index,p),w=_.x*f/p,x=_.y*f/p,b=Math.sqrt(i.length),P={x:Math.round(_.x*b/p),y:Math.round(_.y*b/p)};if(i[I(P,b)]<.9)return t;var C=D(n,p,_),T=t.getContext("2d");S&&(T.strokeStyle=u.toCssColorString(),T.lineWidth=1,T.strokeRect(1,1,f-1,f-1));var k=s(d);return T.font="bold ".concat(a,"px Arial"),T.textAlign="center",T.textBaseline="middle",T.translate(w,x),T.rotate(C),T.lineWidth=3,T.strokeStyle=u.toCssColorString(),T.strokeText(k,0,0),T.fillStyle=c.toCssColorString(),T.fillText(k,0,0),S&&(T.beginPath(),T.arc(0,0,3,0,2*Math.PI,!1),T.fillStyle="red",T.fill()),t}function l(e,t){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(t);console.error("*** Error compiling shader '".concat(t,"':").concat(n))}}function o(e,t,n){return e*(1-n)+t*n}var g="precision mediump float;\n// our texture\nuniform sampler2D u_image;\nuniform sampler2D u_mask;\nuniform vec2 u_textureSize;\nuniform vec2 u_tileDimension;\nuniform float u_zFactor;\nuniform float u_zenith;\nuniform float u_azimuth;\nuniform float u_majorContour;\nuniform float u_minorContour;\nuniform float u_hillshadeAmount;\nuniform float u_gradientAmount;\nuniform float u_contourAmount;\nuniform float u_useSlope;\nuniform vec4 u_contourColor;\n// external GRADIENT_STOP_COUNT\nuniform vec4 u_gradientColors[GRADIENT_STOP_COUNT];\nuniform float u_gradientValues[GRADIENT_STOP_COUNT];\nvarying vec2 v_texCoord;\nuniform vec2 u_tileElevationRange;\n#define M_PI 3.1415926535897932384626433832795\n#define CONTOUR_MAJOR_OPACITY 1.0\n#define CONTOUR_MINOR_OPACITY 0.3\nvec3 light = vec3(255., 231., 177.) / vec3(255.);\nvec3 shade = vec3(3., 152., 255.) / vec3(255.);\nvec2 cellsize = u_tileDimension / u_textureSize;\nfloat colourToElevation(vec4 col){\n    float range = u_tileElevationRange.y - u_tileElevationRange.x;\n    return mix(u_tileElevationRange.x, u_tileElevationRange.y, col.r) + range * col.g / 255.;\n}\nfloat getElevation(vec2 coord){\n    vec4 col = texture2D(u_image, coord);\n    return colourToElevation(col);\n}\nfloat calcSlope(float a, float b, float c, float d, float e, float f, float g, float h, float i) {\n    float dzdx = ((c + 2.0 * f + i) - (a + 2.0 * d + g)) / (8.0 * cellsize.x);\n    float dzdy = ((g + 2.0 * h + i) - (a + 2.0 * b + c)) / (8.0 * cellsize.y);\n    return atan(sqrt(dzdx * dzdx + dzdy * dzdy)) * 180. / M_PI;\n}\nfloat calcHillshade(float a, float b, float c, float d, float e, float f, float g, float h, float i){\n    // http://edndoc.esri.com/arcobjects/9.2/net/shared/geoprocessing/spatial_analyst_tools/how_hillshade_works.htm\n    float dzdx = ((c + 2.0 * f + i) - (a + 2.0 * d + g)) / (8.0 * cellsize.x);\n    float dzdy = ((g + 2.0 * h + i) - (a + 2.0 * b + c)) / (8.0 * cellsize.y);\n    float slope = atan(u_zFactor * sqrt(dzdx * dzdx + dzdy * dzdy));\n    float aspect = atan(dzdy, -dzdx);\n    if(aspect < 0.0){\n        aspect = aspect +  2.0 * M_PI;\n    }\n    float hillshade = ((cos(u_zenith) * cos(slope)) + (sin(u_zenith) * sin(slope) * cos(u_azimuth - aspect)));\n    return clamp(hillshade, 0., 1.);\n}\nfloat linstep(float edge0, float edge1, float x){\n    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\nfloat detectEdge(float x, float a, float b){\n    return float(x > min(a,b) && x < max(a,b));\n}\nfloat calcDistance(float x, float a, float b, float c, float d, float e){\n    float s0 = (c - b) * 0.5;\n    float s1 = (e - d) * 0.5;\n    float s = (abs(s0) + abs(s1)) * 0.5;\n    return abs((x-a) / s);\n}\nfloat calcContour(float minor, float major, float a, float b, float c, float d, float e, float f, float g, float h, float i){\n    float x = floor(e * (1.0 / minor) + 0.5) * minor; // nearest contour\n    float isMajor = float(mod(x, major) < 0.01);\n    float isMinor = (1.0 - isMajor);\n    // a b c\n    // d e f\n    // g h i\n    float dist = calcDistance(x, e, d, f, b, h);\n    float result = linstep(2.0, 0.5, dist);\n    result *= CONTOUR_MAJOR_OPACITY * isMajor + CONTOUR_MINOR_OPACITY * isMinor;\n    return clamp(result, 0., 1.);\n}\nvec3 applyTint(float hillshade) {\n    return mix(shade, light, hillshade) * hillshade * 1.2;\n}\nvec3 applyGamma(vec3 col){\n    return clamp(pow(col, vec3(0.8)), vec3(0.), vec3(1.));\n}\n// Useful for debugging\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvec4 calcGradientColour(float e){\n    if(e <= u_gradientValues[0]){\n        return u_gradientColors[0];\n    }\n    for(int i = 1; i < GRADIENT_STOP_COUNT; ++i){\n        if(e <= u_gradientValues[i]){\n            float a = (e - u_gradientValues[i-1]) / (u_gradientValues[i] - u_gradientValues[i-1]);\n            return mix(u_gradientColors[i-1], u_gradientColors[i], a);\n        }\n    }\n    return u_gradientColors[GRADIENT_STOP_COUNT-1];\n}\nvoid main() {\n    vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n    vec4 maskColour = texture2D(u_mask, v_texCoord);\n    float maskValue = maskColour.a;\n    float a = getElevation(v_texCoord + onePixel * vec2(-1.0, -1.0));\n    float b = getElevation(v_texCoord + onePixel * vec2( 0.0, -1.0));\n    float c = getElevation(v_texCoord + onePixel * vec2( 1.0, -1.0));\n    float d = getElevation(v_texCoord + onePixel * vec2(-1.0,  0.0));\n    float e = getElevation(v_texCoord + onePixel * vec2( 0.0,  0.0));\n    float f = getElevation(v_texCoord + onePixel * vec2( 1.0,  0.0));\n    float g = getElevation(v_texCoord + onePixel * vec2(-1.0,  1.0));\n    float h = getElevation(v_texCoord + onePixel * vec2( 0.0,  1.0));\n    float i = getElevation(v_texCoord + onePixel * vec2( 1.0,  1.0));\n    float hillshade = mix(1., calcHillshade(a, b, c, d, e, f, g, h, i), u_hillshadeAmount);\n    vec3 colourHillshade = applyTint(hillshade);\n    float slope = calcSlope(a, b, c, d, e, f, g, h, i);\n    vec4 gradientColor = calcGradientColour(u_useSlope > 0.5 ? slope : e);\n    float contourAmount = gradientColor.a > CONTOUR_OPACITY_THRESHOLD ? u_contourAmount : 0.;\n    float contour = contourAmount * calcContour(u_minorContour, u_majorContour, a, b, c, d, e, f, g, h, i);\n    vec4 litColour = gradientColor * vec4(colourHillshade, 1.0) * u_gradientAmount;\n    vec4 unmaskedColour = mix(litColour, u_contourColor, contour);\n    vec4 clampedColour = clamp(unmaskedColour, vec4(0.0), vec4(unmaskedColour.a));\n    gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), clampedColour, maskValue);\n}\n",y={},Z=function(){function m(e){var t=e.width,n=e.height,i=e.gradientStops,r=e.gradientAmount,o=e.hillshadeAmount,a=e.contourAmount,s=e.majorContour,l=e.minorContour,c=e.contourOpacityThreshold,u=e.useSlope,f=e.contourColor;W(this,m);var p=function(e,t){var n=JSON.stringify({width:e,height:t});if(!y[n]){var i=document.createElement("canvas");i.width=e,i.height=t;var r=i.getContext("webgl")||i.getContext("experimental-webgl");y[n]={canvas:i,gl:r}}return y[n]}(t,n),d=p.canvas,h=p.gl;if(this.canvasElement=d,this.gl=h,!this.gl)throw Error("Failed to get WebGL context");this.gradientStops=i;var v=g.replace(/GRADIENT_STOP_COUNT/g,this.gradientStops.length.toString()).replace(/CONTOUR_OPACITY_THRESHOLD/g,c.toString());this.program=_(this.gl,"attribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec2 u_resolution;\nvarying vec2 v_texCoord;\nvoid main() {\n   // convert the rectangle from pixels to 0.0 to 1.0\n   vec2 zeroToOne = a_position / u_resolution;\n   // convert from 0->1 to 0->2\n   vec2 zeroToTwo = zeroToOne * 2.0;\n   // convert from 0->2 to -1->+1 (clipspace)\n   vec2 clipSpace = zeroToTwo - 1.0;\n   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n   // pass the texCoord to the fragment shader\n   // The GPU will interpolate this value between points.\n   v_texCoord = a_texCoord;\n}\n",v),this.hillshadeAmount=o,this.gradientAmount=r,this.contourAmount=a,this.majorContour=s,this.minorContour=l,this.useSlope=u,this.contourColor=f}return n(m,[{key:"render",value:function(e,t,n,i,r){var s=this.gl,l=this.program,o=this.canvasElement,a=this.gradientStops,c=this.majorContour,u=this.minorContour,f=this.gradientAmount,p=this.contourAmount,d=this.contourColor,h=new ArrayBuffer(t.length),v=new Uint8Array(h);t.forEach(function(e,t){v[t]=255*e});var m=new ArrayBuffer(4*e.length),g=new Uint8Array(m),y=N(e),_=O(e),w=_-y;e.forEach(function(e,t){var n=255*(w<.001?0:(e-y)/(_-y)),i=255*(n-Math.floor(n));g[4*t]=n,g[4*t+1]=i,g[4*t+2]=.5+n,g[4*t+3]=.75+n}),s.useProgram(l);var x=s.getAttribLocation(l,"a_position"),b=s.getAttribLocation(l,"a_texCoord"),P=.5/(n-1),C=P,T=1-P,k=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,k),s.bufferData(s.ARRAY_BUFFER,new Float32Array([C,C,T,C,C,T,C,T,T,C,T,T]),s.STATIC_DRAW),s.enableVertexAttribArray(b),s.vertexAttribPointer(b,2,s.FLOAT,!1,0,0);var E=s.createTexture();s.bindTexture(s.TEXTURE_2D,E),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,n,n,0,s.RGBA,s.UNSIGNED_BYTE,g);var M=s.createTexture();s.bindTexture(s.TEXTURE_2D,M),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,i,i,0,s.ALPHA,s.UNSIGNED_BYTE,v);function S(e,t,n,i,r){var o=arguments.length-1,a=s.getUniformLocation(l,arguments.length<=0?void 0:e);switch(o){case 1:s.uniform1f(a,arguments.length<=1?void 0:t);break;case 2:s.uniform2f(a,arguments.length<=1?void 0:t,arguments.length<=2?void 0:n);break;case 3:s.uniform3f(a,arguments.length<=1?void 0:t,arguments.length<=2?void 0:n,arguments.length<=3?void 0:i);break;case 4:s.uniform4f(a,arguments.length<=1?void 0:t,arguments.length<=2?void 0:n,arguments.length<=3?void 0:i,arguments.length<=4?void 0:r);break;default:throw new Error("unsupported uniform")}}S("u_resolution",o.width,o.height),S("u_tileElevationRange",y,_),S("u_textureSize",o.width,o.height),S("u_tileDimension",r.x,r.y),S("u_zFactor",.75),S("u_zenith",.7857142857),S("u_azimuth",2.3571428571),S("u_majorContour",c),S("u_minorContour",u),S("u_hillshadeAmount",this.hillshadeAmount),S("u_gradientAmount",f),S("u_contourAmount",p),S("u_useSlope",this.useSlope),S("u_contourColor",d.red,d.green,d.blue,d.alpha);var L=[];a.forEach(function(e){var t=e.color,n=t.red,i=t.green,r=t.blue,o=t.alpha;L.push(n*o),L.push(i*o),L.push(r*o),L.push(o)});var A=a.map(function(e){return e.value}),I=s.getUniformLocation(l,"u_gradientColors");s.uniform4fv(I,new Float32Array(L));var D=s.getUniformLocation(l,"u_gradientValues");s.uniform1fv(D,new Float32Array(A));var R=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,R),s.enableVertexAttribArray(x),s.vertexAttribPointer(x,2,s.FLOAT,!1,0,0);var F=s.getUniformLocation(l,"u_image"),z=s.getUniformLocation(l,"u_mask");return s.uniform1i(F,0),s.uniform1i(z,1),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,E),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,M),j(s,0,0,o.width,o.height),s.drawArrays(s.TRIANGLES,0,6),H(o)}}]),m}(),H=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},_=function(e,t,n){var i=e.createProgram(),r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t),e.compileShader(r),l(e,r),e.attachShader(i,r);var o=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(o,n),e.compileShader(o),l(e,o),e.attachShader(i,o),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;var a=e.getProgramInfoLog(i);return console.error("Error in program linking:".concat(a)),e.deleteProgram(i),null},j=function(e,t,n,i,r){var o=t,a=t+i,s=n,l=n+r;e.bufferData(e.ARRAY_BUFFER,new Float32Array([o,s,a,s,o,l,o,l,a,s,a,l]),e.STATIC_DRAW)},u=t.Cartographic,X=t.Color,Y=t.Credit,c=t.EllipsoidGeodesic,K=t.Event,$=t.WebMercatorTilingScheme,q=t.Rectangle,J=t.when,Q=function(e,t,n){return new X(o(e.red,t.red,n),o(e.green,t.green,n),o(e.blue,t.blue,n),o(e.alpha,t.alpha,n))};var a=function(){function U(e){var P=this,t=e.valueSampler,n=e.maskSampler,i=e.tilingScheme,r=e.ellipsoid,o=e.providerCache,a=e.contourColor,s=void 0===a?X.WHITE:a,l=e.textOutlineColor,c=void 0===l?X.BLACK.withAlpha(.5):l,u=e.tileSize,f=void 0===u?256:u,p=e.gridSize,d=void 0===p?65:p,h=e.minimumTileLevel,v=void 0===h?13:h,m=e.contourAmount,g=void 0===m?1:m,y=e.gradientAmount,_=void 0===y?1:y,w=e.majorContour,x=void 0===w?10:w,b=e.minorContour,C=void 0===b?1:b,T=e.credit,k=void 0===T?"© Propeller Aerobotics":T,E=e.extent,M=e.gradient,S=e.fontSize,L=void 0===S?16:S,A=e.hillshadeAmount,I=void 0===A?1:A,D=e.formatContourLabel,R=void 0===D?function(e){return"".concat(e," m")}:D,F=e.useSlope,z=void 0===F?0:F,N=e.readyPromise,O=void 0===N?J.resolve():N,H=e.linearUnitFactor,j=void 0===H?1:H;W(this,U),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"requestImage",function(e,t,n){function i(e){return function(e,t){if(t<=e[0].value)return e[0].color;for(var n=1;n<e.length;++n)if(t<=e[n].value){var i=(t-e[n-1].value)/(e[n].value-e[n-1].value);return Q(e[n-1].color,e[n].color,i)}return e[e.length-1].color}(P.gradientStops,e).alpha}function o(e){return!!r||.05<i(e)}var a=P.gridSize,s=P.maskSize,l=P.minorContour,c=P.majorContour,u=P.fontSize,f=P.formatContourLabel,p=P.contourAmount,r=P.useSlope,d=P.linearUnitFactor;if(n<P.minimumTileLevel)return P.blankCanvasPromise;var h=P.tilingScheme.tileXYToRectangle(e,t,n);if(P.extent&&!q.intersection(h,P.extent))return P.blankCanvasPromise;function v(e){var t=B(e,2),n=t[0],i=t[1],r=P.tileRenderer.render(i,n,a,s,m);return.01<p?V({canvas:r,values:i,maskSamples:n,majorContour:c,minorContour:l,fontSize:u,formatLabel:f,shouldRenderContourLabel:o,textColor:P.contourColor,textOutlineColor:P.textOutlineColor}):r}var m=te(h,d),g="".concat(e,":").concat(t,":").concat(n),y=P.cache&&P.cache.has(g)?P.cache.get(g):null;if(y)return J.resolve(v(y));var _,w=ee(h,a,a),x=J(P.valueSampler(w,n));if(P.maskSampler){var b=ee(h,s,s);_=J(P.maskSampler(b,n))}else _=J.resolve(Array(s*s).fill(1));return J.all([_,x]).then(function(e){return P.cache&&P.cache.set(g,e),e}).then(v).otherwise(function(){return P.blankCanvasPromise})}),this.valueSampler=t,this.maskSampler=n,this.cache=o,this.tilingScheme=i||new $({ellipsoid:r}),this.contourColor=s,this.textOutlineColor=c,this.errorEvent=new K,this.tileSize=f,this.maskSize=f,this.gridSize=d,this.fontSize=L,this.minimumTileLevel=v,this.gradientAmount=_,this.contourAmount=g,this.majorContour=x,this.minorContour=C,this.formatContourLabel=R,this.gradientStops=M,this.useSlope=z,this.linearUnitFactor=j,this.credit=G("string"===k)?new Y(k):k,this.tileRenderer=new Z({width:this.tileSize,height:this.tileSize,gradientStops:M,gradientAmount:_,hillshadeAmount:I,contourAmount:g,majorContour:x,minorContour:C,contourOpacityThreshold:.05,useSlope:z,contourColor:s}),this.blankCanvasPromise=J.resolve(ne(this.tileSize)),this.readyPromise=O,this.extent=E,this._ready=!1,this.readyPromise.then(function(){P._ready=!0})}return n(U,[{key:"getTileCredits",value:function(){return this.credit}},{key:"pickFeatures",value:function(){}},{key:"tileWidth",get:function(){return this.tileSize}},{key:"tileHeight",get:function(){return this.tileSize}},{key:"maximumLevel",get:function(){}},{key:"minimumLevel",get:function(){}},{key:"rectangle",get:function(){return this.tilingScheme.rectangle}},{key:"tileDiscardPolicy",get:function(){}},{key:"ready",get:function(){return this._ready}},{key:"hasAlphaChannel",get:function(){return!0}}]),U}(),ee=function(e,t,n){for(var i=t*n,r=new Array(i),o=0;o<i;++o){var a=o%t/(t-1),s=1-Math.floor(o/t)/(n-1),l=(1-a)*e.west+a*e.east,c=(1-s)*e.south+s*e.north;r[o]=new u(l,c)}return r},te=function(e,t){var n=q.northeast(e),i=q.northwest(e),r=q.southwest(e),o=new c(i,n),a=new c(r,i);return{x:o.surfaceDistance/t,y:a.surfaceDistance/t}},ne=function(e){var t=document.createElement("canvas");return t.width=e,t.height=e,t};e.CesiumElevationGradient=a}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs,Cesium,(R=ye)._kLib.throwErr,F=ye._kLib,z=ye._dataCenter,ye._auxiliary,ye._funcs,N=F.isFunc,z.createObj(function(){this.locationPoint=null,function(e){var t=document.createElement("div");t.id="zt-message",t.innerHTML='<div class="zt-message-warp"><p></p></div>',t.className="zt-message",t.style.zIndex="9999",t.style.display="none",document.getElementById(e.divId).appendChild(t)}(this),this.initParams.geolocation&&(function(e){var t=document.createElement("div");t.innerHTML='<div class="zt-location-but"><svg t="1565062570560" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6537" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><style type="text/css"></style></defs><path d="M511.6 853.3c188.4 0 341.1-152.8 341.1-341.3S700 170.7 511.6 170.7 170.5 323.5 170.5 512s152.7 341.3 341.1 341.3z m424.2-383.9c0.7 0 1.4-0.1 2.1-0.1h43.4c23.5 0 42.6 19.1 42.6 42.7s-19.1 42.7-42.6 42.7h-43.4c-0.7 0-1.4 0-2.1-0.1-20 201.6-180.2 362-381.6 381.9 0 0.7 0.1 1.4 0.1 2.1v42.7c0 23.6-19.1 42.7-42.6 42.7s-42.6-19.1-42.6-42.7v-42.7c0-0.7 0-1.4 0.1-2.1-201.4-20-361.7-180.3-381.6-381.9h-45C19.1 554.7 0 535.6 0 512s19.1-42.7 42.6-42.7H87.3c20-201.6 180.2-361.9 381.6-381.9 0-0.7-0.1-1.4-0.1-2.1V42.7C469 19.1 488 0 511.6 0c23.5 0 42.6 19.1 42.6 42.7v42.7c0 0.7 0 1.4-0.1 2.1 201.5 19.9 361.7 180.3 381.7 381.9z" fill="#ffffff" p-id="6538"></path><path d="M512 512m-170.7 0a170.7 170.7 0 1 0 341.4 0 170.7 170.7 0 1 0-341.4 0Z" fill="#ffffff" p-id="6539"></path></svg></div>',t.className="zt-location",t.style.zIndex="9999",document.getElementById(e.divId).appendChild(t),t.addEventListener("click",function(){new be(e).getCurrentPosition()})}(this),new be(this).getCurrentPosition())}),R.Geolocation=be,function(e,t,n,i,r){function o(e,t){var n=1<arguments.length&&void 0!==t?t:{id:"zt-hawkeye-"+(new Date).getTime()};return a(e,n.id)}i.isFunc;var a=function(t,e){var n=document.createElement("div");n.id=e,n.innerHTML='<div class="zt-hawkeye-div"></div>',n.className="zt-hawkeye",n.style.zIndex="9999",document.getElementById(t.divId).appendChild(n);var i=new ZGLobe.Viewer(e,{baseLayerPicker:!1,animation:!1,geocoder:!1,fullscreenButton:!1,vrButton:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,showRenderLoopErrors:!1,automaticallyTrackDataSourceClocks:!1,orderIndependentTranslucency:!1});return setTimeout(function(){var e=t.viewer.imageryLayers.get(0).imageryProvider;i.viewer.imageryLayers.addImageryProvider(e,1)},1e3),setTimeout(function(){t.viewer.scene.preRender.addEventListener(function(){i.viewer.camera.flyTo({destination:t.viewer.camera.position,orientation:{heading:t.viewer.camera.heading,pitch:t.viewer.camera.pitch,roll:t.viewer.camera.roll},duration:0})})},10),setTimeout(function(){i.viewer.scene.preRender.addEventListener(function(){t.viewer.camera.flyTo({destination:i.viewer.camera.position,orientation:{heading:i.viewer.camera.heading,pitch:i.viewer.camera.pitch,roll:i.viewer.camera.roll},duration:0})})},10),i};r.createObj(function(){this.initParams.hawkeye&&new o(this)}),e.HawkEye=o}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs,O=ye,Cesium,H=ye._kLib.throwErr,j=ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs,U=j.defined,j.isJson,B=j.isNum,j.isString,W=j.isFunc,G=O.Position,O.Route=function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{url:"http://150.129.138.35:19080/ztserver-geoserver"};this._time=6e4,this._returnJson=!0,this.onSeach=function(e,t,n,i,r,o){U(e,G)||H("startPnt.set:","Illegal parameters.","classes\\Route.js",14),U(t,G)||H("endPnt.set:","Illegal parameters.","classes\\Route.js",15),B(i)||H("type.set:","Illegal parameters.","classes\\Route.js",16);var a="startPnt="+e.toWKT2()+"&endPnt="+t.toWKT2()+"&disorderPoints="+n+"&type="+i+"&returnJson="+this._returnJson,s=new XMLHttpRequest,l=!1,c=setTimeout(function(){l=!0,s.abort()},this._time);null!==s&&(s.open("GET",u.url+"/network/findpath?"+a),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(4===s.readyState){if(l)return W(o)&&o(s),void clearTimeout(c);clearTimeout(c),4===s.readyState&&200===s.status&&r(JSON.parse(s.response))}else W(o)&&o(s)},s.send(null))}},O.DrivingRoute=function(){},O.TransitRoute=function(){},O.WalkingRoute=function(){},O.RidingRoute=function(){},function(e,s,t,n,i,r,o){if((0,n.defined)(s)){var a={};(o.particle=a).createSnow=function(e){var n,i=this.viewer.scene,t=i.drawingBufferWidth/100,r=new s.Cartesian2(t,t),o=new s.Cartesian2(2*t,2*t),a=new s.Cartesian3;return n=new s.ParticleSystem({modelMatrix:new s.Matrix4.fromTranslation(i.camera.position),minimumSpeed:-1,maximumSpeed:0,lifetime:15,emitter:new s.SphereEmitter(1e5),startScale:.5,endScale:1,image:e,emissionRate:7e3,startColor:s.Color.WHITE.withAlpha(0),endColor:s.Color.WHITE.withAlpha(1),minimumImageSize:r,maximumImageSize:o,updateCallback:function(e){a=s.Cartesian3.normalize(e.position,a),s.Cartesian3.multiplyByScalar(a,s.Math.randomBetween(-30,-300),a),e.velocity=s.Cartesian3.add(e.velocity,a,e.velocity);var t=s.Cartesian3.distance(i.camera.position,e.position);e.endColor.alpha=1e5<t?0:n.endColor.alpha/(t/1e5+.1)}}),i.fog.density=.001,i.fog.minimumBrightness=.8,i.primitives.add(n),n.show=!1,n},a.createRain=function(e){var n,i=this.viewer.scene,t=i.drawingBufferWidth/80,r=new s.Cartesian2(t,2*t),o=new s.Cartesian3;return n=new s.ParticleSystem({modelMatrix:new s.Matrix4.fromTranslation(i.camera.position),speed:-1,lifetime:15,emitter:new s.SphereEmitter(1e5),startScale:1,endScale:0,image:e,emissionRate:9e3,startColor:new s.Color(.27,.5,.7,0),endColor:new s.Color(.27,.5,.7,.98),imageSize:r,updateCallback:function(e){o=s.Cartesian3.normalize(e.position,o),o=s.Cartesian3.multiplyByScalar(o,-1050,o),e.position=s.Cartesian3.add(e.position,o,e.position);var t=s.Cartesian3.distance(i.camera.position,e.position);e.endColor.alpha=1e5<t?0:n.endColor.alpha/(t/1e5+.1)}}),i.primitives.add(n),i.fog.density=25e-5,i.fog.minimumBrightness=.8,n.show=!1,n},a.deleteParticle=function(e){var t=this.viewer.scene;e&&t.primitives.remove(e)},a.downSnow=function(){var e=this.viewer.scene;return e.skyAtmosphere.hueShift=-.8,e.skyAtmosphere.saturationShift=-.7,e.skyAtmosphere.brightnessShift=-.33,e.fog.density=.001,e.fog.minimumBrightness=.8,new s.PostProcessStage({name:"zt_snow",fragmentShader:"uniform sampler2D colorTexture;\n        varying vec2 v_textureCoordinates;\n        float snow(vec2 uv,float scale){\n            float time = czm_frameNumber / 60.0;\n            float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\n            uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\n            uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\n            p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\n            k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n            return k*w;\n        }\n        void main(void){\n        vec2 resolution = czm_viewport.zw;\n        vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n        vec3 finalColor=vec3(0);\n        float c = 0.0;\n        c+=snow(uv,30.)*.0;\n        c+=snow(uv,20.)*.0;\n        c+=snow(uv,15.)*.0;\n        c+=snow(uv,10.);\n        c+=snow(uv,8.);\n        c+=snow(uv,6.);\n        c+=snow(uv,5.);\n        finalColor=(vec3(c)); \n        gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.5); \n    }"})},a.downRain=function(){var e=this.viewer.scene;return e.skyAtmosphere.hueShift=-.8,e.skyAtmosphere.saturationShift=-.7,e.skyAtmosphere.brightnessShift=-.33,e.fog.density=.001,e.fog.minimumBrightness=.8,new s.PostProcessStage({name:"zt_rain",fragmentShader:"uniform sampler2D colorTexture;\n            varying vec2 v_textureCoordinates;\n\t\t\tfloat hash(float x){\n\t\t\t\treturn fract(sin(x*133.3)*13.13);\n\t\t\t}\n\t\t\tvoid main(void){\n\t\t\t\tfloat time = czm_frameNumber / 60.0;\n\t\t\t    vec2 resolution = czm_viewport.zw;\n                vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n                vec3 c=vec3(.6,.7,.8);\n                float a=-.4;\n                float si=sin(a),co=cos(a);\n                uv*=mat2(co,-si,si,co);\n                uv*=length(uv+vec2(0,4.9))*.3+1.;\n                float v=1.-sin(hash(floor(uv.x*100.))*2.);\n                float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\n                c*=v*b; \n\t\t\t    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), 0.5);  \n\t\t\t}"})}}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,o,t,n,i){var a=n.defined;if(a(o)){var s=[],r=function(e,t,n){if(a(e)&&a(t)){if(a(e,o.Cesium3DTileFeature)){t.name=e.getProperty("name"),t.description='Loading <div class="cesium-infoBox-loading"></div>',(n.viewer.selectedEntity=t).description='<table class="cesium-infoBox-defaultTable"><tbody>',s.splice(0,s.length),e.getPropertyNames(s);for(var i=0,r=s.length;i<r;++i)t.description+="<tr><th>"+s[i]+"</th><td>"+e.getProperty(s[i])+"</td></tr>";t.description+="</tbody></table>"}else t.name="string"==typeof e.name&&0<e.name.length?e.name:e.id._name,t.description=e.description;n.viewer.selectedEntity=t}};i.createObj(function(){this.addEventListener(e.Constants.EventType.Pick,"default",r,0)})}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),Z=Cesium,(V=ye)._kLib.throwErr,X=ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs,Y=X.isJson,K=X.isNum,q=X.intErr,(J=Pe.prototype).constructor=Pe,J.set=function(e){if(!Y(e))throw new q("zEuler.set: Illegal parameters.");K(e.heading)||(e.heading=0),K(e.pitch)||(e.pitch=0),K(e.roll)||(e.roll=0),this.heading=e.heading,this.pitch=e.pitch,this.roll=e.roll,Z.HeadingPitchRoll.fromDegrees(e.heading,e.pitch,e.roll,this.hpr)},V.Euler=Pe,Cesium,ee=(Q=ye)._kLib.throwErr,te=ye._kLib,ne=ye._dataCenter,ye._auxiliary,ie=ye._funcs,re=te.isJson,oe=te.isNum,te.intErr,ae=te.isBool,se=te.isString,le=te.defined,ce=te.isArray,ue=te.isArray,(fe=Ce.prototype).constructor=Ce,fe.set=function(e){re(e)||ee("zPopwindow.set:","Illegal parameters.","classes\\zPopwindow.js",33),le(e.zViewer)||ee("zPopwindow.set","param.zViewer is NULL.","classes\\zPopwindow.js",34),se(e.id)||(e.id="popwindow-"+(new Date).getTime()),oe(e.longitude)||(e.longitude=0),oe(e.latitude)||(e.latitude=0),oe(e.height)||(e.height=0),ae(e.isFollow)||(e.isFollow=!0),ae(e.show)||(e.show=!0),ce(e.offset)||(e.offset=[0,0]),ue(e.close)||(e.close=function(){}),this.id=e.id,this.longitude=e.longitude,this.latitude=e.latitude,this.height=e.height,this.content=e.content,this.show=e.show,this.offset=e.offset,this.isFollow=e.isFollow,this.close=e.close,this.screen=e.zViewer.util.fromMapToScreen(e.longitude,e.latitude,e.height)},fe.showFunc=function(e){this.show=e,this.show?document.getElementById(this.id).style.display="block":document.getElementById(this.id).style.display="none"},ne.createObj(function(){this.popwindowList=[]}),ie.PopwindowCollection={romverPopwindowById:function(e){for(var t=0;t<this.popwindowList.length;t++)this.popwindowList[t].id===e&&this.popwindowList.splice(t,1);var n=document.getElementById(e);n.parentNode.removeChild(n)},addPopwindow:function(a){for(var e=0;e<this.popwindowList.length;e++)if(this.popwindowList[e].id===a.id)return void ee("zPopwindow.addPopwindow","zPopwindow Has been added","classes\\zPopwindow.js",87);var t=document.createElement("div");if(a.setShow,t.innerHTML=a.content+'<div class="zt-popwin-arrow"></div><div class="zt-popwin-close"></div>',t.id=a.id,t.className="zt-popwin",t.style.zIndex="999",a.show?t.style.display="block":t.style.display="none",document.getElementById(this.divId).getElementsByClassName("cesium-viewer")[0].appendChild(t),document.getElementsByClassName("zt-popwin-close")[0].addEventListener("click",function(){a.setShow(!1),a.show=!1,a.close()}),console.log(document.getElementById(a.id).clientWidth,document.getElementById(a.id).offsetWidth),console.log(document.getElementById(a.id).clientHeight,document.getElementById(a.id).offsetHeight),document.getElementById(a.id).style.left=a.screen.x-a.offset[0]-document.getElementById(a.id).offsetWidth/2+"px",document.getElementById(a.id).style.top=a.screen.y-a.offset[1]-document.getElementById(a.id).offsetHeight+"px",a.isFollow){var s=this;this.addEventListener(ZGLobe.Constants.EventType.CameraMove,"zt-earth-popwin",function(e,t,n,i,r,o){a.screen=s.util.fromMapToScreen(a.longitude,a.latitude,a.height),console.log("this.screen CameraMove",a.longitude,a.latitude,a.height,a.screen),document.getElementById(a.id).style.left=a.screen.x-a.offset[0]-document.getElementById(a.id).offsetWidth/2+"px",document.getElementById(a.id).style.top=a.screen.y-a.offset[1]-document.getElementById(a.id).offsetHeight-5+"px"})}return this.popwindowList.push(a),a},romverAll:function(){for(var e=0;e<this.popwindowList.length;e++){var t=document.getElementById(this.popwindowList[e].id);t.parentNode.removeChild(t)}this.popwindowList=[]}},Q.Popwindow=Ce,function(r,o,e,t){var a=t.defined;if(a(o)){var s=t.isNum,l=t.intErr,n=function(e,t){this.x=NaN,this.y=NaN,this.z=NaN,this.longitude=NaN,this.latitude=NaN,this.height=NaN,this.cartesian=new o.Cartesian3(0,0,0),this.cartographic=new o.Cartographic(0,0,0),this.set(e,t),this.toWKT2=function(){return"POINT("+this.longitude+" "+this.latitude+")"},this.toWKT3=function(){return"POINT("+this.longitude+" "+this.latitude+" "+this.height+")"}},i=n.prototype;i.constructor=n,i.set=function(e,t){a(t,o.Ellipsoid)||(t=a(t,r.Viewer)?t.viewer.scene.mapProjection.ellipsoid:o.Ellipsoid.WGS84);var n=this.cartesian,i=this.cartographic;if(s(e.x)&&s(e.y)&&s(e.z))return this.x=e.x,this.y=e.y,this.z=e.z,n.x=e.x,n.y=e.y,n.z=e.z,t.cartesianToCartographic(n,i),this.longitude=180*i.longitude/Math.PI,this.latitude=180*i.latitude/Math.PI,this.height=i.height,!0;if(s(e.longitude)&&s(e.latitude)&&s(e.height))return this.longitude=e.longitude,this.latitude=e.latitude,this.height=e.height,i.longitude=e.longitude*Math.PI/180,i.latitude=e.latitude*Math.PI/180,i.height=e.height,t.cartographicToCartesian(i,n),this.x=n.x,this.y=n.y,this.z=n.z,!0;throw new l("zPosition.set: Illegal parameters.")},r.Position=n}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,g,y,t,n,i,r){var _=t.defined;if(_(g)){var o=t.isJson,w=t.isNum,x=t.compute.matrix4,b=i.getFaMatrix,a=r.simpleGraphic;o(a)||(a={}),a.sphere=function(e,t,n){var i;if(_(e,g.Cartesian3)||_(e,g.Cartographic))i=new x(!0),b(e,this.viewer.scene.mapProjection.ellipsoid,i,!0);else{if(!_(e,x))return y("sphereGeometry: ","参数1不合法","primitiveGraphic\\sphere.js",24),null;i=e}(!w(t)||t<=0)&&y("sphereGeometry: ","参数2不合法","primitiveGraphic\\sphere.js",27),(!w(n)||n<=0)&&y("sphereGeometry: ","参数3不合法","primitiveGraphic\\sphere.js",28);var r,o,a,s,l,c,u=Math.PI/2,f=2*Math.PI,p=Math.ceil(90/n),d=Math.ceil(360/n),h=new Float64Array(p*d*3+6),v=new Uint16Array((p+3)*d+(d+2)*p-1),m=h.length-3;for(h[0]=0,h[1]=0,h[2]=0,h[3]=t,h[4]=0,h[5]=0,r=p;r--;)for(a=u/p*r,l=t*Math.cos(a),c=t*Math.sin(a),o=d;o--;)s=f/d*o,h[m]=c,h[m+1]=l*Math.sin(s),h[m+2]=l*Math.cos(s),m-=3;for(m=0,r=p;r--;){for(c=3+d*r,v[m++]=c,o=d;o--;)v[m++]=c+o;v[m++]=0}for(r=d;r--;){for(v[m++]=2,o=p;o--;)v[m++]=3+d*o+r;v[m++]=1,0!==r&&(v[m++]=0)}return{vertices:h,indices:v,modelMatrix:i}},r.simpleGraphic=a}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i){var r=i.defined,o=i.isFunc,a=i.isNum,s=i._progressBar_,l=i,c=i._base_,u=i.compute.matrix4,f=i.compute._matrix4_,p=i.shaders,d=i.ZWorker,g=(i.d2Set,new u);g.makeIdentity();var y,_,w,x,b,P,C,T,k,h=new d(function(e,t,n,i,r,o){var a=o(i),s=r.Matrix4,l=r.base.defined,c=new s(!0);c.setFromBuffer(t);var u,f,p,d,h=[NaN,NaN,NaN,NaN,NaN,NaN],v=[0,0,0,1],m=e.length;for(d=m-3;0<=d;d-=3)v[0]=e[d],v[1]=e[d+1],v[2]=e[d+2],v[3]=1,c.mvec(v),v[3]=v[0],v[0]=v[1],v[1]=v[2],v[2]=v[3],e[d]=v[0],e[d+1]=v[1],e[d+2]=v[2],(isNaN(h[0])||h[0]>v[0])&&(h[0]=v[0]),(isNaN(h[1])||h[1]>v[1])&&(h[1]=v[1]),(isNaN(h[2])||h[2]>v[2])&&(h[2]=v[2]),(isNaN(h[3])||h[3]<v[0])&&(h[3]=v[0]),(isNaN(h[4])||h[4]<v[1])&&(h[4]=v[1]),(isNaN(h[5])||h[5]<v[2])&&(h[5]=v[2]),a(70*(1-(d+3)/m));for(u=-(h[0]+h[3])/2,f=-(h[1]+h[4])/2,p=-(h[2]+h[5])/2,d=e.length-3;0<=d;d-=3)e[d]+=u,e[d+1]+=f,e[d+2]+=p,a(70+30*(1-(d+3)/m));n.data[0]=e,n.ps[0]=1,n.data[1]=h,n.ps[1]=0,n.data[2]=-u,n.ps[2]=0,n.data[3]=-f,n.ps[3]=0,n.data[4]=-p,n.ps[4]=0;var g=null;if(!l(e,Float32Array)){for(g=new Float32Array(e.length),n.data[0]=g,d=e.length;d--;)g[d]=e[d];n.data[5]=e,n.ps[5]=1}},null,null,["base",c,"",l,"Matrix4",f,"__f.base.defined, __f.base.isNum, __f.base.isArray, __f.base.isFunc",u]),v=new d(function(e,t,n,i,r,o,a,s,l){var c=l(a),u=s.base.defined,f=s.Matrix4,p=null;(u(r,Float64Array)||u(r,Float32Array))&&((p=new f(!0)).setFromBuffer(r),p.inverse(4));var d,h=e.length,v=[0,0,0,1];for(d=e.length-4;0<=d;d-=4)isNaN(e[d])||isNaN(e[d+1])||isNaN(e[d+2])||isNaN(e[d+3])||(v[0]=e[d+2]+i,v[1]=e[d]+t,v[2]=e[d+1]+n,v[3]=1,p&&p.mvec(v),e[d]=v[0],e[d+1]=v[1],e[d+2]=v[2],c(100*(1-(d+4)/h)));o.data[0]=e,o.ps[0]=1},null,null,["base",c,"",l,"Matrix4",f,"__f.base.defined, __f.base.isNum, __f.base.isArray, __f.base.isFunc",u]);e.Viewer.prototype.depthMap=(y=h,_=v,w=r,x=u,b=o,P=a,C=p.ortho,T=s,k=[1],function(c,u,f,p,d,h){if(!w(c,Float64Array)&&!w(c,Float32Array))return!1;if(c.length<3)return!1;if(!w(u,Uint16Array))return!1;if(u.length<3)return!1;if(!w(f,x))return!1;if((!P(p)||p<0||1<=p)&&(p=.05),!b(h))return!1;var v=this._analysisTool.accelerator,m=T(h);return y.do([c,f.getBuffer()],k,function(e,t,n,i,r,o){c=w(o)?o:e,v.setProg(C,!1),v.setVertices(e),v.setIndices(u);var a=t[3]-n,s=t[4]-i,l=t[5]-r;a+=a*p,s+=s*p,l+=l*p,v.setParam([g,2,-a,a,-s,s,-l,l]),v.renderIt(),v.decodeIt(function(e,t){0<=e?m(40+.3*e):_.do([t._bufferPosition,n,i,r,d?void 0:f.getBuffer()],k,function(e){t._bufferPosition=e,h(-1,t),_.getLength()||_.stop()},function(e){m(70+.3*e)})},!0),y.getLength()||y.stop()},function(e){m(.4*e)}),!0})}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,s,n,i,r,o){var a=n.defined;if(a(t)){var l,c,u,d,f,p,h,v,m,g=n.isJson,y=n.isFunc,P=n.isNum,_=n.compute.matrix4,w=n.wgProg,x=n.glFunctions,b=(l=_,c=w,u=a,d=P,f=x.packDepth,p=x.fShaderPrecision,h=x.normalizeDepth,v=x.unPackDepth,(m={}).offScreen=new c({vShaderSource:"precision highp float;\nattribute vec4 aPosition;\nuniform mat4 vpMatrix;\nvarying vec4 orthoDepth;\n"+f+"void main() {\n\tvec4 afPos = vpMatrix * aPosition;\n\tgl_Position = afPos;\n\torthoDepth = packDepth(afPos.z / afPos.w / 2.0 + 0.5, vec4(0.0, 0.0, 0.0, 1.0));\n}\n",fShaderSource:p+"varying vec4 orthoDepth;\n"+h+"void main() {\n\tif(orthoDepth.x > 1.0 || orthoDepth.x < 0.0) discard;\n\tgl_FragColor = normalizeDepth(orthoDepth);\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0];if(!u(o,l))return!1;var a=e.getUniformLocation(t,"vpMatrix");if(!a)return!1;e.uniformMatrix4fv(a,!1,o._matrixArr);var s=e.getAttribLocation(t,"aPosition");if(s<0)return!1;e.vertexAttribPointer(s,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(s)},decodeFunc:function(){}}),m.onScreen=new c({vShaderSource:"precision highp float;\nattribute vec4 aPosition;\nvarying vec2 vTexturePos;\nvoid main() {\n\tgl_Position = aPosition;\n\tgl_Position.z = 0.0;\n\tvTexturePos = vec2(aPosition.x / 2.0 + 0.5, aPosition.y / 2.0 + 0.5);\n}\n",fShaderSource:p+"uniform sampler2D orthoDepth;\nvarying vec2 vTexturePos;\nuniform float xScale;\nuniform float yScale;\nuniform float zScale;\nconst float night = 3.14159265358979324 / 4.0;\n"+v+f+"highp float circleFind(in float xScale, in float yScale, in float zScale, in sampler2D depthMap, in vec2 mapCoordinates) {\n   highp float myDepth = unPackDepth(texture2D(depthMap, mapCoordinates));\n   if(myDepth >= 1.0) return 2.0;\n   highp float largestAng = 0.0;\n   const int divider = 32;\n   highp float alpha;\n   highp vec2 newCoordinates;\n   for(int i = divider; i >= 0; i -= 1) {\n       alpha = 3.14159265358979324 / float(divider) * float(i);\n       newCoordinates.x = mapCoordinates.x + cos(alpha) / xScale;\n       newCoordinates.y = mapCoordinates.y + sin(alpha) / yScale;\n       if(newCoordinates.x <= 0.0 || newCoordinates.x >= 1.0 || newCoordinates.y <= 0.0 || newCoordinates.y >= 1.0) continue;\n       alpha = unPackDepth(texture2D(depthMap, newCoordinates));\n       if(alpha >= 1.0) continue;\n       alpha = atan(abs(myDepth - alpha) * zScale);\n       if(largestAng < alpha) largestAng = alpha;\n   }\n   return largestAng;\n}\nvoid main() {\n   highp float finalAng = circleFind(xScale, yScale, zScale, orthoDepth, vTexturePos);\n   if(2.0 == finalAng) discard;\n   finalAng = finalAng / night;\n\tgl_FragColor = packDepth(finalAng, vec4(0.0, 0.0, 0.0, 1.0));\n   gl_FragColor.a = 1.0;\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0];if(!d(o))return!1;var a=r[1];if(!d(a))return!1;var s=r[2];if(!d(s))return!1;var l=e.getUniformLocation(t,"xScale");if(!l)return!1;e.uniform1f(l,o);var c=e.getUniformLocation(t,"yScale");if(!c)return!1;e.uniform1f(c,a);var u=e.getUniformLocation(t,"zScale");if(!u)return!1;e.uniform1f(u,s);var f=e.getUniformLocation(t,"orthoDepth");if(!f)return!1;e.uniform1i(f,0);var p=e.getAttribLocation(t,"aPosition");if(p<0)return!1;e.vertexAttribPointer(p,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(p),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)},decodeFunc:function(){}}),m),C=function(g,y,i,r,_,o,w){var a=new _(!0);a.rotate(2,90),a.rotate(1,90);var x=new Float32Array([-1,-1,1,-1,1,1,-1,1]),b=new Uint16Array([0,1,2,2,3,0]);return function(f,p,e,t,d,h){var v=this,n="slopeMapCalculator: ";if(!i(f,Float32Array)){if(!i(f,Float64Array))return s(n,"参数1(vertices)不合法","analysis\\slopeMap\\calculator.js",232),!1;f=new Float32Array(f)}if(!i(p,Uint16Array))return s(n,"参数2(indices)不合法","analysis\\slopeMap\\calculator.js",238),!1;if(!i(e,_))return s(n,"参数3(faMatrix)不合法","analysis\\slopeMap\\calculator.js",242),!1;if(!i(t,_))return s(n,"参数4(cameraMatrix)不合法","analysis\\slopeMap\\calculator.js",246),!1;if(!P(d))return s(n,"参数5(slopeR)不合法","analysis\\slopeMap\\calculator.js",250),!1;if(!r(h))return s(n,"参数6(reFunc)不合法","analysis\\slopeMap\\calculator.js",254),!1;var m=new _(!0);return m.setFromBuffer(e.getBuffer()),m.multiply(t),m.multiply(a),m.inverse(4),o(f,m,function(e,t,n,i){if(0<=e)h(e);else{f=t;var r=.05*Math.abs(i[3]-i[0]),o=.05*Math.abs(i[4]-i[1]),a=.05*Math.abs(i[5]-i[2]),s=new _(!0);s.setOrtho(i[0]-r,i[3]+r,i[1]-o,i[4]+o,-i[5]-a,-i[2]+a);var l=new _(!0);l.setFromBuffer(s.getBuffer()),l.multiply(m);var c=v._analysisTool.accelerator;c.setProg(g,!0),c.setVertices(f),c.setIndices(p),c.setParam([l]),c.renderIt(),c.setProg(y,!1),c.setVertices(x,2),c.setIndices(b);var u=d;c.setParam([Math.abs(i[3]-i[0])/u,Math.abs(i[4]-i[1])/u,Math.abs(i[5]-i[2])/u]),c.renderIt(),h(-1,{data:c.toDataUrl(),vpMatrix:l,boxMin:new w(n[0],n[1],n[2]),boxMax:new w(n[3],n[4],n[5]),boxEye:i})}})}}(b.offScreen,b.onScreen,a,y,_,e.getBox,t.Cartesian3),T=o.calculator;g(T)||(T={}),(o.calculator=T).slopeMap=C}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,c,n,i,r,o){var a=n.defined;if(a(t)){var v,m,s,g,l,u,f,p,d,h=n.isJson,y=n.isNum,_=n.isFunc,w=n.compute.matrix4,x=n.wgProg,b=n.glFunctions,P=(v=a,m=y,s=x,g=w,l=b.packDepth,u=b.fShaderPrecision,f=b.normalizeDepth,p=b.unPackDepth,(d={}).offScreen=new s({vShaderSource:"precision highp float;\nattribute vec4 aPosition;\nuniform mat4 vpMatrix;\nvarying vec4 vfDepth;\nuniform float farSubNear;\nuniform float near;\n"+l+"void main() {\n\tvec4 afPos = vpMatrix * aPosition;\n\tfloat realZ = (afPos.w - near) / farSubNear;\n\tafPos.z = (realZ * 2.0 - 1.0) * afPos.w;\n\tgl_Position = afPos;\n\tvfDepth = packDepth(realZ, vec4(0.0, 0.0, 0.0, 1.0));\n}\n",fShaderSource:u+"varying vec4 vfDepth;\n"+f+"void main() {\n\tif(vfDepth.x < 0.0 || vfDepth.x >= 1.0) discard;\n\tgl_FragColor = normalizeDepth(vfDepth);\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0];if(!v(o,g))return!1;var a=r[1];if(!m(a))return!1;var s=r[2];if(!m(s))return!1;var l=e.getUniformLocation(t,"vpMatrix");if(!l)return!1;e.uniformMatrix4fv(l,!1,o._matrixArr);var c=e.getUniformLocation(t,"near");if(!c)return!1;e.uniform1f(c,a);var u=e.getUniformLocation(t,"farSubNear");if(!u)return!1;e.uniform1f(u,s-a);var f=e.getAttribLocation(t,"aPosition");if(f<0)return!1;e.vertexAttribPointer(f,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(f)},decodeFunc:function(){}}),d.onScreen=new s({vShaderSource:"precision highp float;\nattribute vec4 aPosition;\nuniform mat4 vpMatrix;\nuniform mat4 perspMatrix;\nuniform float near;\nuniform float farSubNear;\nvarying vec2 perspPosition;\nvarying vec4 realDepth;\nvarying vec2 orthoPosition;\n"+l+"void main() {\n\tvec4 afPos = vpMatrix * aPosition;\n\torthoPosition = vec2(afPos.x / afPos.w / 2.0 + 0.5, afPos.y / afPos.w / 2.0 + 0.5);\n\tgl_Position = afPos;\n\tvec4 vfPos = perspMatrix * aPosition;\n\tperspPosition = vec2(vfPos.x / vfPos.w / 2.0 + 0.5, vfPos.y / vfPos.w / 2.0 + 0.5);\n\trealDepth = packDepth((vfPos.w - near) / farSubNear, vec4(0.0, 0.0, 0.0, 1.0));\n}\n",fShaderSource:"#ifdef GL_ES\n\t#ifdef GL_FRAGMENT_PRECISION_HIGH\n\t\tprecision highp float;\n\t#else\n\t\tprecision mediump float;\n\t#endif\n#endif\nuniform sampler2D perspDepthMap;\nvarying vec2 orthoPosition;\nvarying vec2 perspPosition;\nvarying vec4 realDepth;\n"+p+"void main() {\n\tif(perspPosition.x <= 0.0 || perspPosition.x >= 1.0 || perspPosition.y <= 0.0 || perspPosition.y >= 1.0 || realDepth.x < 0.0 || realDepth.x > 1.0 || distance(vec2(0.5, 0.5), orthoPosition) >= 0.5) discard;\n\tfloat oDepth = unPackDepth(texture2D(perspDepthMap, perspPosition));\n\tif(2.0 == oDepth) discard;\n\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n\tfloat fRealDepth = unPackDepth(realDepth);\n\tif(fRealDepth <= oDepth + 0.003) gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);\n\treturn;\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0];if(!v(o,g))return!1;var a=r[1];if(!v(a,g))return!1;var s=r[2];if(!m(s))return!1;var l=r[3];if(!m(l))return!1;var c=e.getUniformLocation(t,"vpMatrix");if(!c)return!1;e.uniformMatrix4fv(c,!1,o._matrixArr);var u=e.getUniformLocation(t,"perspMatrix");if(!u)return!1;e.uniformMatrix4fv(u,!1,a._matrixArr);var f=e.getUniformLocation(t,"near");if(!f)return!1;e.uniform1f(f,s);var p=e.getUniformLocation(t,"farSubNear");if(!p)return!1;e.uniform1f(p,l-s);var d=e.getUniformLocation(t,"perspDepthMap");if(!d)return!1;e.uniform1i(d,0);var h=e.getAttribLocation(t,"aPosition");if(h<0)return!1;e.vertexAttribPointer(h,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(h),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)},decodeFunc:function(){}}),d),C=function(w,x,i,r,o,b,a,P){var s=new b(!0),l=new b(!0);s.rotate(2,90),s.rotate(1,180),l.rotate(2,90),l.rotate(1,90);return function(u,f,e,t,p,d,h,v,m){var g=this,n="visualAnalysisCalculator: ";if(!i(u,Float32Array)){if(!i(u,Float64Array))return c(n,"参数1(vertices)不合法","analysis\\visualAnalysis\\calculator.js",231),!1;u=new Float32Array(u)}if(!i(f,Uint16Array))return c(n,"参数2(indices)不合法","analysis\\visualAnalysis\\calculator.js",236),!1;if(!i(e,b))return c(n,"参数3(faMatrix)不合法","analysis\\visualAnalysis\\calculator.js",240),!1;if(!i(t,b))return c(n,"参数4(cameraMatrix)不合法","analysis\\visualAnalysis\\calculator.js",244),!1;if(!r(p))return c(n,"参数5(near)不合法","analysis\\visualAnalysis\\calculator.js",248),!1;if(!r(d))return c(n,"参数6(far)不合法","analysis\\visualAnalysis\\calculator.js",252),!1;if(!r(h))return c(n,"参数7(fov)不合法","analysis\\visualAnalysis\\calculator.js",256),!1;if(!r(v))return c(n,"参数8(aspect)不合法","analysis\\visualAnalysis\\calculator.js",260),!1;if(!o(m))return c(n,"参数9(reFunc)不合法","analysis\\visualAnalysis\\calculator.js",264),!1;var y=new b(!0);y.setFromBuffer(e.getBuffer()),y.multiply(l),y.inverse(4);var _=new b(!0);return _.setFromBuffer(e.getBuffer()),_.multiply(t),_.multiply(s),_.inverse(4),a(u,y,function(e,t,n,i){if(0<=e)m(e);else{u=t;var r=new b(!0);r.setPerspective(h/180*Math.PI,v,p,d),r.multiply(_);var o=0*Math.abs(i[3]-i[0]),a=0*Math.abs(i[4]-i[1]),s=0*Math.abs(i[5]-i[2]),l=new b(!0);l.setOrtho(i[0]-o,i[3]+o,i[1]-a,i[4]+a,-i[5]-s,-i[2]+s),l.multiply(y);var c=g._analysisTool.accelerator;c.setVertices(u),c.setIndices(f),c.setProg(w,!0),c.setParam([r,p,d]),c.renderIt(),c.setProg(x,!1),c.setParam([l,r,p,d]),c.renderIt(),m(-1,{data:c.toDataUrl(),vpMatrix:l,boxMin:new P(n[0],n[1],n[2]),boxMax:new P(n[3],n[4],n[5]),boxEye:i})}})}}(P.offScreen,P.onScreen,a,y,_,w,e.getBox,t.Cartesian3),T=o.calculator;h(T)||(T={}),(o.calculator=T).visualAnalysis=C}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,v,n,i,r,o){var a=n.defined;if(a(t)){var m,g,y,_,w,x,s=n.isJson,l=n.isArray,c=n.isString,u=n.isFunc,f=(n.compute.matrix4,m=a,g=l,y=c,_=u,x=new(w=t).Cartographic(0,0,0),function(e,l,c){var t="easyWaterInundate: ";if(!_(l))return v(t,"参数2(reFunc)不合法","APIS\\analysis\\easyWaterInundate.js",23),!1;if(!g(e)&&!m(e,Float32Array)&&!m(e,Float64Array))return v(t,"参数1(polygonArr)不合法","APIS\\analysis\\easyWaterInundate.js",27),l(null),!1;y(c)||(c="WaterInundate");var n,u=this,i=u.viewer.scene.mapProjection.ellipsoid,f={extrudedHeight:0,entityWater:null,entityFrame:null,minHeight:NaN,maxHeight:NaN,vertices:null},p=[],r=new w.Cartesian3(0,0,0),o=NaN,a=NaN,s=NaN,d=NaN;for(n=e.length-3;0<=n;n-=3)r.x=e[n],r.y=e[n+1],r.z=e[n+2],i.cartesianToCartographic(r,x),(isNaN(o)||x.longitude<o)&&(o=x.longitude),(isNaN(a)||x.longitude>a)&&(a=x.longitude),(isNaN(s)||x.latitude<s)&&(s=x.latitude),(isNaN(d)||x.latitude>d)&&(d=x.latitude),p.unshift(x.height),p.unshift(x.latitude),p.unshift(x.longitude);var h=Math.max((d-s)*i.maximumRadius,(a-o)*i.maximumRadius*Math.cos((d+s)/2))/2;return u.getTerrainTriangles(90*(a+o)/Math.PI,90*(d+s)/Math.PI,0,h,64,null,function(e){var t,n=e.vertices,i=e.matrix;i.inverse(4);var r=NaN,o=NaN,a=[0,0,0,1];for(t=n.length-3;0<=t;t-=3)a[0]=n[t],a[1]=n[t+1],a[2]=n[t+2],a[3]=1,i.mvec(a),(isNaN(r)||a[0]<r)&&(r=a[0]),(isNaN(o)||a[0]>o)&&(o=a[0]);if(f.minHeight=r,f.maxHeight=o,f.extrudedHeight=r,isNaN(r))l(null);else{for(t=p.length-3;0<=t;t-=3)p[t+2]=f.minHeight;f.vertices=w.Cartesian3.fromRadiansArrayHeights(p),f.entityWater=u.viewer.entities.add({name:c+"-Water",polygon:{hierarchy:f.vertices,material:new w.Color.fromBytes(64,157,253,150),perPositionHeight:!0,extrudedHeight:new w.CallbackProperty(function(){return f.extrudedHeight},!1)}}),f.vertices.push(f.vertices[0].clone()),f.entityFrame=u.viewer.entities.add({name:c+"-Frame",polyline:{positions:f.vertices,width:3,clampToGround:!0,material:new w.PolylineGlowMaterialProperty({glowPower:.2,taperPower:.5,color:new w.Color.fromBytes(64,157,253,255)})}});var s=u._pickControl.noSelect;s.push(f.entityWater),s.push(f.entityFrame),l(f)}}),!0}),p=o.analysis;s(p)||(p={}),(o.analysis=p).easyWaterInundate=f}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(_,w,e,t,n,i,r){var o=t.defined;if(o(w)){var a=t.isJson,x=t.isNum,u=t.isFunc,b=t.pointMap,s=r.analysis;a(s)||(s={}),(r.analysis=s).isoHeight=function(a,e,s,l,h){if(!o(a,w.Cartographic))return!1;if(!x(e))return!1;if(!u(h))return!1;x(s)||(s=64),x(l)||(l=100);var v=this,c=NaN,m=NaN,g=-1,y=-1;v.getTerrainTriangles(180*a.longitude/Math.PI,180*a.latitude/Math.PI,a.height,e,s,null,function(u){for(var e=new Float64Array(u.vertices.length/3*4),t=[0,0,0,1],n=u.matrix.clone().inverse(4),i=e.length/4;i--;)t[0]=u.vertices[3*i],t[1]=u.vertices[3*i+1],t[2]=u.vertices[3*i+2],t[3]=1,n.mvec(t),e[4*i]=t[0],e[4*i+1]=t[1],e[4*i+2]=t[2],e[4*i+3]=0,(!x(c)||c>t[0])&&(c=t[0]),(!x(m)||m<t[0])&&(m=t[0]);var r=Math.ceil((c+a.height)/l),f=Math.floor((m+a.height)/l)-r,o=new b(e,s,s),p=[],d=[];!function r(o,a,s,l,c){l<=0?h(-1,p,d):_.calculator.isoHeight(o,a,function(e,t,n){if(0<=e)return y=Math.round(e/f+(f-l)/f*100),void(g!==y&&h(g=y));if(t&&n){var i={vertices:t,indices:n,modelMatrix:u.matrix};d.push(i),l%3==0?(e=function(e){var t=[];return t[0]=e,t[1]=1-e,t[0]>t[1]?(t[1]/=t[0],t[0]=1):(t[0]/=t[1],t[1]=1),t}(l/f),v.visualizer.lineAppearance(3,1,new w.Color(e[1],e[0],0,1),new w.Color(0,0,1,1))):v.visualizer.lineAppearance(1,0,new w.Color(.7,.7,.7,.7),new w.Color(1,1,1,.7)),p.push(v.visualizer.lineObj(i))}r(o,a+s,s,l-1,c)},c)}(o,r*l-a.height,l,f,5)})}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,d,t,n){if((0,n.defined)(d)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,lineMaterial:null,fill:!0,line:!0,lineWidth:2,extrudedHeight:0,radius:1e3,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+a.prototype.dragIcon,this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyBufferLine:function(e,t,n,i){this.positions=e,this.radius=t,this.okHandler=n,this.cancelHandler=i,this._showModifyRegion2Map()},startDrawBufferLine:function(e,t){var o=this;o.okHandler=e,o.cancelHandler=t,o.positions=[];var a=null;o.drawHandler=new d.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(d.defined(t)){var n=o.camera.getPickRay(t);if(d.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(d.defined(i)){0==o.positions.length&&(o.positions.push(i),a=o._createPoint(i,-1),o._showRegion2Map()),o.positions.push(i);var r=o.positions.length-2;o._createPoint(i,r)}}}},d.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(d.defined(t))if(o.positions.length<1)o.tooltip.showAt(t,"<p>选择起点</p>");else{var n="<p>点击添加下一个点</p>";2<o.positions.length&&(n+="<p>右键结束绘制</p>"),o.tooltip.showAt(t,n);var i=o.camera.getPickRay(t);if(d.defined(i)){var r=o.scene.globe.pick(i,o.scene);d.defined(r)&&(a.position.setValue(r),o.positions.pop(),o.positions.push(r))}}},d.ScreenSpaceEventType.MOUSE_MOVE),o.drawHandler.setInputAction(function(e){o.positions.length<3||(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),layer.prompt({title:"请输入缓冲半径（单位km）"},function(e,t,n){layer.close(t),o.radius=1e3*e,o.clear(),o._showModifyRegion2Map()}))},d.ScreenSpaceEventType.RIGHT_CLICK)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new d.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(d.defined(t)){var n=s.camera.getPickRay(t);if(d.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(d.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.tempPositions[r]=i,s.tooltip.setVisible(!1),"mid_anchor"==c.flag&&s._updateModifyAnchors(r)}else{var o=s.scene.pick(t);if(!d.defined(o))return;if(!d.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId)return;if("anchor"!=a.flag&&"mid_anchor"!=a.flag)return;l=!0,"anchor"==(c=a).flag&&s.tooltip.showAt(t,"<p>移动控制点</p>"),"mid_anchor"==a.flag&&s.tooltip.showAt(t,"<p>移动创建新的控制点</p>")}}}},d.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(d.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(d.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(d.defined(i)){var r=c.oid;"anchor"==c.flag?(c.position.setValue(i),s.tempPositions[r]=i,s._updateNewMidAnchors(r)):"mid_anchor"==c.flag&&(c.position.setValue(i),s.tempPositions[r]=i)}}}}},d.ScreenSpaceEventType.MOUSE_MOVE)},_showRegion2Map:function(){var e=this;null==e.lineMaterial&&(e.lineMaterial=new d.PolylineDashMaterialProperty({dashLength:16,color:d.Color.fromCssColorString("#00f").withAlpha(.7)}));var t={polyline:{positions:new d.CallbackProperty(function(){return e.positions},!1),clampToGround:!0,width:e.lineWidth||2,material:e.lineMaterial}};e.entity=e.viewer.entities.add(t),e.entity.layerId=e.layerId},_showModifyRegion2Map:function(){var e=this;e._startModify(),e._computeTempPositions(),null==e.material&&(e.material=d.Color.fromCssColorString("#ff0").withAlpha(.5)),null==e.lineMaterial&&(e.lineMaterial=new d.PolylineDashMaterialProperty({dashLength:16,color:d.Color.fromCssColorString("#00f").withAlpha(.7)}));var t=new d.CallbackProperty(function(){return e.tempPositions},!1),n=new d.CallbackProperty(function(){return e.computeBufferLine(e.tempPositions,e.radius||1e3)},!1),i={polygon:new d.PolygonGraphics({hierarchy:n,material:e.material,show:e.fill}),polyline:{positions:t,clampToGround:!0,width:e.lineWidth||2,material:e.lineMaterial,show:e.line}};e.entity=e.viewer.entities.add(i),e.entity.layerId=e.layerId;for(var r=e.tempPositions,o=0;o<r.length;o++){0==o%2?e._createPoint(r[o],o):e._createMidPoint(r[o],o)}},_updateModifyAnchors:function(e){var t=this,n=t.tempPositions.length;if(0!=e&&e!=n-1){var i=t.tempPositions[e],r=t.tempPositions[e-1],o=t.tempPositions[e+1],a=t._computeCenterPotition(r,i),s=t._computeCenterPotition(i,o);t.tempPositions.splice(e,1,a,i,s),t._clearAnchors(t.layerId);for(var l=t.tempPositions,c=0;c<l.length;c++){0==c%2?t._createPoint(l[c],c):t._createMidPoint(l[c],c)}}},_updateNewMidAnchors:function(e){var t=this;if(null!=e&&null!=e){var n=null,i=null,r=null,o=null,a=t.tempPositions.length;o=0==e?(n=a-2,i=a-1,r=e+1,e+2):e==a-2?(n=e-2,i=e-1,r=a-1,0):(n=e-2,i=e-1,r=e+1,e+2);var s=t.tempPositions[n],l=t.tempPositions[e],c=t.tempPositions[o];if(0==e){var u=t._computeCenterPotition(c,l);t.tempPositions[r]=u,t.markers[r].position.setValue(u)}else if(e==a-1){var f=t._computeCenterPotition(s,l);t.tempPositions[i]=f,t.markers[i].position.setValue(f)}else{f=t._computeCenterPotition(s,l),u=t._computeCenterPotition(c,l);t.tempPositions[i]=f,t.tempPositions[r]=u,t.markers[i].position.setValue(f),t.markers[r].position.setValue(u)}}},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new d.ConstantProperty(new d.Cartesian3(0,0,-500)),heightReference:d.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.sid=e.sid,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_createMidPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIcon,eyeOffset:new d.ConstantProperty(new d.Cartesian3(0,0,-500)),heightReference:d.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="mid_anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length;this.tempPositions=[];for(var n=1;n<t;n++){var i=e[n-1],r=e[n];i.sid=n-1,r.sid=n;var o=this._computeCenterPotition(i,r);this.tempPositions.push(i),this.tempPositions.push(o)}var a=e[t-1];this.tempPositions.push(a)},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new d.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var i=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(i.clear(),layer.close(i.toolBarIndex),i.okHandler){for(var e=[],t=0;t<i.tempPositions.length;t+=2){var n=i.tempPositions[t];e.push(n)}i.positions=e,i.okHandler(e,i.radius)}}),t.unbind("click").bind("click",function(){i.clear(),layer.close(i.toolBarIndex),i.cancelHandler&&i.cancelHandler()})},computeBufferLine:function(e,t){for(var n=[],i=e[0],r=e.length,o=0;o<r;o++){var a=this._cartesian2LonLat(e[o]);if(o==r-1&&i==a)break;n.push([a.lon,a.lat])}var s=turf.lineString(n),l=turf.buffer(s,1*t,{units:"meters"}).geometry.coordinates;if(!l||l.length<1)return null;var c=l[0];if(!c||c.length<3)return null;for(var u=[],f=0;f<c.length;f++){a=c[f];var p=d.Cartesian3.fromDegrees(a[0],a[1]);u.push(p)}return u},_cartesian2LonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);return{lon:d.Math.toDegrees(t.longitude),lat:d.Math.toDegrees(t.latitude),alt:Math.ceil(t.height)}},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height};return n.lon=d.Math.toDegrees(n.lon),n.lat=d.Math.toDegrees(n.lat),n},_getLonLats:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=this._getLonLat(i);r.sid=i.sid,r.oid=i.oid,t.push(r)}return t},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"GlobeBufferLineDrawer"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobeBufferLineDrawer=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,d,t,n){if((0,n.defined)(d)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,outlineEntity:null,positions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_center.png",dragIconLight:"img//circle_red.png",material:null,radiusLineMaterial:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:3,extrudedHeight:0,toolBarIndex:null,layerId:"globeEntityDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+a.prototype.dragIcon,this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyCircle:function(e,t,n){this.positions=e,this.okHandler=t,this.cancelHandler=n,this._showModifyRegion2Map(),this._showCircleOutline2Map(),this._startModify()},startDrawCircle:function(e,t){var o=this;o.okHandler=e,o.cancelHandler=t,o.positions=[];var a=null;o.drawHandler=new d.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(d.defined(t)){var n=o.camera.getPickRay(t);if(d.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(d.defined(i)){var r=o.positions.length;0==r&&(o.positions.push(i),o._createCenter(i,0),a=o._createPoint(i,-1),o._showRegion2Map(),o._showCircleOutline2Map()),o.positions.push(i),0<r&&o._createPoint(i,1),1<r&&(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),o._startModify())}}}},d.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(d.defined(t))if(o.positions.length<1)o.tooltip.showAt(t,"<p>选择起点</p>");else{o.tooltip.showAt(t,"<p>选择终点</p>");var n=o.camera.getPickRay(t);if(d.defined(n)){var i=o.scene.globe.pick(n,o.scene);d.defined(i)&&(a.position.setValue(i),o.positions.pop(),o.positions.push(i))}}},d.ScreenSpaceEventType.MOUSE_MOVE)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new d.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(d.defined(t)){var n=s.camera.getPickRay(t);if(d.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(d.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.positions[r]=i,s.tooltip.setVisible(!1)}else{var o=s.scene.pick(t);if(!d.defined(o))return;if(!d.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId||"anchor"!=a.flag)return;c=a,l=!0,s.tooltip.showAt(t,"<p>移动控制点</p>")}}}},d.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(d.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(d.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(d.defined(i)){c.position.setValue(i);var r=c.oid;s.positions[r]=i}}}}},d.ScreenSpaceEventType.MOUSE_MOVE)},_createCenter:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIcon,eyeOffset:new d.ConstantProperty(new d.Cartesian3(0,0,-500)),heightReference:d.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",n},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new d.ConstantProperty(new d.Cartesian3(0,0,-500)),heightReference:d.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",n},_showRegion2Map:function(){var n=this;null==n.material&&(n.material=d.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.radiusLineMaterial&&(n.radiusLineMaterial=new d.PolylineDashMaterialProperty({dashLength:16,color:d.Color.fromCssColorString("#00f").withAlpha(.7)}));var e=new d.CallbackProperty(function(){if(1<n.positions.length){var e=n._computeCircleRadius3D(n.positions);return e=(e/1e3).toFixed(3),n.entity.label.text=e+"km",n._computeCirclePolygon(n.positions)}return null},!1),t=new d.CallbackProperty(function(){return 1<n.positions.length?n.positions:null},!1),i={position:new d.CallbackProperty(function(){if(1<n.positions.length){var e=n.positions[0],t=n.positions[1];return n._computeCenterPotition(e,t)}return null},!1),label:{text:"",font:"14px Helvetica",fillColor:d.Color.SKYBLUE,outlineColor:d.Color.BLACK,outlineWidth:1,style:d.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new d.ConstantProperty(new d.Cartesian3(0,0,-9e3)),pixelOffset:new d.Cartesian2(16,16)},polygon:new d.PolygonGraphics({hierarchy:e,material:n.material,fill:n.fill,outline:n.outline,outlineWidth:n.outlineWidth,outlineColor:n.outlineColor}),polyline:{positions:t,clampToGround:!0,width:2,material:n.radiusLineMaterial}};0<n.extrudedHeight&&(i.polygon.extrudedHeight=n.extrudedHeight,i.polygon.extrudedHeightReference=d.HeightReference.RELATIVE_TO_GROUND,i.polygon.closeTop=!0,i.polygon.closeBottom=!0),n.entity=n.viewer.entities.add(i),n.entity.layerId=n.layerId},_showModifyRegion2Map:function(){var n=this;null==n.material&&(n.material=d.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.radiusLineMaterial&&(n.radiusLineMaterial=new d.PolylineDashMaterialProperty({dashLength:16,color:d.Color.fromCssColorString("#00f").withAlpha(.7)}));var e=new d.CallbackProperty(function(){var e=n._computeCircleRadius3D(n.positions);return e=(e/1e3).toFixed(3),n.entity.label.text=e+"km",n._computeCirclePolygon(n.positions)},!1),t=new d.CallbackProperty(function(){return 1<n.positions.length?n.positions:null},!1),i=new d.CallbackProperty(function(){if(1<n.positions.length){var e=n.positions[0],t=n.positions[1];return n._computeCenterPotition(e,t)}return null},!1),r=n._computeCircleRadius3D(n.positions),o={position:i,label:{text:r=(r/1e3).toFixed(3)+"km",font:"14px Helvetica",fillColor:d.Color.SKYBLUE,outlineColor:d.Color.BLACK,outlineWidth:1,style:d.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new d.ConstantProperty(new d.Cartesian3(0,0,-9e3)),pixelOffset:new d.Cartesian2(16,16)},polygon:new d.PolygonGraphics({hierarchy:e,material:n.material,fill:n.fill,outline:n.outline,outlineWidth:n.outlineWidth,outlineColor:n.outlineColor}),polyline:{positions:t,clampToGround:!0,width:2,material:n.radiusLineMaterial}};0<n.extrudedHeight&&(o.polygon.extrudedHeight=n.extrudedHeight,o.polygon.extrudedHeightReference=d.HeightReference.RELATIVE_TO_GROUND,o.polygon.closeTop=!0,o.polygon.closeBottom=!0),n.entity=n.viewer.entities.add(o),n.entity.layerId=n.layerId,n._createCenter(n.positions[0],0),n._createPoint(n.positions[1],1)},_showCircleOutline2Map:function(){var e=this;null==e.outlineMaterial&&(e.outlineMaterial=new d.PolylineDashMaterialProperty({dashLength:16,color:d.Color.fromCssColorString("#f00").withAlpha(.7)}));var t={polyline:{positions:new d.CallbackProperty(function(){return e._computeCirclePolygon(e.positions)},!1),clampToGround:!0,width:e.outlineWidth,material:e.outlineMaterial}};e.outlineEntity=e.viewer.entities.add(t),e.outlineEntity.layerId=e.layerId},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new d.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_computeCirclePolygon:function(e){try{if(!e||e.length<2)return null;var t=e[0],n=this._computeCircleRadius3D(e);return this._computeCirclePolygon2(t,n)}catch(e){return null}},_computeCirclePolygon2:function(e,t){try{if(!e||t<=0)return null;var n=d.EllipseGeometryLibrary.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:t,rotation:0,granularity:.005},!1,!0);if(!n||!n.outerPositions)return null;var i=d.Cartesian3.unpackArray(n.outerPositions),r=i[0];return i[i.length]=r,i}catch(e){return null}},_computeCirclePolygon3:function(e,t,n,i){try{if(!e||t<=0||n<=0)return null;var r=d.EllipseGeometryLibrary.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:.005},!1,!0);if(!r||!r.outerPositions)return null;var o=d.Cartesian3.unpackArray(r.outerPositions),a=o[0];return o[o.length]=a,o}catch(e){return null}},_computeCirclePolygonForDegree:function(e){for(var t=this.ellipsoid.cartesianToCartographic(e[0]),n=this.ellipsoid.cartesianToCartographic(e[1]),i=t.longitude,r=t.latitude,o=n.longitude,a=n.latitude,s=Math.sqrt(Math.pow(i-o,2)+Math.pow(r-a,2)),l=[],c=0;c<360;c++){var u=i+s*Math.cos(c*Math.PI/180),f=r+s*Math.sin(c*Math.PI/180),p=d.Cartesian3.fromRadians(u,f);l.push(p)}return l},_computeCircleRadius3D:function(e){var t=e[0],n=e[1],i=Math.pow(t.x-n.x,2),r=Math.pow(t.y-n.y,2),o=Math.pow(t.z-n.z,2);return Math.sqrt(i+r+o)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var e=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var t=$("#shapeEditContainer button[name='btnOK']"),n=$("#shapeEditContainer button[name='btnCancel']");t.unbind("click").bind("click",function(){e.clear(),layer.close(e.toolBarIndex),e.okHandler&&e.okHandler(e.positions)}),n.unbind("click").bind("click",function(){e.clear(),layer.close(e.toolBarIndex),e.cancelHandler&&e.cancelHandler()})},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},CLASS_NAME:"GlobeCircleDrawer"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobeCircleDrawer=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,c,t,n){if((0,n.defined)(c)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,position:null,drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,image:"img//circle_red.png",toolBarIndex:null,layerId:"globeEntityDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.image=r+a.prototype.image},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e.entity=null,e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPoint:function(e,t,n){this.position=e,this.okHandler=t,this.cancelHandler=n,this.entity=null,this._createPoint(),this._startModify()},startDrawPoint:function(e,t){var r=this;r.okHandler=e,r.cancelHandler=t,r.entity=null;r.position=null;r.drawHandler=new c.ScreenSpaceEventHandler(r.canvas),r.drawHandler.setInputAction(function(e){var t=e.position;if(c.defined(t)){var n=r.camera.getPickRay(t);if(c.defined(n)){var i=r.scene.globe.pick(n,r.scene);c.defined(i)&&(r.position=i,r.entity.position.setValue(i),r.tooltip.setVisible(!1),r._startModify())}}},c.ScreenSpaceEventType.LEFT_CLICK),r.drawHandler.setInputAction(function(e){var t=e.endPosition;if(c.defined(t)){null==r.position&&r.tooltip.showAt(t,"<p>选择位置</p>");var n=r.camera.getPickRay(t);if(c.defined(n)){var i=r.scene.globe.pick(n,r.scene);c.defined(i)&&(r.position=i,null==r.entity?r._createPoint():r.entity.position.setValue(i))}}},c.ScreenSpaceEventType.MOUSE_MOVE)},_startModify:function(){var a=this,s=!1,l=null;a.drawHandler&&(a.drawHandler.destroy(),a.drawHandler=null),a._showToolBar(),a.modifyHandler=new c.ScreenSpaceEventHandler(a.canvas),a.modifyHandler.setInputAction(function(e){var t=e.position;if(c.defined(t)){var n=a.camera.getPickRay(t);if(c.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(c.defined(i))if(s){s=!1,l.position.setValue(i);l.oid;a.position=i,a.tooltip.setVisible(!1)}else{var r=a.scene.pick(t);if(!c.defined(r))return;if(!c.defined(r.id))return;var o=r.id;if(o.layerId!=a.layerId||"anchor"!=o.flag)return;l=o,s=!0,a.tooltip.showAt(t,"<p>移动位置</p>")}}}},c.ScreenSpaceEventType.LEFT_CLICK),a.modifyHandler.setInputAction(function(e){if(s){var t=e.endPosition;if(c.defined(t)){a.tooltip.showAt(t,"<p>移动位置</p>");var n=a.camera.getPickRay(t);if(c.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(c.defined(i)){l.position.setValue(i);l.oid;a.position=i}}}}},c.ScreenSpaceEventType.MOUSE_MOVE)},_createPoint:function(){var e=this.viewer.entities.add({position:this.position,billboard:{image:this.image,eyeOffset:new c.ConstantProperty(new c.Cartesian3(0,0,-500)),heightReference:c.HeightReference.CLAMP_TO_GROUND}});return e.oid=0,e.layerId=this.layerId,e.flag="anchor",this.entity=e},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var t=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),n=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(t.clear(),layer.close(t.toolBarIndex),t.okHandler){var e=t._getLonLat(t.position);t.okHandler(t.position,e)}}),n.unbind("click").bind("click",function(){t.clear(),layer.close(t.toolBarIndex),t.cancelHandler&&t.cancelHandler()})},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height,height:t.height};return n.lon=c.Math.toDegrees(n.lon),n.lat=c.Math.toDegrees(n.lat),n},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},CLASS_NAME:"GlobePointDrawer"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobePointDrawer=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,c,t,n){if((0,n.defined)(c)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,position:null,drawHandler:null,modifyHandler:null,callback:null,image:"img//circle_red.png",toolBarIndex:null,layerId:"globeEntityDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.image=r+a.prototype.image},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e.entity=null,e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPoint:function(e,t){this.position=e,this.callback=t,this.entity=null,this._createPoint(),this._startModify()},startDrawPoint:function(e){var o=this;o.callback=e,o.entity=null;o.position=null;o.drawHandler=new c.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(c.defined(t)){var n=o.camera.getPickRay(t);if(c.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(c.defined(i)){o.position=i,o.entity.position.setValue(i);var r=o._getMeasureTip(o.position);o.entity.label.text=r,o.tooltip.setVisible(!1),o._startModify()}}}},c.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(c.defined(t)){null==o.position&&o.tooltip.showAt(t,"<p>选择位置</p>");var n=o.camera.getPickRay(t);if(c.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(c.defined(i))if(o.position=i,null==o.entity)o._createPoint();else{o.entity.position.setValue(i);var r=o._getMeasureTip(o.position);o.entity.label.text=r}}}},c.ScreenSpaceEventType.MOUSE_MOVE)},_startModify:function(){var a=this,s=!1,l=null;a.drawHandler&&(a.drawHandler.destroy(),a.drawHandler=null),a._showToolBar(),a.modifyHandler=new c.ScreenSpaceEventHandler(a.canvas),a.modifyHandler.setInputAction(function(e){var t=e.position;if(c.defined(t)){var n=a.camera.getPickRay(t);if(c.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(c.defined(i))if(s){s=!1,l.position.setValue(i);l.oid;a.position=i,a.tooltip.setVisible(!1)}else{var r=a.scene.pick(t);if(!c.defined(r))return;if(!c.defined(r.id))return;var o=r.id;if(o.layerId!=a.layerId||"anchor"!=o.flag)return;l=o,s=!0,a.tooltip.showAt(t,"<p>移动位置</p>")}}}},c.ScreenSpaceEventType.LEFT_CLICK),a.modifyHandler.setInputAction(function(e){if(s){var t=e.endPosition;if(c.defined(t)){a.tooltip.showAt(t,"<p>移动位置</p>");var n=a.camera.getPickRay(t);if(c.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(c.defined(i)){a.position=i,l.position.setValue(i);var r=a._getMeasureTip(a.position);a.entity.label.text=r}}}}},c.ScreenSpaceEventType.MOUSE_MOVE)},_createPoint:function(){var e=this._getMeasureTip(this.position),t=this.viewer.entities.add({position:this.position,label:{text:e,font:'18px "微软雅黑", Arial, Helvetica, sans-serif, Helvetica',fillColor:c.Color.RED,outlineColor:c.Color.SKYBLUE,outlineWidth:1,style:c.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new c.ConstantProperty(new c.Cartesian3(0,0,-9e3)),pixelOffset:new c.Cartesian2(36,36)},billboard:{image:this.image,eyeOffset:new c.ConstantProperty(new c.Cartesian3(0,0,-500)),heightReference:c.HeightReference.CLAMP_TO_GROUND}});return t.oid=0,t.layerId=this.layerId,t.flag="anchor",this.entity=t},_getMeasureTip:function(e){var t=this._getLonLat(e);return t.alt?t.alt=t.alt.toFixed(1):t.alt="",t.lon=t.lon.toFixed(3),t.lat=t.lat.toFixed(3),"经度："+t.lon+"，纬度："+t.lat+"\n 海拔="+t.alt+"米"},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height};return n.lon=c.Math.toDegrees(n.lon),n.lat=c.Math.toDegrees(n.lat),n},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var t=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),n=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(t.callback){var e=t._getLonLat(t.position);t.clear(),layer.close(t.toolBarIndex),t.callback(t.position,e)}}),n.unbind("click").bind("click",function(){t.clear(),layer.close(t.toolBarIndex)})},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},CLASS_NAME:"GlobePointMeasure"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobePointMeasure=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(_,w,e,t,n,i,r){var h=t.defined;if(h(w)){var x=t.isNum,b=t.isArray,P=t.isFunc,v=t.isJson,C=i.distance,T=i.getFaMatrix,k=i.funcAng,E=t.compute.matrix4,m=_.Position,g=_.Euler;n.createObj(function(){this._camOperation={animate:{}}});var M=function(e){e.flyHome(),e.cancelFlight()},o={set:function(e,t,n){if(!h(e,m)||!h(t,g))return!1;var i={};return i.destination=e.cartesian,i.orientation=t.hpr,x(n)&&0<n?(i.duration=n,this.viewer.camera.flyTo(i)):this.viewer.camera.setView(i),!0}},S=function(e,t,n){h(e,_.Viewer)||(e=this),b(t)||(t=[]);var i=e.viewer.camera.getPickRay(new w.Cartesian2(e.viewer.scene.drawingBufferWidth/2,e.viewer.scene.drawingBufferHeight/2)),r=e.viewer.scene.globe.pick(i,e.viewer.scene);return h(r)?(t[0]=r,n||(t[1]=w.Cartographic.fromCartesian(r)),t):null};o.getAimer=S,o.lookAt=function(e,t,n,i,r){var o,a,s,l=this.viewer.camera;if(h(e,m))o=e.cartesian;else{if(s=S(null,!0),!b(s))return!1;o=s[0]}a=h(t,g)?t.hpr:{heading:l.heading,pitch:l.pitch},x(n)||(n=C(l.position,o));var c=new w.HeadingPitchRange(a.heading,a.pitch,n);if(x(i)||(i=0),0===i)l.lookAt(o,c),M(l);else{var u=new E(!0),f=new E(!0);T(o,this.viewer.scene.mapProjection.ellipsoid,u);var p,d=[0,0,-n,1];f.rotate(1,a.pitch,!0),f.rotate(0,-a.heading,!0),f.mvec(d),p=[d[0],d[1],d[2],1],u.mvec(p),o.x+=p[0],o.y+=p[1],o.z+=p[2],v(r)||(r={}),r.destination=o,r.orientation={heading:a.heading,pitch:-Math.asin(d[0]/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])),roll:0},r.duration=i,this.viewer.camera.flyTo(r)}return!0},o.getPosition=function(e){var t=this.viewer.camera;h(e)||(e={});var n=t.position;return e.x=n.x,e.y=n.y,e.z=n.z,n=t.positionCartographic,e.longitude=180*n.longitude/Math.PI,e.latitude=180*n.latitude/Math.PI,e.height=n.height,n=t,e.heading=180*n.heading/Math.PI,e.pitch=180*n.pitch/Math.PI,e.roll=180*n.roll/Math.PI,e},_.Constants.CameraMoveType={Forward:0,Backward:1,Left:2,Right:3,Up:4,Down:5,RotateUp:6,RotateDown:7,RotateLeft:8,RotateRight:9};var a=function(e,t,n){h(n,_.Viewer)||(n=this);var i=_.Constants.CameraMoveType,r=n.viewer.camera;switch(e){case i.Forward:r.moveForward(x(t)?t:1);break;case i.Backward:r.moveBackward(x(t)?t:1);break;case i.Left:r.moveLeft(x(t)?t:1);break;case i.Right:r.moveRight(x(t)?t:1);break;case i.Up:r.moveUp(x(t)?t:1);break;case i.Down:r.moveDown(x(t)?t:1);break;case i.RotateUp:r.lookUp(w.Math.toRadians(x(t)?t:5));break;case i.RotateDown:r.lookDown(w.Math.toRadians(x(t)?t:5));break;case i.RotateLeft:r.lookLeft(w.Math.toRadians(x(t)?t:5));break;case i.RotateRight:r.lookRight(w.Math.toRadians(x(t)?t:5));break;default:return!1}return!0};o.move=a,o.moveForward=function(e){return a(_.Constants.CameraMoveType.Forward,e,this)},o.moveBackward=function(e){return a(_.Constants.CameraMoveType.Backward,e,this)},o.moveUp=function(e){return a(_.Constants.CameraMoveType.Up,e,this)},o.moveDown=function(e){return a(_.Constants.CameraMoveType.Down,e,this)},o.moveLeft=function(e){return a(_.Constants.CameraMoveType.Left,e,this)},o.moveRight=function(e){return a(_.Constants.CameraMoveType.Right,e,this)},o.rotateUp=function(e){return a(_.Constants.CameraMoveType.RotateUp,e,this)},o.rotateDown=function(e){return a(_.Constants.CameraMoveType.RotateDown,e,this)},o.rotateLeft=function(e){return a(_.Constants.CameraMoveType.RotateLeft,e,this)},o.rotateRight=function(e){return a(_.Constants.CameraMoveType.RotateRight,e,this)},o.stopAnimate=function(){var e=this._camOperation.animate;this.removeEventListener(_.Constants.EventType.Step,e.name),e.active&&(e.active=!1,P(e.reFunc)&&e.reFunc(!1))},o.lookAround=function(n,i,r){var o,a,s,l,c,e=this.viewer.camera,u=this._camOperation.animate;P(r)||(r=_.Constants.SmoothType.Smooth()),x(n)||(n=2),u.counter=0,u.active=!0,u.name="Cam",u.camera=e,u.mtx=T(e.position,this.viewer.scene.mapProjection.ellipsoid),u.invMtx=u.mtx.clone(),u.invMtx.inverse(4),u.up=new w.Cartesian3(1,0,0),u.mtx.mvecX(u.up),u.direction=e.direction.clone(),u.invMtx.mvecX(u.direction),u.reFunc=i;function t(e,t){u.counter+=e,u.counter>n&&(u.counter=n),o=r(u.counter/n)*Math.PI*2,a=u.camera.direction,s=u.direction,l=Math.sin(-o),c=Math.cos(-o),a.x=s.x,a.y=s.y*c-s.z*l,a.z=s.y*l+s.z*c,u.mtx.mvecX(a),a=u.camera.up,s=u.up,a.x=s.x,a.y=s.y,a.z=s.z,(u.counter>=n||!u.active)&&(t.removeEventListener(_.Constants.EventType.Step,u.name),P(i)&&i(u.active),u.active=!1)}return t(0),this.addEventListener(_.Constants.EventType.Step,u.name,t,200),!0},o.spiral=function(n,e,t,i,r){var o,a=this.viewer.camera;if(e=h(e,m)?e.cartesian:a.position.clone(),h(t,m))t=t.cartesian;else{if(o=S(this,null,!0),!b(o))return!1;t=o[0]}P(r)||(r=_.Constants.SmoothType.Smooth()),x(n)||(n=2);var s,l,c,u,f,p=this._camOperation.animate;p.counter=0,p.active=!0,p.name="Cam",p.camera=a,p.destPos=t,p.mtx=T(e,this.viewer.scene.mapProjection.ellipsoid),p.invMtx=p.mtx.clone(),p.invMtx.inverse(4),p.up=new w.Cartesian3(1,0,0),p.mtx.mvecX(p.up),e.x-=t.x,e.y-=t.y,e.z-=t.z,p.startPos=e,p.len=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),p.invMtx.mvecX(e),p.reFunc=i;function d(e,t){p.counter+=e,p.counter>n&&(p.counter=n),s=r(p.counter/n)*Math.PI*2,l=p.camera.position,c=p.startPos,f=Math.sin(s),u=Math.cos(s),l.x=c.x,l.y=c.y*u-c.z*f,l.z=c.y*f+c.z*u,p.mtx.mvecX(l),f=p.len,(c=p.camera.direction).x=-l.x/f,c.y=-l.y/f,c.z=-l.z/f,c=p.destPos,l.x+=c.x,l.y+=c.y,l.z+=c.z,l=p.camera.up,c=p.up,l.x=c.x,l.y=c.y,l.z=c.z,(p.counter>=n||!p.active)&&(t.removeEventListener(_.Constants.EventType.Step,p.name),P(i)&&i(p.active),p.active=!1,M(p.camera))}return d(0),this.addEventListener(_.Constants.EventType.Step,p.name,d,200),!0},o.animeHp=function(i,e,t,r,o){var a,n,s=this,l=s.viewer.camera,c=s._camOperation,u=2*Math.PI,f=89/180*Math.PI,p=S(s,null,!1);if(!b(p))return!1;s.viewer.scene.mode===w.SceneMode.SCENE3D?(p=p[0],(n=T(p,s.viewer.scene.mapProjection.ellipsoid)).inverse(4)):(p=s.viewer.scene.mapProjection.project(p[1],new w.Cartesian3),(n=new E).makeIdentity());var d=l.position.clone();d.x-=p.x,d.y-=p.y,d.z-=p.z,n.mvecX(d);var h=C(p,l.position),v=Math.asin(-d.x/h),m=Math.PI/2-k(-d.y,-d.z);x(e)?e*=Math.PI/180:e=m,x(t)?t*=Math.PI/180:t=v,P(o)||(o=_.Constants.SmoothType.Smooth(null,.4)),x(i)||(i=1);var g=c.animate;for(g.counter=0,g.active=!0,g.name="Cam",g.camera=l,g.destPos=p,e-=g.sHd=m;e>Math.PI;)e-=u;for(;e<=-Math.PI;)e+=u;g.vHd=e,t<-f&&(t=-f),f<t&&(t=f),t-=g.sPc=v,g.vPc=t,g.hpr=new w.HeadingPitchRange(m,v,h),g.reFunc=r;function y(e){var t,n;g.counter+=e,g.counter>i&&(g.counter=i),a=o(g.counter/i),t=g.hpr,n=g.camera,t.heading=g.sHd+a*g.vHd,t.pitch=g.sPc+a*g.vPc,n.lookAt(g.destPos,t),(g.counter>=i||!g.active)&&(s.removeEventListener(_.Constants.EventType.Step,g.name),P(r)&&r(g.active),g.active=!1,M(g.camera))}return y(0),s.addEventListener(_.Constants.EventType.Step,g.name,y,200),!0};var d;o.autoMove=function(e,t){var n=this.viewer.camera;if(!x(e)||!x(t))return this.removeEventListener(_.Constants.EventType.Step,"AutoMove"),M(n),null;var i=[e,t];return this.addEventListener(_.Constants.EventType.Step,"AutoMove",function(i,r,e){var o=S(e,null,!0);if(!b(o))return null;o=o[0];var a=Math.PI/2-1/360*Math.PI/180,s=2*Math.PI,l=new w.HeadingPitchRange(0,0,0),t=T(o,e.viewer.scene.mapProjection.ellipsoid);t.inverse(4);var n=i.position.clone();n.x-=o.x,n.y-=o.y,n.z-=o.z,t.mvecX(n);var c=C(o,i.position),u=Math.asin(-n.x/c),f={heading:Math.PI/2-k(-n.y,-n.z),pitch:u,range:c};return function(e){1<e&&(e=1);var t=f.heading+r[0]*e,n=f.pitch+r[1]*e;for(a<n&&(n=a),n<-a&&(n=-a);s<=t;)t-=s;for(;t<0;)t+=s;l.heading=t,l.pitch=n,f.heading=t,f.pitch=n,l.range=f.range,i.lookAt(o,l)}}(n,i,this),200),i},o.peopleVision=function(e,t,n,i){var r=this.viewer.camera;if(!x(e)||!x(t))return!1;x(n)||(n=1.7),x(i)||(i=2);var o=new w.Cartographic(e/180*Math.PI,t/180*Math.PI,0),a=this.viewer.scene.globe.getHeight(o);o.height=a+n;var s=new w.Cartesian3(0,0,0);this.viewer.scene.mapProjection.ellipsoid.cartographicToCartesian(o,s);var l={};return l.destination=s,l.orientation={heading:r.heading,pitch:0,roll:0},0<i?(l.duration=i,r.flyTo(l)):r.setView(l),!0},o.getDdPosition=(d=new E,function(e,t,n,i,r,o,a){var s=this.viewer.scene.mapProjection.ellipsoid,l=new w.Cartesian3.fromDegrees(e,t,n,s),c=new w.Cartesian3.fromDegrees(i,r,o,s),u={heading:0,pitch:0,roll:0},f=new w.Cartographic(e*Math.PI/180,t*Math.PI/180,0);T(f,s,d),d.inverse(4);var p=[c.x-l.x,c.y-l.y,c.z-l.z];return d.mvec(p),u.pitch=Math.asin(p[0]/Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])),u.heading=-(k(p[1],p[2])-Math.PI/2),u={destination:l,orientation:u},x(a)&&(u.duration=a,this.viewer.camera.flyTo(u)),{heading:180*u.orientation.heading/Math.PI,pitch:180*u.orientation.pitch/Math.PI,roll:0}}),o.setCenter=function(e,t,n){var i,r,o=this.viewer.camera;if(!h(e,m))throw"未定义中心点";return i=e.cartesian,r=h(t,g)?t.hpr:{heading:o.heading,pitch:o.pitch},x(n)||(n=2),this.viewer.camera.flyTo({destination:i,orientation:{heading:r.heading,pitch:r.pitch,roll:r.roll},duration:n}),!0},o.setCenter=function(e,t,n,i,r,o){if(!(h(e)||h(t)||h(n)||h(i)))throw"未定义west, south, east, north东南西北方向矩阵";w.Camera.DEFAULT_VIEW_RECTANGLE=w.Rectangle.fromDegrees(e,t,n,i);var a,s=this.viewer.camera;a=h(r,g)?r.hpr:{heading:s.heading,pitch:s.pitch},this.viewer.camera.flyTo({destination:w.Rectangle.fromDegrees(e,t,n,i),orientation:{heading:a.heading,pitch:a.pitch,roll:a.roll},duration:o})},r.camOper=o}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),pe=ye,de=Cesium,ye._kLib.throwErr,he=ye._kLib,ve=ye._dataCenter,ye._auxiliary,me=ye._funcs,ge=he.defined,ve.createObj(function(){this.entityList=[]}),me.ZEntityCollection={getEntitys:function(){return this.entityList},getEntityById:function(e){return this.viewer.entities.getById(e)},addZEntity:function(e){var t=this.viewer.entities.add(e),n={id:e.id,entity:t};return this.entityList.push(n),t},romverZEntityById:function(e){this.viewer.entities.removeById(e)},romverZEntity:function(e){this.viewer.entities.remove(e)},romverAll:function(){this.viewer.entities.removeAll(),this.entityList=[]}},pe.ZEntity=function(e){var t=new Object;if(!e.type)throw"实体类型不能为空";switch(e.type){case pe.Constants.EntityTypes.BILLBOARD:if(!ge(e.position))throw"实体位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"实体位置未找到lon lat属性";o=ge(e.position.height)?(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height),de.HeightReference.NONE):(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),de.HeightReference.CLAMP_TO_GROUND),e.position=p,ge(e.billboard.heightReference)||(e.billboard.heightReference=o);var n=new de.Cartesian2(e.billboard.pixelOffset[0],e.billboard.pixelOffset[1]);e.billboard.pixelOffset=n;break;case pe.Constants.EntityTypes.BOX:if(!ge(e.position))throw"实体位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"实体位置未找到lon lat属性";o=ge(e.position.height)?(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height),de.HeightReference.NONE):(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),de.HeightReference.CLAMP_TO_GROUND),e.position=p,ge(e.box.heightReference)||(e.box.heightReference=o);var i=new de.Cartesian3(e.box.dimensions[0],e.box.dimensions[1],e.box.dimensions[2]);e.box.dimensions=i;break;case pe.Constants.EntityTypes.CORRIDOR:if(!ge(e.corridor.positions))throw"实体走道未找到[lon,lat,lon,lat...]属性";var r=de.Cartesian3.fromDegreesArray(e.corridor.positions);e.corridor.positions=r;var o=de.HeightReference.CLAMP_TO_GROUND;ge(e.corridor.heightReference)||ge(e.corridor.height)||(e.corridor.heightReference=o);break;case pe.Constants.EntityTypes.CYLINDER:if(!ge(e.position))throw"实体位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"实体位置未找到lon lat属性";if(o=ge(e.position.height)?(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height),de.HeightReference.NONE):(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),de.HeightReference.CLAMP_TO_GROUND),e.position=p,ge(e.cylinder.heightReference)||(e.cylinder.heightReference=o),ge(e.cylinder.slices)&&parseInt(e.cylinder.slices)<3)throw"圆柱周长的边数必须大于3";break;case pe.Constants.EntityTypes.ELLIPSE:if(!ge(e.position))throw"实体位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"实体位置未找到lon lat属性";ge(e.position.height)?(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height),o=de.HeightReference.NONE,ge(e.ellipse.height)||(e.ellipse.height=e.position.height)):(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),o=de.HeightReference.CLAMP_TO_GROUND),e.position=p,ge(e.ellipse.heightReference)||(e.ellipse.heightReference=o);break;case pe.Constants.EntityTypes.ELLIPSOID:if(!ge(e.position))throw"实体位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"实体位置未找到lon lat属性";if(p=ge(e.position.height)?de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height):de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),o=de.HeightReference.NONE,e.position=p,ge(e.ellipsoid.heightReference)||(e.ellipsoid.heightReference=o),!ge(e.ellipsoid.radii))throw"椭圆体半径需要3方向半轴";var a=new de.Cartesian3(e.ellipsoid.radii[0],e.ellipsoid.radii[1],e.ellipsoid.radii[2]);e.ellipsoid.radii=a;break;case pe.Constants.EntityTypes.MODEL:if(ge(e.isMove)||(e.isMove=!1),!ge(e.model.uri))throw"未找到模型实体uri";if(e.isMove){if(!ge(e.positions[0].time))throw"模型实体未找到时间time属性";if(!ge(e.positions[0].longitude)||!ge(e.positions[0].latitude))throw"模型未找到lon lat属性";var s=new de.TimeIntervalCollection([new de.TimeInterval({start:de.JulianDate.fromDate(new Date(e.positions[0].time)),stop:de.JulianDate.fromDate(new Date(e.positions[e.positions.length-1].time))})]),l=new de.SampledPositionProperty;o=de.HeightReference.NONE;e.positions.forEach(function(e){var t,n=de.JulianDate.fromDate(new Date(e.time));ge(e.height)?t=de.Cartesian3.fromDegrees(e.longitude,e.latitude,e.height):(t=de.Cartesian3.fromDegrees(e.longitude,e.latitude),o=de.HeightReference.CLAMP_TO_GROUND),l.addSample(n,t)});var c=l;ge(e.model.heightReference)||(e.model.heightReference=o),ge(e.availability)||(e.availability=s),ge(e.position)||(e.position=c),ge(e.orientation)||(e.orientation=new de.VelocityOrientationProperty(c)),e.showLine}else{if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"模型未找到lon lat属性";ge(e.position.height)?c=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height):(c=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),o=de.HeightReference.CLAMP_TO_GROUND),e.position=c,ge(e.model.heightReference)||(e.model.heightReference=o)}break;case pe.Constants.EntityTypes.PLANE:if(!ge(e.position))throw"平面位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"平面未找到lon lat属性";var u;if(u=ge(e.position.height)?de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height,de.Ellipsoid.WGS84,u):de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,0,de.Ellipsoid.WGS84,u),e.position=u,!ge(e.plane.dimensions))throw"平面长宽未定义";if(2!==e.plane.dimensions.length)throw"平面长宽定义错误";var f=[];Object.assign(f,e.plane.dimensions),console.log("dim",f),e.plane.dimensions=new de.Cartesian2(f[0],f[1]);break;case pe.Constants.EntityTypes.POINT:if(!ge(e.position))throw"实体位置不能为空";if(!ge(e.position.longitude)||!ge(e.position.latitude))throw"实体位置未找到lon lat属性";var p;o=ge(e.position.height)?(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height),de.HeightReference.NONE):(p=de.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude),de.HeightReference.CLAMP_TO_GROUND),e.position=p,ge(e.point.heightReference)||(e.point.heightReference=o);break;case pe.Constants.EntityTypes.POLYGON:if(!ge(e.polygon.positions))throw"多边形不能为空";if(e.polygon.positions.length<3)throw"多边形位置至少3需要个点";if(!ge(e.polygon.positions[0].longitude)||!ge(e.polygon.positions[0].latitude))throw"多边形位置未找到lon lat属性";r=[],o=de.HeightReference.NONE;ge(e.polygon.positions[0].height)?(e.polygon.positions.forEach(function(e){r.push(e.longitude),r.push(e.latitude),r.push(e.height)}),o=de.HeightReference.CLAMP_TO_GROUND,e.polygon.hierarchy=de.Cartesian3.fromDegreesArrayHeights(r)):(e.polygon.positions.forEach(function(e){r.push(e.longitude),r.push(e.latitude)}),e.polygon.hierarchy=de.Cartesian3.fromDegreesArray(r)),ge(e.polygon.heightReference)||(e.polygon.heightReference=o);break;case pe.Constants.EntityTypes.POLYLINE:if(!ge(e.polyline.positions))throw"实体位置不能为空";if(e.polyline.positions.length<2)throw"折线位置至少2需要个点";if(!ge(e.polyline.positions[0].longitude)||!ge(e.polyline.positions[0].latitude))throw"折线位置未找到lon lat属性";var d;r=[];d=ge(e.polyline.positions[0].height)?(e.polyline.positions.forEach(function(e){r.push(de.Cartesian3.fromDegrees(e.longitude,e.latitude,e.height))}),!1):(e.polyline.positions.forEach(function(e){r.push(de.Cartesian3.fromDegrees(e.longitude,e.latitude))}),!0),e.polyline.positions=r,ge(e.polyline.clampToGround)||(e.polyline.clampToGround=d);break;case pe.Constants.EntityTypes.POLYLINEVOLUME:if(!ge(e.polylineVolume.positions))throw"折线体积位置不能为空";if(e.polylineVolume.positions.length<2)throw"折线体积至少2需要个点";if(!ge(e.polylineVolume.positions[0].longitude)||!ge(e.polylineVolume.positions[0].latitude))throw"折线体积未找到lon lat属性";var h=[];if(ge(e.polylineVolume.positions[0].height)?e.polylineVolume.positions.forEach(function(e){h.push(de.Cartesian3.fromDegrees(e.longitude,e.latitude,e.height))}):e.polylineVolume.positions.forEach(function(e){h.push(de.Cartesian3.fromDegrees(e.longitude,e.latitude))}),e.polylineVolume.positions=h,!ge(e.polylineVolume.shape))throw"折线体积未找到shape";if(e.polylineVolume.shape.length%2!=0)throw"折线体积需要成对";for(var v=e.polylineVolume.shape.length/2,m=new Array(v),g=0;g<v;g++)m[g]=new de.Cartesian2(e.polylineVolume.shape[2*g],e.polylineVolume.shape[2*g+1]);e.polylineVolume.shape=m;break;case pe.Constants.EntityTypes.RECTANGLE:if(!ge(e.rectangle.coordinates))throw"矩形位置不能为空";if(4!==e.rectangle.coordinates.length)throw"矩形位置需要2个经纬度";e.rectangle.coordinates=de.Rectangle.fromDegrees(e.rectangle.coordinates[0],e.rectangle.coordinates[1],e.rectangle.coordinates[2],e.rectangle.coordinates[3]);break;case pe.Constants.EntityTypes.WALL:if(!ge(e.wall.positions))throw"墙面位置不能为空";if(e.wall.positions.length<2)throw"墙面至少2需要个点";r=[];if(ge(e.wall.maximumHeights)&&e.wall.positions.length!==e.wall.maximumHeights.length)throw"墙面maximumHeights必须和positions点的数量相同";if(ge(e.wall.minimumHeights)&&e.wall.positions.length!==e.wall.minimumHeights.length)throw"墙面minimumHeights必须和positions点的数量相同";if(ge(e.wall.positions[0].height))e.wall.positions.forEach(function(e){r.push(e.longitude),r.push(e.latitude),r.push(e.height)}),e.wall.positions=de.Cartesian3.fromDegreesArrayHeights(r);else{if(!ge(e.wall.maximumHeights)||!ge(e.wall.minimumHeights))throw"墙面高度未设置，下需设置maximumHeights和minimumHeights";e.wall.positions.forEach(function(e){r.push(e.longitude),r.push(e.latitude)}),e.wall.positions=de.Cartesian3.fromDegreesArray(r)}}return Object.assign(t,e),console.log(t),new de.Entity(t)},pe.Constants.EntityTypes={BILLBOARD:1,BOX:2,CORRIDOR:3,CYLINDER:4,ELLIPSE:5,ELLIPSOID:6,MODEL:7,PLANE:8,POINT:9,POLYGON:10,POLYLINE:11,POLYLINEVOLUME:12,RECTANGLE:13,WALL:14},pe.Constants.ShadowMode={DISABLED:0,ENABLED:1,CAST_ONLY:2,RECEIVE_ONLY:3},function(e,u,t,n){if((0,n.defined)(u)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:2,extrudedHeight:0,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+a.prototype.dragIcon,this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPolygon:function(e,t,n){this.positions=e,this.okHandler=t,this.cancelHandler=n,this._showModifyRegion2Map()},startDrawPolygon:function(e,t){var o=this;o.okHandler=e,o.cancelHandler=t,o.positions=[];var a=null;o.drawHandler=new u.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=o.camera.getPickRay(t);if(u.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(u.defined(i)){0==o.positions.length&&(o.positions.push(i),a=o._createPoint(i,-1),o._showRegion2Map()),o.positions.push(i);var r=o.positions.length-2;o._createPoint(i,r)}}}},u.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(u.defined(t))if(o.positions.length<1)o.tooltip.showAt(t,"<p>选择起点</p>");else{var n="<p>点击添加下一个点</p>";3<o.positions.length&&(n+="<p>右键结束绘制</p>"),o.tooltip.showAt(t,n);var i=o.camera.getPickRay(t);if(u.defined(i)){var r=o.scene.globe.pick(i,o.scene);u.defined(r)&&(a.position.setValue(r),o.positions.pop(),o.positions.push(r))}}},u.ScreenSpaceEventType.MOUSE_MOVE),o.drawHandler.setInputAction(function(e){o.positions.length<4||(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),o.clear(),o._showModifyRegion2Map())},u.ScreenSpaceEventType.RIGHT_CLICK)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new u.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.tempPositions[r]=i,s.tooltip.setVisible(!1),"mid_anchor"==c.flag&&s._updateModifyAnchors(r)}else{var o=s.scene.pick(t);if(!u.defined(o))return;if(!u.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId)return;if("anchor"!=a.flag&&"mid_anchor"!=a.flag)return;l=!0,"anchor"==(c=a).flag&&s.tooltip.showAt(t,"<p>移动控制点</p>"),"mid_anchor"==a.flag&&s.tooltip.showAt(t,"<p>移动创建新的控制点</p>")}}}},u.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(u.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i)){var r=c.oid;"anchor"==c.flag?(c.position.setValue(i),s.tempPositions[r]=i,s._updateNewMidAnchors(r)):"mid_anchor"==c.flag&&(c.position.setValue(i),s.tempPositions[r]=i)}}}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_showRegion2Map:function(){var n=this;null==n.material&&(n.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.outlineMaterial&&(n.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#00f").withAlpha(.7)}));var e=new u.CallbackProperty(function(){return n.positions},!1),t=new u.CallbackProperty(function(){if(1<n.positions.length){var e=[].concat(n.positions),t=n.positions[0];return e.push(t),e}return null},!1),i={polygon:new u.PolygonGraphics({hierarchy:e,material:n.material,show:n.fill}),polyline:{positions:t,clampToGround:!0,width:n.outlineWidth,material:n.outlineMaterial,show:n.outline}};0<n.extrudedHeight&&(i.polygon.extrudedHeight=n.extrudedHeight,i.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,i.polygon.closeTop=!0,i.polygon.closeBottom=!0),n.entity=n.viewer.entities.add(i),n.entity.layerId=n.layerId},_showModifyRegion2Map:function(){var n=this;n._startModify(),n._computeTempPositions();var e=new u.CallbackProperty(function(){return n.tempPositions},!1),t=new u.CallbackProperty(function(){if(1<n.tempPositions.length){var e=[].concat(n.tempPositions),t=n.tempPositions[0];return e.push(t),e}return null},!1);null==n.material&&(n.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.outlineMaterial&&(n.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#00f").withAlpha(.7)}));var i={polygon:new u.PolygonGraphics({hierarchy:e,material:n.material,show:n.fill}),polyline:{positions:t,clampToGround:!0,width:n.outlineWidth,material:n.outlineMaterial,show:n.outline}};0<n.extrudedHeight&&(i.polygon.extrudedHeight=n.extrudedHeight,i.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,i.polygon.closeTop=!0,i.polygon.closeBottom=!0),n.entity=n.viewer.entities.add(i),n.entity.layerId=n.layerId;for(var r=n.tempPositions,o=0;o<r.length;o++){0==o%2?n._createPoint(r[o],o):n._createMidPoint(r[o],o)}},_updateModifyAnchors:function(e){var t=this,n=t.tempPositions[e],i=null,r=null,o=t.tempPositions.length;r=0==e?(i=t.tempPositions[o-1],t.tempPositions[e+1]):e==o-1?(i=t.tempPositions[e-1],t.tempPositions[0]):(i=t.tempPositions[e-1],t.tempPositions[e+1]);var a=t._computeCenterPotition(i,n),s=t._computeCenterPotition(n,r);t.tempPositions.splice(e,1,a,n,s),t._clearAnchors(t.layerId);for(var l=t.tempPositions,c=0;c<l.length;c++){0==c%2?t._createPoint(l[c],c):t._createMidPoint(l[c],c)}},_updateNewMidAnchors:function(e){var t=this;if(null!=e&&null!=e){var n=null,i=null,r=null,o=null,a=t.tempPositions.length;o=0==e?(n=a-2,i=a-1,r=e+1,e+2):e==a-2?(n=e-2,i=e-1,r=a-1,0):(n=e-2,i=e-1,r=e+1,e+2);var s=t.tempPositions[n],l=t.tempPositions[e],c=t.tempPositions[o],u=t._computeCenterPotition(s,l),f=t._computeCenterPotition(c,l);t.tempPositions[i]=u,t.tempPositions[r]=f,t.markers[i].position.setValue(u),t.markers[r].position.setValue(f)}},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_createMidPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIcon,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="mid_anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length,n=e[0],i=e[t-1];0==this._isSimpleXYZ(n,i)&&(e.push(n),t+=1),this.tempPositions=[];for(var r=1;r<t;r++){var o=e[r-1],a=e[r],s=this._computeCenterPotition(o,a);this.tempPositions.push(o),this.tempPositions.push(s)}},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new u.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var i=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(i.clear(),layer.close(i.toolBarIndex),i.okHandler){for(var e=[],t=0;t<i.tempPositions.length;t+=2){var n=i.tempPositions[t];e.push(n)}i.positions=e,i.okHandler(e)}}),t.unbind("click").bind("click",function(){i.clear(),layer.close(i.toolBarIndex),i.cancelHandler&&i.cancelHandler()})},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"GlobePolygonDrawer"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobePolygonDrawer=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(r,h,e,t,n,i,o){var v=t.defined;if(!v(h))return;var m=t.isString,a=t.isNum,g=r.Constants,s=r.Params,l=t.createParam,y=i.ctsEqual;i.compareDist;r.Constants.DrawType={Label:0,Point:1,Polyline:2,Polygon:3},n.createObj(function(){this._userDrawing={runtime:{}}});function _(e,t,n,i){if(!(this instanceof _))return new _(e,t,n,i);this.parent=i,this.name=m(e)&&""!=e?e:"_"+Math.uuid()+"_",this.type=-1,this.param=null,this.insParam=null,this.entities=[];var r=this;switch(t){case g.DrawType.Label:r.type=g.DrawType.Label,r.param=n,r.insParam={},r.insParam.label=l(n,s.DrawLabel);break;case g.DrawType.Point:r.type=g.DrawType.Point,r.param=n,r.insParam={},r.insParam.point=l(n,s.DrawPoint);break;case g.DrawType.Polyline:r.type=g.DrawType.Polyline,r.param=n,r.insParam={},r.insParam.polyline=l(n,s.DrawPolyline);break;case g.DrawType.Polygon:r.type=g.DrawType.Polygon,r.param=n,r.insParam={},r.insParam.polygon=l(n,s.DrawPolygon)}}_.prototype={constructor:_,clone:function(e,t){return v(t)||(t=this),new _(e,this.type,this.param,this.parent)},addEntity:function(e){if(v(e)||(e=this),!v(e.insParam))return null;if(!v(e.parent,r.Viewer)||!e.parent.valid)return null;var t=e.parent.viewer,n=e.parent._pickControl.noSelect,i={zViewer:e.parent,entity:null,joystick:null,id:e.entities.length};switch(e.insParam.name=e.name+"_"+i.id,e.type){case g.DrawType.Label:i.joystick=[new h.Cartesian3(0,0,0),""],e.insParam.position=new h.CallbackProperty(function(){return i.joystick[0]},!1),e.insParam.label.text=new h.CallbackProperty(function(){return i.joystick[1]},!1);break;case g.DrawType.Point:i.joystick=new h.Cartesian3(0,0,0),e.insParam.position=new h.CallbackProperty(function(){return i.joystick},!1);break;case g.DrawType.Polyline:i.joystick=[],e.insParam.polyline.positions=new h.CallbackProperty(function(){return i.joystick},!1);break;case g.DrawType.Polygon:i.joystick=[],e.insParam.polygon.hierarchy=new h.CallbackProperty(function(){return i.joystick},!1)}return v(i.joystick)?(i.entity=t.entities.add(e.insParam),e.entities.push(i),n.push(i.entity),i):null},deleteEntity:function(e,t){var n,i,r,o;if(v(t)||(t=this),a(e)&&v(t.entities[e])){for((n=t.entities[e]).zViewer.viewer.entities.remove(n.entity),i=n.zViewer._pickControl.noSelect,t.entities[e]=null,o=i.length;o--;)if(i[o].id==n.entity.id){i.splice(o,1);break}}else{for(r=t.entities.length;r--;)if(n=t.entities[r],v(n))for(n.zViewer.viewer.entities.remove(n.entity),o=(i=n.zViewer._pickControl.noSelect).length;o--;)if(i[o].id==n.entity.id){i.splice(o,1);break}t.entities.splice(0,t.entities.length)}return!0}};function w(e,t){v(t)||(t=this);var n=t._userDrawing.runtime,i=null;if(m(e)&&""!=e){if(i=n[e],!v(i))return!1;if(!i.isDraw)return!0;i.isFinish||i.reFunc(),t.removeEventListener(g.EventType.LeftClickWorld,"userDrawing - "+e),t.removeEventListener(g.EventType.RightClickWorld,"userDrawing - "+e),t.removeEventListener(g.EventType.MouseMoveWorld,"userDrawing - "+e),i.isDraw=!1}else for(e in n)n.hasOwnProperty(e)&&(i=n[e]).isDraw&&(i.isFinish||i.reFunc(),t.removeEventListener(g.EventType.LeftClickWorld,"userDrawing - "+e),t.removeEventListener(g.EventType.RightClickWorld,"userDrawing - "+e),t.removeEventListener(g.EventType.MouseMoveWorld,"userDrawing - "+e),i.isDraw=!1);return!0}function x(e,t){v(t)||(t=this);var n,i,r=t._userDrawing.runtime;if(m(e)&&""!=e){if(n=r[e],!w(e,t))return!1;for(i=n.geoms.length;i--;)n.geoms[i].deleteEntity();delete r[e]}else{var o=[];for(e in r)if(r.hasOwnProperty(e)&&(n=r[e],w(e,t))){for(i=n.geoms.length;i--;)n.geoms[i].deleteEntity();o.push(e)}for(i=o.length;i--;)delete r[o[i]]}return!0}o.userDrawing={stopDraw:w,clearDraw:x,reDraw:function(e,t){v(t)||(t=this);var n=t._userDrawing.runtime[e];if(!v(n)||n.isDraw)return!1;n.isDraw=!0,n.isFinish=!1,n.mouseArr.splice(1,n.mouseArr.length-1),n.mouseLen=0;for(var i=n.ettArr.length;i--;)n.geoms[i].deleteEntity(),n.ettArr[i].realTimeFunc(n.geoms[i],n.mouseArr,n.mouseLen,0,n.sharedObj);return t.addEventListener(g.EventType.MouseMoveWorld,"userDrawing - "+e,n.mmF,0),t.addEventListener(g.EventType.LeftClickWorld,"userDrawing - "+e,n.lcF,0),t.addEventListener(g.EventType.RightClickWorld,"userDrawing - "+e,n.rcF,0),!0},startDraw:function(o,a,s,e){v(e)||(e=this);var t=e._userDrawing.runtime;if(m(o)&&""!=o||(o="_measure"),v(t[o])&&!x(o,e))return!1;a=a.reverse();var n,i,r,l,c,u=[],f={ettArr:a,geoms:u,sharedObj:{},isDraw:!0,isFinish:!1,zViewer:e,reFunc:s,lcF:null,rcF:null,mmF:null,mouseArr:null,mouseLen:0},p=[new h.Cartesian3(0,0,0)],d=a.length;for(f.mouseArr=p,n=a.length;n--&&(i=new _(o+"_"+u.length,a[n].type,a[n].param,e),u.unshift(i),!a[n].realTimeFunc(i,p,f.mouseLen,0,f.sharedObj)););return r=function(e){var t=p[f.mouseLen];t.x=e.x,t.y=e.y,t.z=e.z;for(var n=d;n--&&!a[n].realTimeFunc(u[n],p,f.mouseLen,1,f.sharedObj););},l=function(e){if(!(0<f.mouseLen&&y(e,p[f.mouseLen-1]))){var t=new h.Cartesian3(e.x,e.y,e.z);p.push(t),f.mouseLen+=1;for(var n=d;n--&&!a[n].realTimeFunc(u[n],p,f.mouseLen,2,f.sharedObj););}},c=function(e,t,n){var i=p[f.mouseLen];i.x=e.x,i.y=e.y,i.z=e.z;for(var r=d;r--&&!a[r].realTimeFunc(u[r],p,f.mouseLen,3,f.sharedObj););f.isFinish=!0,w(o,n),s(p,f.mouseLen,f.sharedObj)},f.mmF=r,f.lcF=l,f.rcF=c,e.addEventListener(g.EventType.MouseMoveWorld,"userDrawing - "+o,r,0),e.addEventListener(g.EventType.LeftClickWorld,"userDrawing - "+o,l,0),e.addEventListener(g.EventType.RightClickWorld,"userDrawing - "+o,c,0),t[o]=f,!0}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(t,P,n,e,i,r,o){function a(e){s(e)||n("zRadar.set:","Illegal parameters.","classes\\zRadar.js",16),this._init(e)}var s=e.isJson,l=e.isNum,c=(e.intErr,e.isBool,e.isString,e.defined);e.isArray,e.isArray;a.prototype._init=function(e){s(e.center)||(e.center={longitude:0,latitude:0,height:0}),l(e.radius)||(e.radius=2e3),l(e.duration)||(e.duration=5e3),c(e.color)||(e.color=t.color.fromCssColor("#f00",1)),this.center=e.center,this.radius=e.radius,this.duration=e.duration,this.color=e.color},o.RadarCollection={romverRadar:function(e){return this.viewer.postProcessStages.remove(e)},addRadar:function(e){var t,n,i,r;console.log("zRadar",e),this.viewer.scene.globe.depthTestAgainstTerrain=!0,t=new P.Cartographic(P.Math.toRadians(e.center.longitude),P.Math.toRadians(e.center.latitude),0),n=e.radius,r=e.duration,i=e.color;var o=P.Cartographic.toCartesian(t),a=new P.Cartesian4(o.x,o.y,o.z,1),s=new P.Cartographic(t.longitude,t.latitude,t.height+500),l=P.Cartographic.toCartesian(s),c=new P.Cartesian4(l.x,l.y,l.z,1),u=new P.Cartographic(t.longitude+P.Math.toRadians(.001),t.latitude,t.height),f=P.Cartographic.toCartesian(u),p=new P.Cartesian4(f.x,f.y,f.z,1),d=new P.Quaternion,h=new P.Matrix3,v=(new Date).getTime(),m=new P.Cartesian4,g=new P.Cartesian4,y=new P.Cartesian4,_=new P.Cartesian3,w=new P.Cartesian3,x=this,b=new P.PostProcessStage({fragmentShader:"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform vec3 u_scanLineNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\nvec4 toEye(in vec2 uv, in float depth)\n {\n vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n posInCamera =posInCamera / posInCamera.w;\n return posInCamera;\n }\nbool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 v01 = testPt - ptOnLine;\nnormalize(v01);\nvec3 temp = cross(v01, lineNormal);\nfloat d = dot(temp, u_scanPlaneNormalEC);\nreturn d > 0.5;\n}\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n{\nvec3 v01 = point -planeOrigin;\nfloat d = dot(planeNormal, v01) ;\nreturn (point - planeNormal * d);\n}\nfloat distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\nreturn length(tempPt - ptOnLine);\n}\nfloat getDepth(in vec4 depth)\n{\nfloat z_window = czm_unpackDepth(depth);\nz_window = czm_reverseLogDepth(z_window);\nfloat n_range = czm_depthRange.near;\nfloat f_range = czm_depthRange.far;\nreturn (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main()\n{\ngl_FragColor = texture2D(colorTexture, v_textureCoordinates);\nfloat depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\nvec4 viewPos = toEye(v_textureCoordinates, depth);\nvec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\nfloat dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\nfloat twou_radius = u_radius * 2.0;\nif(dis < u_radius)\n{\nfloat f0 = 1.0 -abs(u_radius - dis) / u_radius;\nf0 = pow(f0, 64.0);\nvec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\nfloat f = 0.0;\nif(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n{\nfloat dis1= length(prjOnPlane.xyz - lineEndPt);\nf = abs(twou_radius -dis1) / twou_radius;\nf = pow(f, 3.0);\n}\ngl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n}\n}\n",uniforms:{u_scanCenterEC:function(){return P.Matrix4.multiplyByVector(x.viewer.camera._viewMatrix,a,m)},u_scanPlaneNormalEC:function(){var e=P.Matrix4.multiplyByVector(x.viewer.camera._viewMatrix,a,m),t=P.Matrix4.multiplyByVector(x.viewer.camera._viewMatrix,c,g);return _.x=t.x-e.x,_.y=t.y-e.y,_.z=t.z-e.z,P.Cartesian3.normalize(_,_),_},u_radius:n,u_scanLineNormalEC:function(){var e=P.Matrix4.multiplyByVector(x.viewer.camera._viewMatrix,a,m),t=P.Matrix4.multiplyByVector(x.viewer.camera._viewMatrix,c,g),n=P.Matrix4.multiplyByVector(x.viewer.camera._viewMatrix,p,y);_.x=t.x-e.x,_.y=t.y-e.y,_.z=t.z-e.z,P.Cartesian3.normalize(_,_),w.x=n.x-e.x,w.y=n.y-e.y,w.z=n.z-e.z;var i=((new Date).getTime()-v)%r/r;return P.Quaternion.fromAxisAngle(_,i*P.Math.PI*2,d),P.Matrix3.fromQuaternion(d,h),P.Matrix3.multiplyByVector(h,w,w),P.Cartesian3.normalize(w,w),w},u_scanColor:i}});return this.viewer.scene.postProcessStages.add(b)}},t.Radar=a}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,f,t,n){if((0,n.defined)(f)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,callback:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:2,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+a.prototype.dragIcon,this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPolygon:function(e,t){this.positions=e,this.callback=t,this._showModifyRegion2Map()},startDrawPolygon:function(e){var a=this;a.callback=e,a.positions=[];var s=null;a.drawHandler=new f.ScreenSpaceEventHandler(a.canvas),a.drawHandler.setInputAction(function(e){var t=e.position;if(f.defined(t)){var n=a.camera.getPickRay(t);if(f.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(f.defined(i)){0==a.positions.length&&(a.positions.push(i),s=a._createPoint(i,-1),a._showRegion2Map()),a.positions.push(i);var r=a.positions.length-2;if(a._createPoint(i,r),2<a.positions.length){var o=a._getMeasureTip(a.positions);a.entity.label.text=o}a.entity.position=i;o=a._getMeasureTip(a.positions);a.entity.label.text=o}}}},f.ScreenSpaceEventType.LEFT_CLICK),a.drawHandler.setInputAction(function(e){var t=e.endPosition;if(f.defined(t))if(a.positions.length<1)a.tooltip.showAt(t,"<p>选择起点</p>");else{var n="<p>点击添加下一个点</p>";3<a.positions.length&&(n+="<p>右键结束绘制</p>"),a.tooltip.showAt(t,n);var i=a.camera.getPickRay(t);if(f.defined(i)){var r=a.scene.globe.pick(i,a.scene);if(f.defined(r)){if(s.position.setValue(r),a.positions.pop(),a.positions.push(r),2<a.positions.length){var o=a._getMeasureTip(a.positions);a.entity.label.text=o}a.entity.position=r;o=a._getMeasureTip(a.positions);a.entity.label.text=o}}}},f.ScreenSpaceEventType.MOUSE_MOVE),a.drawHandler.setInputAction(function(e){a.positions.length<4||(a.positions.pop(),a.viewer.entities.remove(s),a.tooltip.setVisible(!1),a.clear(),a._showModifyRegion2Map())},f.ScreenSpaceEventType.RIGHT_CLICK)},_startModify:function(){var l=this,c=!1,u=null;l.drawHandler&&(l.drawHandler.destroy(),l.drawHandler=null),l._showToolBar(),l.modifyHandler=new f.ScreenSpaceEventHandler(l.canvas),l.modifyHandler.setInputAction(function(e){var t=e.position;if(f.defined(t)){var n=l.camera.getPickRay(t);if(f.defined(n)){var i=l.scene.globe.pick(n,l.scene);if(f.defined(i))if(c){c=!1,u.position.setValue(i);var r=u.oid;l.tempPositions[r]=i,l.tooltip.setVisible(!1),"mid_anchor"==u.flag&&l._updateModifyAnchors(r),l.entity.position.setValue(i);var o=l._getMeasureTip(l.tempPositions);l.entity.label.text=o}else{var a=l.scene.pick(t);if(!f.defined(a))return;if(!f.defined(a.id))return;var s=a.id;if(s.layerId!=l.layerId)return;if("anchor"!=s.flag&&"mid_anchor"!=s.flag)return;c=!0,"anchor"==(u=s).flag&&l.tooltip.showAt(t,"<p>移动控制点</p>"),"mid_anchor"==s.flag&&l.tooltip.showAt(t,"<p>移动创建新的控制点</p>")}}}},f.ScreenSpaceEventType.LEFT_CLICK),l.modifyHandler.setInputAction(function(e){if(c){var t=e.endPosition;if(f.defined(t)){l.tooltip.showAt(t,"<p>移动控制点</p>");var n=l.camera.getPickRay(t);if(f.defined(n)){var i=l.scene.globe.pick(n,l.scene);if(f.defined(i)){var r=u.oid;"anchor"==u.flag?(u.position.setValue(i),l.tempPositions[r]=i,l._updateNewMidAnchors(r)):"mid_anchor"==u.flag&&(u.position.setValue(i),l.tempPositions[r]=i),l.entity.position.setValue(i);var o=l._getMeasureTip(l.tempPositions);l.entity.label.text=o}}}}},f.ScreenSpaceEventType.MOUSE_MOVE)},_showRegion2Map:function(){var n=this;null==n.material&&(n.material=f.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.outlineMaterial&&(n.outlineMaterial=new f.PolylineDashMaterialProperty({dashLength:16,color:f.Color.fromCssColorString("#00f").withAlpha(.7)}));var e=new f.CallbackProperty(function(){return n.positions},!1),t=new f.CallbackProperty(function(){if(1<n.positions.length){var e=[].concat(n.positions),t=n.positions[0];return e.push(t),e}return null},!1),i=n.positions.length,r={position:n.positions[i-1],label:{text:"",font:'16px "微软雅黑", Arial, Helvetica, sans-serif, Helvetica',fillColor:f.Color.RED,outlineColor:f.Color.SKYBLUE,outlineWidth:1,style:f.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-9e3)),pixelOffset:new f.Cartesian2(36,36)},polygon:new f.PolygonGraphics({hierarchy:e,material:n.material,show:n.fill}),polyline:{positions:t,clampToGround:!0,width:n.outlineWidth,material:n.outlineMaterial,show:n.outline}};n.entity=n.viewer.entities.add(r),n.entity.layerId=n.layerId},_showModifyRegion2Map:function(){var n=this;n._startModify(),n._computeTempPositions();var e=new f.CallbackProperty(function(){return n.tempPositions},!1),t=new f.CallbackProperty(function(){if(1<n.tempPositions.length){var e=[].concat(n.tempPositions),t=n.tempPositions[0];return e.push(t),e}return null},!1);null==n.material&&(n.material=f.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.outlineMaterial&&(n.outlineMaterial=new f.PolylineDashMaterialProperty({dashLength:16,color:f.Color.fromCssColorString("#00f").withAlpha(.7)}));var i=n.tempPositions.length,r={position:n.tempPositions[i-1],label:{text:n._getMeasureTip(n.tempPositions),font:'16px "微软雅黑", Arial, Helvetica, sans-serif, Helvetica',fillColor:f.Color.RED,outlineColor:f.Color.SKYBLUE,outlineWidth:1,style:f.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-9e3)),pixelOffset:new f.Cartesian2(36,36)},polygon:new f.PolygonGraphics({hierarchy:e,material:n.material,show:n.fill}),polyline:{positions:t,clampToGround:!0,width:n.outlineWidth,material:n.outlineMaterial,show:n.outline}};n.entity=n.viewer.entities.add(r),n.entity.layerId=n.layerId;for(var o=n.tempPositions,a=0;a<o.length;a++){0==a%2?n._createPoint(o[a],a):n._createMidPoint(o[a],a)}},_updateModifyAnchors:function(e){var t=this,n=t.tempPositions[e],i=null,r=null,o=t.tempPositions.length;r=0==e?(i=t.tempPositions[o-1],t.tempPositions[e+1]):e==o-1?(i=t.tempPositions[e-1],t.tempPositions[0]):(i=t.tempPositions[e-1],t.tempPositions[e+1]);var a=t._computeCenterPotition(i,n),s=t._computeCenterPotition(n,r);t.tempPositions.splice(e,1,a,n,s),t._clearAnchors(t.layerId);for(var l=t.tempPositions,c=0;c<l.length;c++){0==c%2?t._createPoint(l[c],c):t._createMidPoint(l[c],c)}},_updateNewMidAnchors:function(e){var t=this;if(null!=e&&null!=e){var n=null,i=null,r=null,o=null,a=t.tempPositions.length;o=0==e?(n=a-2,i=a-1,r=e+1,e+2):e==a-2?(n=e-2,i=e-1,r=a-1,0):(n=e-2,i=e-1,r=e+1,e+2);var s=t.tempPositions[n],l=t.tempPositions[e],c=t.tempPositions[o],u=t._computeCenterPotition(s,l),f=t._computeCenterPotition(c,l);t.tempPositions[i]=u,t.tempPositions[r]=f,t.markers[i].position.setValue(u),t.markers[r].position.setValue(f)}},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-500)),heightReference:f.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_createMidPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIcon,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-500)),heightReference:f.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="mid_anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length,n=e[0],i=e[t-1];0==this._isSimpleXYZ(n,i)&&(e.push(n),t+=1),this.tempPositions=[];for(var r=1;r<t;r++){var o=e[r-1],a=e[r],s=this._computeCenterPotition(o,a);this.tempPositions.push(o),this.tempPositions.push(s)}},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new f.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_getMeasureTip:function(e){var t=this._computeLineDis2d(e),n=this._computeLineDis3d(e),i="直线距离："+(t=t.toFixed(3))+"千米\n 曲面距离："+(n=n.toFixed(3))+"千米";2<e.length&&(i+="\n 平面面积："+this._computeArea(e).toFixed(3)+"平方千米");return i},_computeDis2d:function(e,t){var n=Math.pow(e.x-t.x,2),i=Math.pow(e.y-t.y,2);return Math.sqrt(n+i)/1e3},_computeDis3d:function(e,t){var n=Math.pow(e.x-t.x,2),i=Math.pow(e.y-t.y,2),r=Math.pow(e.z-t.z,2);return Math.sqrt(n+i+r)/1e3},_computeLineDis2d:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],r=e[n];t+=this._computeDis2d(i,r)}return t},_computeLineDis3d:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],r=e[n];t+=this._computeDis3d(i,r)}return t},_cartesian2LonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);return{lon:f.Math.toDegrees(t.longitude),lat:f.Math.toDegrees(t.latitude),alt:Math.ceil(t.height)}},_computeArea:function(e){for(var t=[],n=0;n<e.length;n++){var i=this._cartesian2LonLat(e[n]);t.push([i.lon,i.lat])}t.push(t[0]);var r=turf.polygon([t]);return turf.area(r)/1e3/1e3},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var s=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(s.callback){for(var e=[],t=0;t<s.tempPositions.length;t+=2){var n=s.tempPositions[t];e.push(n)}s.positions=e,s.clear(),layer.close(s.toolBarIndex);var i=s._computeLineDis2d(e),r=s._computeLineDis3d(e),o=s._computeArea(e),a={dis2d:i=i.toFixed(3),dis3d:r=r.toFixed(3),area:o=o.toFixed(3)};s.callback(e,a)}}),t.unbind("click").bind("click",function(){s.clear(),layer.close(s.toolBarIndex)})},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"GlobePolygonMeasure"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobePolygonMeasure=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,u,t,n){if((0,n.defined)(u)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+a.prototype.dragIcon,this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPolyline:function(e,t,n){this.positions=e,this.okHandler=t,this.cancelHandler=n,this._showModifyPolyline2Map()},startDrawPolyline:function(e,t){var o=this;o.okHandler=e,o.cancelHandler=t,o.positions=[];var a=null;o.drawHandler=new u.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=o.camera.getPickRay(t);if(u.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(u.defined(i)){0==o.positions.length&&(o.positions.push(i),a=o._createPoint(i,-1),o._showPolyline2Map()),o.positions.push(i);var r=o.positions.length-2;o._createPoint(i,r)}}}},u.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(u.defined(t))if(o.positions.length<1)o.tooltip.showAt(t,"<p>选择起点</p>");else{var n="<p>点击添加下一个点</p>";2<o.positions.length&&(n+="<p>右键结束绘制</p>"),o.tooltip.showAt(t,n);var i=o.camera.getPickRay(t);if(u.defined(i)){var r=o.scene.globe.pick(i,o.scene);u.defined(r)&&(a.position.setValue(r),o.positions.pop(),o.positions.push(r))}}},u.ScreenSpaceEventType.MOUSE_MOVE),o.drawHandler.setInputAction(function(e){o.positions.length<3||(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),o.clear(),o._showModifyPolyline2Map())},u.ScreenSpaceEventType.RIGHT_CLICK)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new u.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.tempPositions[r]=i,s.tooltip.setVisible(!1),"mid_anchor"==c.flag&&s._updateModifyAnchors(r)}else{var o=s.scene.pick(t);if(!u.defined(o))return;if(!u.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId)return;if("anchor"!=a.flag&&"mid_anchor"!=a.flag)return;l=!0,"anchor"==(c=a).flag&&s.tooltip.showAt(t,"<p>移动控制点</p>"),"mid_anchor"==a.flag&&s.tooltip.showAt(t,"<p>移动创建新的控制点</p>")}}}},u.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(u.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i)){var r=c.oid;"anchor"==c.flag?(c.position.setValue(i),s.tempPositions[r]=i,s._updateNewMidAnchors(r)):"mid_anchor"==c.flag&&(c.position.setValue(i),s.tempPositions[r]=i)}}}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_showPolyline2Map:function(){var e=this;null==e.material&&(e.material=new u.PolylineGlowMaterialProperty({glowPower:.25,color:u.Color.fromCssColorString("#00f").withAlpha(.9)}));var t={polyline:{positions:new u.CallbackProperty(function(){return e.positions},!1),clampToGround:!0,width:8,material:e.material}};e.entity=e.viewer.entities.add(t),e.entity.layerId=e.layerId},_showModifyPolyline2Map:function(){var e=this;e._startModify(),e._computeTempPositions();var t=new u.CallbackProperty(function(){return e.tempPositions},!1);null==e.material&&(e.material=new u.PolylineGlowMaterialProperty({glowPower:.25,color:u.Color.fromCssColorString("#00f").withAlpha(.9)}));var n={polyline:{positions:t,clampToGround:!0,width:8,material:e.material}};e.entity=e.viewer.entities.add(n),e.entity.layerId=e.layerId;for(var i=e.tempPositions,r=0;r<i.length;r++){0==r%2?e._createPoint(i[r],r):e._createMidPoint(i[r],r)}},_updateModifyAnchors:function(e){var t=this,n=t.tempPositions.length;if(0!=e&&e!=n-1){var i=t.tempPositions[e],r=t.tempPositions[e-1],o=t.tempPositions[e+1],a=t._computeCenterPotition(r,i),s=t._computeCenterPotition(i,o);t.tempPositions.splice(e,1,a,i,s),t._clearAnchors(t.layerId);for(var l=t.tempPositions,c=0;c<l.length;c++){0==c%2?t._createPoint(l[c],c):t._createMidPoint(l[c],c)}}},_updateNewMidAnchors:function(e){var t=this;if(null!=e&&null!=e){var n=null,i=null,r=null,o=null,a=t.tempPositions.length;o=0==e?(n=a-2,i=a-1,r=e+1,e+2):e==a-2?(n=e-2,i=e-1,r=a-1,0):(n=e-2,i=e-1,r=e+1,e+2);var s=t.tempPositions[n],l=t.tempPositions[e],c=t.tempPositions[o];if(0==e){var u=t._computeCenterPotition(c,l);t.tempPositions[r]=u,t.markers[r].position.setValue(u)}else if(e==a-1){var f=t._computeCenterPotition(s,l);t.tempPositions[i]=f,t.markers[i].position.setValue(f)}else{f=t._computeCenterPotition(s,l),u=t._computeCenterPotition(c,l);t.tempPositions[i]=f,t.tempPositions[r]=u,t.markers[i].position.setValue(f),t.markers[r].position.setValue(u)}}},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.sid=e.sid,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_createMidPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIcon,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="mid_anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length;this.tempPositions=[];for(var n=1;n<t;n++){var i=e[n-1],r=e[n];i.sid=n-1,r.sid=n;var o=this._computeCenterPotition(i,r);this.tempPositions.push(i),this.tempPositions.push(o)}var a=e[t-1];this.tempPositions.push(a)},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new u.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var n=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(n.okHandler){var e=n._getPositionsWithSid(),t=n._getLonLats(e);n.clear(),layer.close(n.toolBarIndex),n.positions=e,n.okHandler(e,t)}else n.clear(),layer.close(n.toolBarIndex)}),t.unbind("click").bind("click",function(){n.clear(),layer.close(n.toolBarIndex),n.cancelHandler&&n.cancelHandler()})},_getPositionsWithSid:function(){var e=[],t=this.viewer.entities.values;if(null==t||t.length<1)return e;for(var n=0;n<t.length;n++){var i=t[n];if(i.layerId==this.layerId&&"anchor"==i.flag){var r=i.position.getValue((new Date).getTime());r.sid=i.sid,r.oid=i.oid,e.push(r)}}return e.sort(function(e,t){return e.oid>t.oid?1:e.oid==t.oid?0:-1}),e},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height,height:t.height};return n.lon=u.Math.toDegrees(n.lon),n.lat=u.Math.toDegrees(n.lat),n},_getLonLats:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=this._getLonLat(i);r.sid=i.sid,r.oid=i.oid,t.push(r)}return t},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"GlobePolylineDrawer"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobePolylineDrawer=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,f,t,n){if((0,n.defined)(f)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,callback:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+a.prototype.dragIcon,this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPolyline:function(e,t){this.positions=e,this.callback=t,this._showModifyPolyline2Map()},startDrawPolyline:function(e){var a=this;a.callback=e,a.positions=[];var s=null;a.drawHandler=new f.ScreenSpaceEventHandler(a.canvas),a.drawHandler.setInputAction(function(e){var t=e.position;if(f.defined(t)){var n=a.camera.getPickRay(t);if(f.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(f.defined(i)){0==a.positions.length&&(a.positions.push(i),s=a._createPoint(i,-1),a._showPolyline2Map()),a.positions.push(i);var r=a.positions.length-2;a._createPoint(i,r),a.entity.position=i;var o=a._getMeasureTip(a.positions);a.entity.label.text=o}}}},f.ScreenSpaceEventType.LEFT_CLICK),a.drawHandler.setInputAction(function(e){var t=e.endPosition;if(f.defined(t))if(a.positions.length<1)a.tooltip.showAt(t,"<p>选择起点</p>");else{var n="<p>点击添加下一个点</p>";2<a.positions.length&&(n+="<p>右键结束绘制</p>"),a.tooltip.showAt(t,n);var i=a.camera.getPickRay(t);if(f.defined(i)){var r=a.scene.globe.pick(i,a.scene);if(f.defined(r)){s.position.setValue(r),a.positions.pop(),a.positions.push(r),a.entity.position.setValue(r);var o=a._getMeasureTip(a.positions);a.entity.label.text=o}}}},f.ScreenSpaceEventType.MOUSE_MOVE),a.drawHandler.setInputAction(function(e){a.positions.length<3||(a.positions.pop(),a.viewer.entities.remove(s),a.tooltip.setVisible(!1),a.clear(),a._showModifyPolyline2Map())},f.ScreenSpaceEventType.RIGHT_CLICK)},_startModify:function(){var l=this,c=!1,u=null;l.drawHandler&&(l.drawHandler.destroy(),l.drawHandler=null),l._showToolBar(),l.modifyHandler=new f.ScreenSpaceEventHandler(l.canvas),l.modifyHandler.setInputAction(function(e){var t=e.position;if(f.defined(t)){var n=l.camera.getPickRay(t);if(f.defined(n)){var i=l.scene.globe.pick(n,l.scene);if(f.defined(i))if(c){c=!1,u.position.setValue(i);var r=u.oid;l.tempPositions[r]=i,l.tooltip.setVisible(!1),"mid_anchor"==u.flag&&l._updateModifyAnchors(r),l.entity.position.setValue(i);var o=l._getMeasureTip(l.tempPositions);l.entity.label.text=o}else{var a=l.scene.pick(t);if(!f.defined(a))return;if(!f.defined(a.id))return;var s=a.id;if(s.layerId!=l.layerId)return;if("anchor"!=s.flag&&"mid_anchor"!=s.flag)return;c=!0,"anchor"==(u=s).flag&&l.tooltip.showAt(t,"<p>移动控制点</p>"),"mid_anchor"==s.flag&&l.tooltip.showAt(t,"<p>移动创建新的控制点</p>")}}}},f.ScreenSpaceEventType.LEFT_CLICK),l.modifyHandler.setInputAction(function(e){if(c){var t=e.endPosition;if(f.defined(t)){l.tooltip.showAt(t,"<p>移动控制点</p>");var n=l.camera.getPickRay(t);if(f.defined(n)){var i=l.scene.globe.pick(n,l.scene);if(f.defined(i)){var r=u.oid;"anchor"==u.flag?(u.position.setValue(i),l.tempPositions[r]=i,l._updateNewMidAnchors(r)):"mid_anchor"==u.flag&&(u.position.setValue(i),l.tempPositions[r]=i),l.entity.position.setValue(i);var o=l._getMeasureTip(l.tempPositions);l.entity.label.text=o}}}}},f.ScreenSpaceEventType.MOUSE_MOVE)},_showPolyline2Map:function(){var e=this;null==e.material&&(e.material=new f.PolylineGlowMaterialProperty({glowPower:.25,color:f.Color.fromCssColorString("#00f").withAlpha(.9)}));var t=new f.CallbackProperty(function(){return e.positions},!1),n=e.positions.length,i={position:e.positions[n-1],label:{text:"",font:'16px "微软雅黑", Arial, Helvetica, sans-serif, Helvetica',fillColor:f.Color.RED,outlineColor:f.Color.SKYBLUE,outlineWidth:1,style:f.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-9e3)),pixelOffset:new f.Cartesian2(36,36)},polyline:{positions:t,clampToGround:!0,width:8,material:e.material}};e.entity=e.viewer.entities.add(i),e.entity.layerId=e.layerId},_showModifyPolyline2Map:function(){var e=this;e._startModify(),e._computeTempPositions();var t=new f.CallbackProperty(function(){return e.tempPositions},!1);null==e.material&&(e.material=new f.PolylineGlowMaterialProperty({glowPower:.25,color:f.Color.fromCssColorString("#00f").withAlpha(.9)}));var n=e.tempPositions.length,i={position:e.tempPositions[n-1],label:{text:e._getMeasureTip(e.tempPositions),font:'16px "微软雅黑", Arial, Helvetica, sans-serif, Helvetica',fillColor:f.Color.RED,outlineColor:f.Color.SKYBLUE,outlineWidth:1,style:f.LabelStyle.FILL_AND_OUTLINE,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-9e3)),pixelOffset:new f.Cartesian2(36,36)},polyline:{positions:t,clampToGround:!0,width:8,material:e.material}};e.entity=e.viewer.entities.add(i),e.entity.layerId=e.layerId;for(var r=e.tempPositions,o=0;o<r.length;o++){0==o%2?e._createPoint(r[o],o):e._createMidPoint(r[o],o)}},_updateModifyAnchors:function(e){var t=this,n=t.tempPositions.length;if(0!=e&&e!=n-1){var i=t.tempPositions[e],r=t.tempPositions[e-1],o=t.tempPositions[e+1],a=t._computeCenterPotition(r,i),s=t._computeCenterPotition(i,o);t.tempPositions.splice(e,1,a,i,s),t._clearAnchors(t.layerId);for(var l=t.tempPositions,c=0;c<l.length;c++){0==c%2?t._createPoint(l[c],c):t._createMidPoint(l[c],c)}}},_updateNewMidAnchors:function(e){var t=this;if(null!=e&&null!=e){var n=null,i=null,r=null,o=null,a=t.tempPositions.length;o=0==e?(n=a-2,i=a-1,r=e+1,e+2):e==a-2?(n=e-2,i=e-1,r=a-1,0):(n=e-2,i=e-1,r=e+1,e+2);var s=t.tempPositions[n],l=t.tempPositions[e],c=t.tempPositions[o];if(0==e){var u=t._computeCenterPotition(c,l);t.tempPositions[r]=u,t.markers[r].position.setValue(u)}else if(e==a-1){var f=t._computeCenterPotition(s,l);t.tempPositions[i]=f,t.markers[i].position.setValue(f)}else{f=t._computeCenterPotition(s,l),u=t._computeCenterPotition(c,l);t.tempPositions[i]=f,t.tempPositions[r]=u,t.markers[i].position.setValue(f),t.markers[r].position.setValue(u)}}},_createPoint:function(e,t){var n={position:e,billboard:{image:this.dragIconLight,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-500)),heightReference:f.HeightReference.CLAMP_TO_GROUND}},i=this.viewer.entities.add(n);return i.oid=t,i.layerId=this.layerId,i.flag="anchor",this.markers[t]=i},_createMidPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIcon,eyeOffset:new f.ConstantProperty(new f.Cartesian3(0,0,-500)),heightReference:f.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="mid_anchor",this.markers[t]=n},_getMeasureTip:function(e){var t=this._computeLineDis2d(e),n=this._computeLineDis3d(e);return"直线距离："+(t=t.toFixed(3))+"千米\n 曲面距离："+(n=n.toFixed(3))+"千米"},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length;this.tempPositions=[];for(var n=1;n<t;n++){var i=e[n-1],r=e[n],o=this._computeCenterPotition(i,r);this.tempPositions.push(i),this.tempPositions.push(o)}var a=e[t-1];this.tempPositions.push(a)},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new f.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_computeDis2d:function(e,t){var n=Math.pow(e.x-t.x,2),i=Math.pow(e.y-t.y,2);return Math.sqrt(n+i)/1e3},_computeDis3d:function(e,t){var n=Math.pow(e.x-t.x,2),i=Math.pow(e.y-t.y,2),r=Math.pow(e.z-t.z,2);return Math.sqrt(n+i+r)/1e3},_computeLineDis2d:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],r=e[n];t+=this._computeDis2d(i,r)}return t},_computeLineDis3d:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],r=e[n];t+=this._computeDis3d(i,r)}return t},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var a=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(a.callback){for(var e=[],t=0;t<a.tempPositions.length;t+=2){var n=a.tempPositions[t];e.push(n)}a.positions=e,a.clear(),layer.close(a.toolBarIndex);var i=a._computeLineDis2d(e),r=a._computeLineDis3d(e),o={dis2d:i=i.toFixed(3),dis3d:r=r.toFixed(3)};a.callback(e,o)}}),t.unbind("click").bind("click",function(){a.clear(),layer.close(a.toolBarIndex)})},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"GlobePolylineMeasure"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobePolylineMeasure=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,u,t,n){if((0,n.defined)(u)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=function(){this.init.apply(this,arguments)};a.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIconLight:"img//circle_red.png",material:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:2,extrudedHeight:0,toolBarIndex:null,layerId:"globeEntityDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIconLight=r+a.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyRectangle:function(e,t,n){this.positions=e,this.okHandler=t,this.cancelHandler=n,this._showModifyRegion2Map(),this._startModify()},startDrawRectangle:function(e,t){var a=this;a.okHandler=e,a.cancelHandler=t,a.positions=[];var s=null;a.drawHandler=new u.ScreenSpaceEventHandler(a.canvas),a.drawHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=a.camera.getPickRay(t);if(u.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(u.defined(i)){var r=a.positions.length;0==r&&(a.positions.push(i),s=a._createPoint(i,-1),a._showRegion2Map()),a.positions.push(i);var o=a.positions.length-2;a._createPoint(i,o),1<r&&(a.positions.pop(),a.viewer.entities.remove(s),a.tooltip.setVisible(!1),a._startModify())}}}},u.ScreenSpaceEventType.LEFT_CLICK),a.drawHandler.setInputAction(function(e){var t=e.endPosition;if(u.defined(t))if(a.positions.length<1)a.tooltip.showAt(t,"<p>选择起点</p>");else{a.tooltip.showAt(t,"<p>选择终点</p>");var n=a.camera.getPickRay(t);if(u.defined(n)){var i=a.scene.globe.pick(n,a.scene);u.defined(i)&&(s.position.setValue(i),a.positions.pop(),a.positions.push(i))}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new u.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.positions[r]=i,s.tooltip.setVisible(!1)}else{var o=s.scene.pick(t);if(!u.defined(o))return;if(!u.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId||"anchor"!=a.flag)return;c=a,l=!0,s.tooltip.showAt(t,"<p>移动控制点</p>")}}}},u.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(u.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i)){c.position.setValue(i);var r=c.oid;s.positions[r]=i}}}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",n},_showRegion2Map:function(){var n=this;null==n.material&&(n.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.outlineMaterial&&(n.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#00f").withAlpha(.7)}));var e=new u.CallbackProperty(function(){return 1<n.positions.length?u.Rectangle.fromCartesianArray(n.positions):null},!1),t=new u.CallbackProperty(function(){if(1<n.positions.length){var e=u.Rectangle.fromCartesianArray(n.positions),t=[e.west,e.north,e.east,e.north,e.east,e.south,e.west,e.south,e.west,e.north];return u.Cartesian3.fromRadiansArray(t)}return null},!1),i={rectangle:{coordinates:e,material:n.material,show:n.fill},polyline:{positions:t,clampToGround:!0,width:n.outlineWidth,material:n.outlineMaterial,show:n.outline}};0<n.extrudedHeight&&(i.rectangle.extrudedHeight=n.extrudedHeight,i.rectangle.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,i.rectangle.closeTop=!0,i.rectangle.closeBottom=!0,i.rectangle.outline=!1,i.rectangle.outlineWidth=0),n.entity=n.viewer.entities.add(i),n.entity.layerId=n.layerId},_showModifyRegion2Map:function(){var n=this;null==n.material&&(n.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==n.outlineMaterial&&(n.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#00f").withAlpha(.7)}));var e=new u.CallbackProperty(function(){return 1<n.positions.length?u.Rectangle.fromCartesianArray(n.positions):null},!1),t=new u.CallbackProperty(function(){if(1<n.positions.length){var e=u.Rectangle.fromCartesianArray(n.positions),t=[e.west,e.north,e.east,e.north,e.east,e.south,e.west,e.south,e.west,e.north];return u.Cartesian3.fromRadiansArray(t)}return null},!1),i={rectangle:{coordinates:e,material:n.material,show:n.fill},polyline:{positions:t,clampToGround:!0,width:n.outlineWidth,material:n.outlineMaterial,show:n.outline}};0<n.extrudedHeight&&(i.rectangle.extrudedHeight=n.extrudedHeight,i.rectangle.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,i.rectangle.closeTop=!0,i.rectangle.closeBottom=!0,i.rectangle.outline=!1,i.rectangle.outlineWidth=0),n.entity=n.viewer.entities.add(i),n.entity.layerId=n.layerId;for(var r=n.positions,o=0;o<r.length;o++)n._createPoint(r[o],o)},_computeRectangle:function(e,t){this.ellipsoid.cartesianToCartographic(e),this.ellipsoid.cartesianToCartographic(t);return u.Rectangle.fromCartesianArray([e,t])},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var e=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var t=$("#shapeEditContainer button[name='btnOK']"),n=$("#shapeEditContainer button[name='btnCancel']");t.unbind("click").bind("click",function(){e.clear(),layer.close(e.toolBarIndex),e.okHandler&&e.okHandler(e.positions)}),n.unbind("click").bind("click",function(){e.clear(),layer.close(e.toolBarIndex),e.cancelHandler&&e.cancelHandler()})},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},CLASS_NAME:"GlobeRectangleDrawer"};var s=e.SWHZ;i(s)||(s={}),(e.SWHZ=s).GlobeRectangleDrawer=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(p,d,e,t,n,i,r){var h=t.defined;if(h(d)){var v=t.isString,m=t.isNum,o=t.isJson,g=t.isArray,y=t.createParam,u=p.Position,f=p.Euler;n.createObj(function(){this._objectManager={groups:{},layers:[],baseLayer:null,defaultTerrain:null,noHeight:new d.EllipsoidTerrainProvider({ellipsoid:this.viewer.scene.mapProjection.ellipsoid})},0<this.viewer.imageryLayers.length&&(this._objectManager.baseLayer=this.viewer.imageryLayers.get(0)),this._objectManager.defaultTerrain=this.viewer.terrainProvider}),p.Constants.ObjectType={Model:1,ImageryLayer:2,d3Tiles:3};var a={},s=function(e,t){var n=t.viewer,i=t._objectManager;switch(e.type){case p.Constants.ObjectType.ImageryLayer:n.imageryLayers.remove(e.obj,!0);for(var r=i.layers.length;r--;)if(i.layers[r].groupName===e.groupName&&i.layers[r].id===e.id){i.layers.splice(r,1);break}break;case p.Constants.ObjectType.d3Tiles:n.scene.primitives.remove(e.obj);break;default:n.entities.remove(e.obj)}},_=function(e,t,n,i){var r=i._objectManager;return o(r.groups[e])||(r.groups[e]={}),h(r.groups[e][t])&&(s(r.groups[e][t],i),r.groups[e][t]=null),h(n)&&(r.groups[e][t]=n),!0};a.delObj=function(e,t){var n=this._objectManager;if(!v(e)||!h(n.groups[e]))return!1;if(v(t)&&h(n.groups[e][t]))s(n.groups[e][t],this),n.groups[e][t]=void 0;else{if(v(t))return!1;for(var i in n.groups[e])n.groups[e].hasOwnProperty(i)&&h(n.groups[e][i])&&(s(n.groups[e][i],this),n.groups[e][i]=void 0)}return!0},a.addModel=function(e,t,n,i,r,o,a,s){if(!v(e))return!1;if(!v(t))return!1;if(!v(n))return!1;if(!h(i,u)||!m(i.x))return!1;if(!h(r,f)||!m(r.heading))return!1;m(o)||(o=128),m(a)||(a=2e4);var l=d.Transforms.headingPitchRollQuaternion(i.cartesian,r.hpr),c=this.viewer.entities.add({id:t,name:n,position:i.cartesian,orientation:l,model:{uri:n,minimumPixelSize:o,maximumScale:a}});return s&&(this.viewer.trackedEntity=c),_(e,t,{type:p.Constants.ObjectType.Model,obj:c},this),c},p.Constants.ImageryType={Arcgis:1,Template:2,WMS:3,Single:4,WMTS:5},a.addImageryLayer=function(e,t,n,i,r){var o=this._objectManager;h(o.baseLayer)||(o.baseLayer=this.viewer.imageryLayers.get(0));var a,s=y(r,p.Params.ImageryProvider);if(s.url=i,m(n)){if(!v(i))return!1;switch(n){case p.Constants.ImageryType.Arcgis:a=new d.ArcGisMapServerImageryProvider(s);break;case p.Constants.ImageryType.Template:a=new d.UrlTemplateImageryProvider(s);break;case p.Constants.ImageryType.WMS:a=new d.WebMapServiceImageryProvider(s);break;case p.Constants.ImageryType.Single:g(s.rectangle)&&(s.rectangle=new d.Rectangle.fromDegrees(s.rectangle[0],s.rectangle[1],s.rectangle[2],s.rectangle[3])),a=new d.SingleTileImageryProvider(s);break;case p.Constants.ImageryType.WMTS:a=new d.WebMapTileServiceImageryProvider(s)}}else{if(!h(n))return!1;a=n}var l,c,u=!1;if(v(e)&&v(t)?(a=this.viewer.imageryLayers.addImageryProvider(a),_(e,t,{type:p.Constants.ObjectType.ImageryLayer,obj:a,groupName:e,id:t},this)):(h(o.baseLayer)&&this.viewer.imageryLayers.remove(o.baseLayer,!0),a=this.viewer.imageryLayers.addImageryProvider(a,0),o.baseLayer=a,u=!0),m(s.alpha)&&(a.alpha=s.alpha),m(s.brightness)&&(a.brightness=s.brightness),u)for(l=0;l<c;++l)h(o.layers[l].groupName)&&h(o.layers[l].id)||(o.layers.splice(l,1),l-=1,c-=1);var f={groupName:u?null:e,id:u?null:t,layer:a,zindex:m(s.zindex)?s.zindex:0};for((o.layers.length<=0||f.zindex>o.layers[0].zindex)&&(o.layers.unshift(f),f=null),l=0,c=o.layers.length;l<c;++l)this.viewer.imageryLayers.raiseToTop(o.layers[l].layer),h(f)&&(l==c-1||f.zindex<=o.layers[l].zindex&&f.zindex>o.layers[l+1].zindex)&&(o.layers.splice(l+1,0,f),c+=1,f=null);return a},a.add3dTiles=function(e,t,n,i){var a=this,s=y(i,p.Params.Cesium3DTileset);s.url=n;var l=new d.Cesium3DTileset(s),r=a.viewer.scene.primitives.add(l);return!!h(r)&&(m(s.longitude)||m(s.latitude)||m(s.height)||m(s.rotate)||m(s.scale)?l.readyPromise.then(function(e){var t=d.Cartesian3.fromDegrees(m(s.longitude)?s.longitude:120.3027637,m(s.latitude)?s.latitude:46.77085937,m(s.height)?s.height:755,a.viewer.scene.mapProjection.ellipsoid),n=d.Transforms.eastNorthUpToFixedFrame(t),i=d.Matrix4.fromRotationTranslation(d.Matrix3.fromRotationZ(d.Math.toRadians(m(s.rotate)?s.rotate:0)));if(m(s.scale)){var r=s.scale,o=d.Matrix4.fromScale(new d.Cartesian3(r,r,r));d.Matrix4.multiply(n,o,n)}d.Matrix4.multiply(n,i,n),l._root.transform=n,zRR.widget.camera.flyTo({destination:d.Cartesian3.fromDegrees(longitude,latitude,height+1e3,zRR.mapProjection.ellipsoid)})}):(m(s.offsetX)||m(s.offsetY)||m(s.offsetZ)||m(s.scaleX)||m(s.scaleY)||m(s.scaleZ))&&l.readyPromise.then(function(e){var t=l._root.transform,n=[t[12],t[13],t[14],t[15]];n[0]+=m(s.offsetX)?s.offsetX:0,n[1]+=m(s.offsetY)?s.offsetY:0,n[2]+=m(s.offsetZ)?s.offsetZ:0;var i=d.Matrix4.fromArray([m(s.scaleX)?s.scaleX:1,0,0,0,0,m(s.scaleY)?s.scaleY:1,0,0,0,0,m(s.scaleZ)?s.scaleZ:1,0,0,0,0,1]),r=d.Matrix4.fromArray([t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],0,0,0,1]);d.Matrix4.multiply(i,r,r),d.Matrix4.multiply(new d.Matrix4.fromArray([1,0,0,0,0,1,0,0,0,0,1,0,n[0],n[1],n[2],n[3]]),r,r),l._root.transform=r}),_(e,t,{type:p.Constants.ObjectType.d3Tiles,obj:r,tiles:l},a),r)},a.setTerrain=function(e,t){var n=this._objectManager;if(v(e)){var i=y(t,p.Params.TerrainProvider);i.url=e,this.viewer.terrainProvider=new d.CesiumTerrainProvider(i)}else h(e)?this.viewer.terrainProvider=e:(h(n.defaultTerrain)||(n.defaultTerrain=new d.EllipsoidTerrainProvider({ellipsoid:this.viewer.scene.mapProjection.ellipsoid})),this.viewer.terrainProvider=n.defaultTerrain);return this.triggerEvent("setTerrain",[this.viewer.terrainProvider,this]),this.viewer.terrainProvider},r.objectManager=a}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,x,t,n){if((0,n.defined)(x)){var i=n.isJson,b=e.SWHZ.plotUtil,_={version:"1.0.0",createTime:"2018.6.19",author:"xupinhui"},g="doublearrow",y=.25,w=.3,P=.85,C=.15,T={headHeightFactor:.18,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,tailWidthFactor:.1,headTailFactor:.8,swallowTailFactor:1},k={tailWidthFactor:.15,neckWidthFactor:.2,headWidthFactor:.25,headAngle:Math.PI/8.5,neckAngle:Math.PI/13};_.algorithm={},_.algorithm.doubleArrow=function(e){this.connPoint=null;var t={controlPoint:this.tempPoint4=null,polygonalPoint:null};if(!((s=(this.points=e).length)<2)){if(2==s)return e;var n,i,r=this.points[0],o=this.points[1],a=this.points[2],s=e.length;this.tempPoint4=3==s?_.algorithm.getTempPoint4(r,o,a):this.points[3],this.connPoint=3==s||4==s?b.PlotUtils.mid(r,o):this.points[4],i=b.PlotUtils.isClockWise(r,o,a)?(n=_.algorithm.getArrowPoints(r,this.connPoint,this.tempPoint4,!1),_.algorithm.getArrowPoints(this.connPoint,o,a,!0)):(n=_.algorithm.getArrowPoints(o,this.connPoint,a,!1),_.algorithm.getArrowPoints(this.connPoint,r,this.tempPoint4,!0));var l=n.length,c=(l-5)/2,u=n.slice(0,c),f=n.slice(c,5+c),p=n.slice(5+c,l),d=i.slice(0,c),h=i.slice(c,5+c),v=i.slice(5+c,l);d=b.PlotUtils.getBezierPoints(d);var m=b.PlotUtils.getBezierPoints(v.concat(u.slice(1)));p=b.PlotUtils.getBezierPoints(p);var g=d.concat(h,m,f,p),y=_.algorithm.array2Dto1D(g);t.controlPoint=[r,o,a,this.tempPoint4,this.connPoint],t.polygonalPoint=x.Cartesian3.fromDegreesArray(y)}return t},_.algorithm.threeArrow=function(e){this.connPoint=null,this.tempPoint4=null;var t={controlPoint:this.tempPoint5=null,polygonalPoint:null};if(2<=(n=(this.points=e).length)){if(2==n)return e;var n,i,r,o=this.points[0],a=this.points[1],s=this.points[2];3==(n=e.length)?(this.tempPoint4=_.algorithm.getTempPoint4(o,a,s),this.tempPoint5=b.PlotUtils.mid(s,this.tempPoint4)):(this.tempPoint4=this.points[3],this.tempPoint5=this.points[4]),this.connPoint=n<6?b.PlotUtils.mid(o,a):this.points[5],r=b.PlotUtils.isClockWise(o,a,s)?(i=_.algorithm.getArrowPoints(o,this.connPoint,this.tempPoint4,!1),_.algorithm.getArrowPoints(this.connPoint,a,s,!0)):(i=_.algorithm.getArrowPoints(a,this.connPoint,s,!1),_.algorithm.getArrowPoints(this.connPoint,o,this.tempPoint4,!0));var l=i.length,c=(l-5)/2,u=i.slice(0,c),f=i.slice(c,5+c),p=i.slice(5+c,l),d=r.slice(0,c),h=r.slice(c,5+c),v=r.slice(5+c,l);d=b.PlotUtils.getBezierPoints(d);var m=b.PlotUtils.getBezierPoints(v.concat(u.slice(1)));p=b.PlotUtils.getBezierPoints(p);var g=d.concat(h,m,f,p),y=_.algorithm.array2Dto1D(g);t.controlPoint=[o,a,s,this.tempPoint4,this.tempPoint5,this.connPoint],t.polygonalPoint=x.Cartesian3.fromDegreesArray(y)}return t},_.algorithm.array2Dto1D=function(e){var t=[];return e.forEach(function(e){t.push(e[0]),t.push(e[1])}),t},_.algorithm.getArrowPoints=function(e,t,n,i){this.type=g,this.headHeightFactor=y,this.headWidthFactor=w,this.neckHeightFactor=P,this.neckWidthFactor=C;var r=b.PlotUtils.mid(e,t),o=b.PlotUtils.distance(r,n),a=b.PlotUtils.getThirdPoint(n,r,0,.3*o,!0),s=b.PlotUtils.getThirdPoint(n,r,0,.5*o,!0),l=[r,a=b.PlotUtils.getThirdPoint(r,a,b.Constants.HALF_PI,o/5,i),s=b.PlotUtils.getThirdPoint(r,s,b.Constants.HALF_PI,o/4,i),n],c=_.algorithm.getArrowHeadPoints(l,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),u=c[0],f=c[4],p=b.PlotUtils.distance(e,t)/b.PlotUtils.getBaseLength(l)/2,d=_.algorithm.getArrowBodyPoints(l,u,f,p),h=d.length,v=d.slice(0,h/2),m=d.slice(h/2,h);return v.push(u),m.push(f),(v=v.reverse()).push(t),(m=m.reverse()).push(e),v.reverse().concat(c,m)},_.algorithm.getArrowHeadPoints=function(e,t,n){this.type=g,this.headHeightFactor=y,this.headWidthFactor=w,this.neckHeightFactor=P,this.neckWidthFactor=C;var i=b.PlotUtils.getBaseLength(e)*this.headHeightFactor,r=e[e.length-1],o=(b.PlotUtils.distance(t,n),i*this.headWidthFactor),a=i*this.neckWidthFactor,s=i*this.neckHeightFactor,l=b.PlotUtils.getThirdPoint(e[e.length-2],r,0,i,!0),c=b.PlotUtils.getThirdPoint(e[e.length-2],r,0,s,!0),u=b.PlotUtils.getThirdPoint(r,l,b.Constants.HALF_PI,o,!1),f=b.PlotUtils.getThirdPoint(r,l,b.Constants.HALF_PI,o,!0);return[b.PlotUtils.getThirdPoint(r,c,b.Constants.HALF_PI,a,!1),u,r,f,b.PlotUtils.getThirdPoint(r,c,b.Constants.HALF_PI,a,!0)]},_.algorithm.getArrowBodyPoints=function(e,t,n,i){for(var r=b.PlotUtils.wholeDistance(e),o=b.PlotUtils.getBaseLength(e)*i,a=(o-b.PlotUtils.distance(t,n))/2,s=0,l=[],c=[],u=1;u<e.length-1;u++){var f=b.PlotUtils.getAngleOfThreePoints(e[u-1],e[u],e[u+1])/2,p=(o/2-(s+=b.PlotUtils.distance(e[u-1],e[u]))/r*a)/Math.sin(f),d=b.PlotUtils.getThirdPoint(e[u-1],e[u],Math.PI-f,p,!0),h=b.PlotUtils.getThirdPoint(e[u-1],e[u],f,p,!1);l.push(d),c.push(h)}return l.concat(c)},_.algorithm.getTempPoint4=function(e,t,n){var i,r,o,a=b.PlotUtils.mid(e,t),s=b.PlotUtils.distance(a,n),l=b.PlotUtils.getAngleOfThreePoints(e,a,n);return l<b.Constants.HALF_PI?(i=s*Math.sin(l),r=s*Math.cos(l),o=b.PlotUtils.getThirdPoint(e,a,b.Constants.HALF_PI,i,!1),b.PlotUtils.getThirdPoint(a,o,b.Constants.HALF_PI,r,!0)):l>=b.Constants.HALF_PI&&l<Math.PI?(i=s*Math.sin(Math.PI-l),r=s*Math.cos(Math.PI-l),o=b.PlotUtils.getThirdPoint(e,a,b.Constants.HALF_PI,i,!1),b.PlotUtils.getThirdPoint(a,o,b.Constants.HALF_PI,r,!1)):l>=Math.PI&&l<1.5*Math.PI?(i=s*Math.sin(l-Math.PI),r=s*Math.cos(l-Math.PI),o=b.PlotUtils.getThirdPoint(e,a,b.Constants.HALF_PI,i,!0),b.PlotUtils.getThirdPoint(a,o,b.Constants.HALF_PI,r,!0)):(i=s*Math.sin(2*Math.PI-l),r=s*Math.cos(2*Math.PI-l),o=b.PlotUtils.getThirdPoint(e,a,b.Constants.HALF_PI,i,!0),b.PlotUtils.getThirdPoint(a,o,b.Constants.HALF_PI,r,!1))},_.algorithm.tailedAttackArrow=function(e){e=_.algorithm.dereplication(e),this.tailWidthFactor=T.tailWidthFactor,this.swallowTailFactor=T.swallowTailFactor,this.swallowTailPnt=T.swallowTailPnt;var t={controlPoint:null,polygonalPoint:null};if(!((h=(t.controlPoint=e).length)<2)){if(2==e.length)return t.polygonalPoint=e,t;var n=e,i=n[0],r=n[1];b.PlotUtils.isClockWise(n[0],n[1],n[2])&&(i=n[1],r=n[0]);var o=[b.PlotUtils.mid(i,r)].concat(n.slice(2)),a=_.algorithm.getAttackArrowHeadPoints(o,i,r,T),s=a[0],l=a[4],c=b.PlotUtils.distance(i,r),u=b.PlotUtils.getBaseLength(o),f=u*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=b.PlotUtils.getThirdPoint(o[1],o[0],0,f,!0);var p=c/u,d=_.algorithm.getAttackArrowBodyPoints(o,s,l,p),h=d.length,v=[i].concat(d.slice(0,h/2));v.push(s);var m,g=[r].concat(d.slice(h/2,h));g.push(l),v=b.PlotUtils.getQBSplinePoints(v),g=b.PlotUtils.getQBSplinePoints(g),m=_.algorithm.array2Dto1D(v.concat(a,g.reverse(),[this.swallowTailPnt,v[0]])),t.polygonalPoint=x.Cartesian3.fromDegreesArray(m)}return t},_.algorithm.getAttackArrowHeadPoints=function(e,t,n,i){this.headHeightFactor=i.headHeightFactor,this.headTailFactor=i.headTailFactor,this.headWidthFactor=i.headWidthFactor,this.neckWidthFactor=i.neckWidthFactor,this.neckHeightFactor=i.neckHeightFactor;var r=b.PlotUtils.getBaseLength(e),o=r*this.headHeightFactor,a=e[e.length-1];r=b.PlotUtils.distance(a,e[e.length-2]);var s=b.PlotUtils.distance(t,n);o>s*this.headTailFactor&&(o=s*this.headTailFactor);var l=o*this.headWidthFactor,c=o*this.neckWidthFactor,u=(o=r<o?r:o)*this.neckHeightFactor,f=b.PlotUtils.getThirdPoint(e[e.length-2],a,0,o,!0),p=b.PlotUtils.getThirdPoint(e[e.length-2],a,0,u,!0),d=b.PlotUtils.getThirdPoint(a,f,b.Constants.HALF_PI,l,!1),h=b.PlotUtils.getThirdPoint(a,f,b.Constants.HALF_PI,l,!0);return[b.PlotUtils.getThirdPoint(a,p,b.Constants.HALF_PI,c,!1),d,a,h,b.PlotUtils.getThirdPoint(a,p,b.Constants.HALF_PI,c,!0)]},_.algorithm.getAttackArrowBodyPoints=function(e,t,n,i){for(var r=b.PlotUtils.wholeDistance(e),o=b.PlotUtils.getBaseLength(e)*i,a=(o-b.PlotUtils.distance(t,n))/2,s=0,l=[],c=[],u=1;u<e.length-1;u++){var f=b.PlotUtils.getAngleOfThreePoints(e[u-1],e[u],e[u+1])/2,p=(o/2-(s+=b.PlotUtils.distance(e[u-1],e[u]))/r*a)/Math.sin(f),d=b.PlotUtils.getThirdPoint(e[u-1],e[u],Math.PI-f,p,!0),h=b.PlotUtils.getThirdPoint(e[u-1],e[u],f,p,!1);l.push(d),c.push(h)}return l.concat(c)},_.algorithm.dereplication=function(e){var t=e[e.length-1],n=!1,i=[];return i=e.filter(function(e){if(e[0]!=t[0]&&e[1]!=t[1])return e;n=!0}),n&&i.push(t),i},_.algorithm.fineArrow=function(e,t){if(!(e.length<2||t.length<2)){var n,i,r,o,a,s,l,c,u,f,p,d,h,v=k.tailWidthFactor,m=k.neckWidthFactor,g=k.headWidthFactor,y=k.headAngle,_=k.neckAngle,w=[];return w[0]=e,w[1]=t,n=w[0],i=w[1],o=(r=b.PlotUtils.getBaseLength(w))*v,a=r*m,s=r*g,l=b.PlotUtils.getThirdPoint(i,n,b.Constants.HALF_PI,o,!0),c=b.PlotUtils.getThirdPoint(i,n,b.Constants.HALF_PI,o,!1),u=b.PlotUtils.getThirdPoint(n,i,y,s,!1),f=b.PlotUtils.getThirdPoint(n,i,y,s,!0),p=b.PlotUtils.getThirdPoint(n,i,_,a,!1),d=b.PlotUtils.getThirdPoint(n,i,_,a,!0),(h=[]).push(l[0],l[1],p[0],p[1],u[0],u[1],i[0],i[1],f[0],f[1],d[0],d[1],c[0],c[1],n[0],n[1]),x.Cartesian3.fromDegreesArray(h)}};var r=e.SWHZ;i(r)||(r={}),(e.SWHZ=r).algorithm=_}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,f,t,n,i,r,o){var u="_analysis",p=n.defined;if(p(f)){var d=n.isJson,h=n.isNum,v=e.Constants,m=r.compareDist,a=o.analysis;d(a)||(a={},e._funcs.analysis=a);var g,y,_,w,x,b,P,C,T=new f.Cartesian3(0,0,0),k=new f.Cartesian3(0,0,0),E=function(e,t,n,i){d(n)?(n.intersectPoint=null,n.billy=-1,n.inLine=!1):n={intersectPoint:null,billy:-1,inLine:!1};var r=i.viewer;k.x=t.x,k.y=t.y,k.z=t.z,(t=k).x-=e.x,t.y-=e.y,t.z-=e.z,f.Cartesian3.normalize(t,T);var o=new f.Ray(e,T),a=r.scene.pickFromRay(o,i._pickControl.noSelect),s=new f.Cartesian3(0,0,0);if(a=p(a)&&p(a.position)?a.position:null,p(r.scene.globe.pick(o,r.scene,s)))p(a)?m(s,a,e)&&(a=s):a=s;else if(!p(a))return n;n.intersectPoint=a;var l=Math.abs(t.x),c=Math.abs(t.y),u=Math.abs(t.z);return 0==l&&0==c&&0==u?n.billy=0:(n.billy=c<l&&u<l?(a.x-e.x)/t.x:l<c&&u<c?(a.y-e.y)/t.y:(a.z-e.z)/t.z,0<=n.billy&&n.billy<1&&(n.inLine=!0)),n},s=(g=p,y=h,_=E,x=new(w=f).Cartesian3(0,0,0),b=new w.Cartesian3(0,0,0),P=new w.Cartographic(0,0,0),C=new w.Cartographic(0,0,0),function(e,t,n,i,r,o){var a,s,l=this.viewer.scene.mapProjection.ellipsoid;if(g(e,w.Cartographic)&&g(t,w.Cartographic))a=e,s=t;else{if(!(y(e)&&y(t)&&y(i)&&y(r)))return null;y(n)||(n=0),y(o)||(o=0),(a=P).longitude=e/180*Math.PI,a.latitude=t/180*Math.PI,a.height=n,(s=C).longitude=i/180*Math.PI,s.latitude=r/180*Math.PI,s.height=o}l.cartographicToCartesian(a,x),l.cartographicToCartesian(s,b);var c=_(x,b,null,this);return c.inLine?(l.cartesianToCartographic(c.intersectPoint,P),{longitude:180*P.longitude/Math.PI,latitude:180*P.latitude/Math.PI,height:P.height,billy:c.billy}):null});a.singleVisual=s;a.singleVisualUI=function(o){var a=this;a.userDrawing.clearDraw(),h(o)||(o=2);var s,l,c=new f.Cartographic(0,0,0);a.addEventListener(v.EventType.MiddleClick,u,function(e,t){t.userDrawing.clearDraw(u),t.removeEventListener(v.EventType.LeftClick,u)},0),a.userDrawing.startDraw(u,[{type:v.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i,r){switch(i){case 0:r.ret={},r.ellipsoid=a.viewer.scene.mapProjection.ellipsoid,e.addEntity();break;case 1:if(l=t[n],(s=e.entities[2*n].joystick).x=l.x,s.y=l.y,s.z=l.z,n<1)break;E(t[0],l,r.ret,a),s=e.entities[2*n-1].joystick,r.ret.inLine&&(l=r.ret.intersectPoint),s.x=l.x,s.y=l.y,s.z=l.z;break;case 2:l=t[n],n<=1&&((s=r.ellipsoid).cartesianToCartographic(l,c),c.height+=o,s.cartographicToCartesian(c,t[0])),e.addEntity(),e.addEntity(),(s=e.entities[2*n].joystick).x=l.x,s.y=l.y,s.z=l.z,n<=1?((s=e.entities[2*n-1].joystick).x=l.x,s.y=l.y,s.z=l.z,l=t[0],(s=e.entities[2*(n-1)].joystick).x=l.x):((s=e.entities[2*(n-1)].joystick).x=l.x,s.y=l.y,s.z=l.z,E(e.entities[0].joystick,l,r.ret,a),s=e.entities[2*(n-1)-1].joystick,r.ret.inLine&&(l=r.ret.intersectPoint),s.x=l.x),s.y=l.y,s.z=l.z;break;case 3:if(l=t[n],(s=e.entities[2*n].joystick).x=l.x,s.y=l.y,s.z=l.z,n<1)break;E(e.entities[0].joystick,l,r.ret,a),s=e.entities[2*n-1].joystick,r.ret.inLine&&(l=r.ret.intersectPoint),s.x=l.x,s.y=l.y,s.z=l.z}}},{type:v.DrawType.Polyline,param:{clampToGround:!1,material:new f.Color(.2,.8,.2,.8)},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:break;case 1:if(n<1)break;l=r.ret.inLine?r.ret.intersectPoint:t[n],(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z;break;case 2:if(l=t[0],e.addEntity(),(s=e.entities[n-1].joystick)[0]=l.clone(),s[1]=l.clone(),(s=e.entities[n-1].joystick[0]).x=l.x,s.y=l.y,s.z=l.z,n<=1){(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z;break}s=e.entities[n-2].joystick[1],l=r.ret.inLine?r.ret.intersectPoint:t[n],s.x=l.x,s.y=l.y,s.z=l.z,(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z;break;case 3:if(n<1)break;l=r.ret.inLine?r.ret.intersectPoint:t[n],(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z}}},{type:v.DrawType.Polyline,param:{clampToGround:!1,material:new f.Color(.8,.2,.2,.5)},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:break;case 1:if(n<1)break;l=r.ret.inLine?r.ret.intersectPoint:t[n],(s=e.entities[n-1].joystick[0]).x=l.x,s.y=l.y,s.z=l.z,l=t[n],(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z;break;case 2:if(l=t[n],e.addEntity(),(s=e.entities[n-1].joystick)[0]=l.clone(),s[1]=l.clone(),(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z,n<=1){(s=e.entities[n-1].joystick[0]).x=l.x,s.y=l.y,s.z=l.z;break}(s=e.entities[n-2].joystick[1]).x=l.x,s.y=l.y,s.z=l.z,s=e.entities[n-2].joystick[0],l=r.ret.inLine?r.ret.intersectPoint:t[n],s.x=l.x,s.y=l.y,s.z=l.z;break;case 3:if(n<1)break;l=r.ret.inLine?r.ret.intersectPoint:t[n],(s=e.entities[n-1].joystick[0]).x=l.x,s.y=l.y,s.z=l.z,l=t[n],(s=e.entities[n-1].joystick[1]).x=l.x,s.y=l.y,s.z=l.z}}}],function(e,t){p(e)&&a.addEventListener(v.EventType.LeftClick,u,function(e,t){t.userDrawing.reDraw(u)},0)})}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(n,p,e,t,i,r,o){var d=t.defined;if(d(p)){var a=t.isJson,h=t.isNum,v=t.isFunc,s=o.analysis;a(s)||(s={}),(o.analysis=s).skyline=function(o,a,e,s,l){var c=this;if(h(e)||(e=64),!d(o,p.Cartographic))return!1;if(!h(a))return!1;if(!v(l))return!1;if(!h(s))return!1;var u=-1,f=-1;return c.getTerrainTriangles(180*o.longitude/Math.PI,180*o.latitude/Math.PI,o.height,a,e,null,function(r){c.depthMap(r.vertices,r.indices,r.matrix.clone().inverse(4),.05,!0,function(e,t){if(0<=e)return f=Math.round(.5*e),void(u!==f&&l(u=f));n.calculator.skyline(t,s,a,function(e,t){if(0<=e)return f=Math.round(.5*e)+50,void(u!==f&&l(u=f));var n=[],i=[];i.push(c.skyline.getGeometryLine(t,r.matrix,a,5)),i.push(c.skyline.getGeometryLine(t,r.matrix,0,0)),i.push(c.simpleGraphic.sphere(o,a,s)),c.visualizer.lineAppearance(3,1,new p.Color(1,1,0,1),new p.Color(1,0,0,1)),n.push(c.visualizer.lineObj(i[0])),c.visualizer.lineAppearance(3,1,new p.Color(0,1,1,1),new p.Color(0,0,1,1)),n.push(c.visualizer.lineObj(i[1])),c.visualizer.lineAppearance(1.5,0,new p.Color(1,1,1,.1),p.Color.WHITE),n.push(c.visualizer.lineObj(i[2])),l(-1,n,i)})})}),!0}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){if((0,i.defined)(t)){var s=i.isJson,l=new i.compute.matrix4(!0),c=a.analysis;s(c)||(c={}),(a.analysis=c).slopeMap=function(e,t,n,i,r){var o=this;return o.getTerrainTriangles(180*e.longitude/Math.PI,180*e.latitude/Math.PI,e.height,t,n,null,function(e){o.calculator.slopeMap(e.vertices,e.indices,e.matrix,l,2*t/n*2*1.4142135623730951,function(e,t){if(0<=e)r(e);else{var n=o.calculator.slopeMapGeometry(t,i);r(-1,t.image,n)}})}),!0}}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){if((0,i.defined)(t)){var s=i.isJson,l=i.compute.matrix4,c=a.analysis;s(c)||(c={}),(a.analysis=c).visualAnalysis=function(e,t,n,i,r,o){var a=this;i-=90;var s=new l(!0);s.setRotate(0,i),s.translate(r,0,0),a.getTerrainTriangles(180*e.longitude/Math.PI,180*e.latitude/Math.PI,e.height,t,n,null,function(e){a.calculator.visualAnalysis(e.vertices,e.indices,e.matrix,s,1,t,75,1,function(e,t){if(0<=e)o(e);else{var n=a.calculator.visualAnalysisGeometry(t);o(-1,t.data,n)}},!1)})}}}(0,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i,r,o,a){var s=i.selfPath,l=[{id:"1",name:"xl1",index:0,position:new e.Position({longitude:119.96635,latitude:36.77212,height:9e4}),euler:new e.Euler({heading:0,pitch:-40,roll:0}),duration:2},{id:"2",name:"xl2",index:1,position:new e.Position({longitude:80.96635,latitude:120.77212,height:9e4}),euler:new e.Euler({heading:0,pitch:-40,roll:0}),duration:4},{id:"3",name:"xl3",index:2,position:new e.Position({longitude:80.96635,latitude:120.77212,height:9e4}),euler:new e.Euler({heading:0,pitch:-40,roll:0}),duration:4},{id:"4",name:"xl4",index:3,position:new e.Position({longitude:60.96635,latitude:90.77212,height:9e4})},{id:"5",name:"xl5",index:4},{id:"6",name:"xl6",index:5}],c=function(e){e._bookmark.bookmarkList.style.display="block"},u=function(e){e._bookmark.bookmarkList.style.display="none"};r.createObj(function(){var e=function(e){var t=e.divId+"_bookmark_button",n=e.divId+"_bookmark_list",i=document.getElementById(t);if(i)i.style.display="block";else{(i=document.createElement("div")).id=t,i.style.position="absolute",i.style.right="164px",i.style.top="12px",i.style.cursor="pointer",i.style.backgroundColor="#000000",i.style.height="30px",i.style.width="30px",i.style.lineHeight="30px",i.style.textAlign="center",i.style.opacity="0.8";var r="<img style='width: 25px;height: 25px; opacity: 1' src='"+s+"img/bookmark.png'>";i.innerHTML=r,document.getElementById(e.divId).getElementsByClassName("cesium-viewer")[0].append(i),document.getElementById(t).onclick=function(){c(e)}}var o=document.getElementById(n);if(o)o.style.display="block";else{(o=document.createElement("div")).id=n,o.style.backgroundColor="#000000",o.style.position="absolute",o.style.top="47px",o.style.right="8px",o.style.width="200px",o.style.height="300px",o.style.opacity="0.7";var a="<ul style='height:30px;width:100%;color:blue;list-style:none;padding-left: 12px;margin-right: 0px;'><li style='display: inline-block;'>特定场景</li><li style='display: inline-block;margin-left: 80px'><button id='"+e.divId+"special_scene_bookmark_close'>X</li></ul><table style='width:100%' id='"+e.divId+"_special_scene_bookmarkList'></table>";o.innerHTML=a,document.getElementById(e.divId).getElementsByClassName("cesium-viewer")[0].appendChild(o),document.getElementById(e.divId+"special_scene_bookmark_close").onclick=function(){u(e)}}return[i,o]}(this);this._bookmark={bookmarkBtn:e[0],bookmarkList:e[1]},this.initParams.bookmark?this.bookmark.show():this.bookmark.hide()});var f={show:function(){var e=this._bookmark;e.bookmarkBtn.style.display="block",e.bookmarkList.style.display="none"},hide:function(){var e=this._bookmark;e.bookmarkBtn.style.display="none",e.bookmarkList.style.display="none"},fillData:function(e){if(!e)return null;var t="",n=this,i=document.getElementById(this.divId+"_special_scene_bookmarkList");i.innerHTML=t;var r,o;e=e;if(l.length){for(r=0;r<e.length;r++)t=t+"<tr><td style='color:#d4d4d4;text-align: center'>"+(o=e[r]).index+"</td><td style='color:#d4d4d4;text-align: center'>"+o.name+"</td><td style='color:#d4d4d4;text-align:center'><button id='"+this.divId+"look_at"+o.id+"' position='"+o.position+"'style='text-align: center'>查看</button></td></tr>";for(i.innerHTML=t,r=0;r<e.length;r++)o=e[r],document.getElementById(this.divId+"look_at"+o.id).onclick=function(e){return function(){p(e.position,e.euler,e.duration,n)}}(o)}}},p=function(e,t,n,i){i.camOper.set(e,t,1)};a.bookmark=f}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(n,d,i,e,t,r,o){var a=e.defined;if(a(d)){var s,l,c,u,f,p=e.isJson,h=e.isNum,v=e.isFunc,m=e.compute.matrix4,g=r.getFaMatrix,y=(l=new(s=d).Cartographic,c=new s.Cartographic,u=new s.Cartesian3,f=new s.Cartesian3,function(e,t,n){return n.cartesianToCartographic(e,l),n.cartesianToCartographic(t,c),l.height=0,c.height=0,n.cartographicToCartesian(l,u),n.cartographicToCartesian(c,f),Math.sqrt(Math.pow(u.x-f.x,2)+Math.pow(u.y-f.y,2)+Math.pow(u.z-f.z,2))}),_=o.interaction;p(_)||(_={}),(o.interaction=_).circle=function(f,l,s){if(!v(s))return i("Interaction","参数3(reFunc)不合法","interaction\\circle.js",38),!1;(!h(f)||f<0)&&(f=0),(!h(l)||l<=0)&&(l=1e3);var c=this,e=c.userDrawing,t=n.Constants,u=!1,p=c.viewer.scene.mapProjection.ellipsoid;e.clearDraw();return e.startDraw("_interaction",[{type:t.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i,r){var o,a;switch(i){case 0:r.ellipsoid=p,e.addEntity();break;case 1:o=e.entities[n].joystick,a=t[n],o.x=a.x,o.y=a.y,o.z=a.z;break;case 2:if(1<n&&!u)return s(u=!0,t[0],r.distance),c.userDrawing.stopDraw(),c.userDrawing.clearDraw(),!0;r.modelMatrix=new m(!0),g(t[0],p,r.modelMatrix,!0),o=e.entities[n-1].joystick,a=t[n],o.x=a.x,o.y=a.y,o.z=a.z,e.addEntity(),(o=e.entities[n].joystick).x=a.x,o.y=a.y,o.z=a.z}}},{type:t.DrawType.Label,param:{pixelOffset:new d.Cartesian2(0,-30)},realTimeFunc:function(e,t,n,i,r){var o,a;switch(i){case 0:r.realPos=new d.Cartesian3,e.addEntity(),e.entities[0].joystick[1]="中心点";break;case 1:var s;if(o=e.entities[n].joystick[0],a=r.realPos,0<n)s=y(t[0],t[1],r.ellipsoid),f<=s&&s<=l&&(r.distance=s,e.entities[n].joystick[1]="半径: "+r.distance.toFixed(2)+"米",a.x=(t[0].x+t[1].x)/2,a.y=(t[0].y+t[1].y)/2,a.z=(t[0].z+t[1].z)/2);else a.x=t[0].x,a.y=t[0].y,a.z=t[0].z;o.x=a.x,o.y=a.y,o.z=a.z;break;case 2:e.addEntity(),a=t[0],(o=e.entities[0].joystick[0]).x=a.x,o.y=a.y,o.z=a.z,r.distance=f,e.entities[1].joystick[1]="半径："+f.toFixed(2)+"米",(o=e.entities[1].joystick[0]).x=a.x,o.y=a.y,o.z=a.z}}},{type:t.DrawType.Polyline,param:{clampToGround:!0,arcType:d.ArcType.GEODESIC},realTimeFunc:function(e,t,n,i){var r,o;switch(i){case 0:e.addEntity();break;case 1:if(n<1)break;r=e.entities[0].joystick[1],o=t[1],r.x=o.x,r.y=o.y,r.z=o.z;break;case 2:o=t[0],e.entities[0].joystick[0]=o.clone(),e.entities[0].joystick[1]=o.clone()}}},{type:t.DrawType.Polyline,param:{clampToGround:!0,arcType:d.ArcType.GEODESIC},realTimeFunc:function(e,t,n,i,r){var o,a,s,l,c,u;switch(i){case 0:for(e.addEntity(),o=[],r.circle=o,l=10*Math.PI/180,s=36;s--;)(a=new d.Cartesian3).x=0,a.y=Math.cos(s*l),a.z=Math.sin(s*l),o.push(a);break;case 1:if(n<1)break;for(a=r.circle,o=e.entities[0].joystick,s=a.length;s--;)c=o[s],u=a[s],c.x=u.x*r.distance,c.y=u.y*r.distance,c.z=u.z*r.distance,r.modelMatrix.mvecX(c);c=o[a.length],u=o[0],c.x=u.x,c.y=u.y,c.z=u.z;break;case 2:for(a=r.circle,o=e.entities[0].joystick,s=a.length;s--;)(c=(u=a[s]).clone()).x*=f,c.y*=f,c.z*=f,r.modelMatrix.mvecX(c),o.push(c);o[r.circle.length]=o[0].clone()}}}],function(e,t,n){u||(u=!0,!a(e)||t<1?s(!1):s(!0,e[0],n.distance),c.userDrawing.stopDraw(),c.userDrawing.clearDraw())}),!0}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(n,v,i,e,t,r,o){var a=e.defined;if(a(v)){var s,l,c,u,f,p=e.isJson,m=e.isNum,g=e.isFunc,y=e.compute.matrix4,_=e.compute.funcAng,w=r.getFaMatrix,x=(l=new(s=v).Cartographic,c=new s.Cartographic,u=new s.Cartesian3,f=new s.Cartesian3,function(e,t,n){return n.cartesianToCartographic(e,l),n.cartesianToCartographic(t,c),l.height=0,c.height=0,n.cartographicToCartesian(l,u),n.cartographicToCartesian(c,f),Math.sqrt(Math.pow(u.x-f.x,2)+Math.pow(u.y-f.y,2)+Math.pow(u.z-f.z,2))}),d=o.interaction;p(d)||(d={}),(o.interaction=d).fan=function(p,l,d,c){if(!g(c))return i("Interaction","参数4(reFunc)不合法","interaction\\fan.js",39),!1;(!m(p)||p<0)&&(p=0),(!m(l)||l<=0)&&(l=1e3),(!m(d)||d<=0)&&(d=75),d=d*Math.PI/180;var u=this,e=u.userDrawing,t=n.Constants,f=!1,h=u.viewer.scene.mapProjection.ellipsoid;e.clearDraw();return e.startDraw("_interaction",[{type:t.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i,r){var o,a;switch(i){case 0:r.ellipsoid=h,e.addEntity();break;case 1:o=e.entities[n].joystick,a=t[n],o.x=a.x,o.y=a.y,o.z=a.z;var s=[a.x,a.y,a.z,1];0<n&&(r.inverseModelMatrix.mvec(s),r.heading=_(s[1],s[2]),r.rotateMatrix.setRotate(0,r.heading,!0),r.heading=180*r.heading/Math.PI);break;case 2:if(1<n&&!f)return c(f=!0,t[0],r.distance,r.heading),u.userDrawing.stopDraw(),u.userDrawing.clearDraw(),!0;r.modelMatrix=new y(!0),w(t[0],h,r.modelMatrix,!0),r.inverseModelMatrix=r.modelMatrix.clone().inverse(4),r.rotateMatrix=new y(!0),o=e.entities[n-1].joystick,a=t[n],o.x=a.x,o.y=a.y,o.z=a.z,e.addEntity(),(o=e.entities[n].joystick).x=a.x,o.y=a.y,o.z=a.z}}},{type:t.DrawType.Label,param:{pixelOffset:new v.Cartesian2(0,-30)},realTimeFunc:function(e,t,n,i,r){var o,a;switch(i){case 0:r.realPos=new v.Cartesian3,e.addEntity(),e.entities[0].joystick[1]="中心点";break;case 1:var s;if(o=e.entities[n].joystick[0],a=r.realPos,0<n)s=x(t[0],t[1],r.ellipsoid),p<=s&&s<=l&&(r.distance=s,e.entities[n].joystick[1]="半径: "+r.distance.toFixed(2)+"米",a.x=(t[0].x+t[1].x)/2,a.y=(t[0].y+t[1].y)/2,a.z=(t[0].z+t[1].z)/2);else a.x=t[0].x,a.y=t[0].y,a.z=t[0].z;o.x=a.x,o.y=a.y,o.z=a.z;break;case 2:e.addEntity(),a=t[0],(o=e.entities[0].joystick[0]).x=a.x,o.y=a.y,o.z=a.z,r.distance=p,e.entities[1].joystick[1]="半径："+p.toFixed(2)+"米",(o=e.entities[1].joystick[0]).x=a.x,o.y=a.y,o.z=a.z}}},{type:t.DrawType.Polyline,param:{clampToGround:!0,arcType:v.ArcType.GEODESIC},realTimeFunc:function(e,t,n,i){var r,o;switch(i){case 0:e.addEntity();break;case 1:if(n<1)break;r=e.entities[0].joystick[1],o=t[1],r.x=o.x,r.y=o.y,r.z=o.z;break;case 2:o=t[0],e.entities[0].joystick[0]=o.clone(),e.entities[0].joystick[1]=o.clone()}}},{type:t.DrawType.Polyline,param:{clampToGround:!0,arcType:v.ArcType.GEODESIC},realTimeFunc:function(e,t,n,i,r){var o,a,s,l,c;switch(i){case 0:e.addEntity(),o=[],r.circle=o,a=new v.Cartesian3(0,0,0),o.push(a);var u,f=-d/2;for(s=10;s--;)u=f+d/9*s,(a=new v.Cartesian3).x=0,a.y=Math.cos(u),a.z=Math.sin(u),o.push(a);a=new v.Cartesian3(0,0,0),o.push(a);break;case 1:if(n<1)break;for(a=r.circle,o=e.entities[0].joystick,s=a.length;s--;)l=o[s],c=a[s],l.x=c.x*r.distance,l.y=c.y*r.distance,l.z=c.z*r.distance,r.rotateMatrix.mvecX(l),r.modelMatrix.mvecX(l);l=o[a.length],c=o[0],l.x=c.x,l.y=c.y,l.z=c.z;break;case 2:for(a=r.circle,o=e.entities[0].joystick,s=a.length;s--;)(l=(c=a[s]).clone()).x*=p,l.y*=p,l.z*=p,r.rotateMatrix.mvecX(l),r.modelMatrix.mvecX(l),o.push(l);o[r.circle.length]=o[0].clone()}}}],function(e,t,n){f||(f=!0,!a(e)||t<1?c(!1):c(!0,e[0],n.distance,n.heading),u.userDrawing.stopDraw(),u.userDrawing.clearDraw())}),!0}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(n,a,s,e,t,i,r){var l=e.defined;if(l(a)){var o=e.isJson,c=e.isFunc,u=r.interaction;o(u)||(u={}),(r.interaction=u).polygon=function(i){if(!c(i))return s("Interaction","参数1(reFunc)不合法","interaction\\polygon.js",27),!1;var r=this,e=r.userDrawing,t=n.Constants,o=!1;e.clearDraw();return e.startDraw("_interaction",[{type:t.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i){var r,o;switch(i){case 0:e.addEntity();break;case 1:r=e.entities[n].joystick,o=t[n],r.x=o.x,r.y=o.y,r.z=o.z;break;case 2:r=e.entities[n-1].joystick,o=t[n],r.x=o.x,r.y=o.y,r.z=o.z,e.addEntity(),(r=e.entities[n].joystick).x=o.x,r.y=o.y,r.z=o.z}}},{type:t.DrawType.Polyline,param:{clampToGround:!0,arcType:a.ArcType.GEODESIC},realTimeFunc:function(e,t,n,i){var r,o;switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new a.Cartesian3(0,0,0));break;case 1:o=e.entities[0].joystick[n],r=t[n],o.x=r.x,o.y=r.y,o.z=r.z;break;case 2:o=e.entities[0].joystick[n-1],r=t[n],o.x=r.x,o.y=r.y,o.z=r.z,e.entities[0].joystick[n]=new a.Cartesian3(r.x,r.y,r.z);break;case 3:o=e.entities[0].joystick[n],r=t[n],o.x=r.x,o.y=r.y,o.z=r.z,0<n&&(e.entities[0].joystick[n+1]=e.entities[0].joystick[0].clone())}}},{type:t.DrawType.Polygon,param:{perPositionHeight:!1,heightReference:a.HeightReference.CLAMP_TO_GROUND},realTimeFunc:function(e,t,n,i){var r,o;switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new a.Cartesian3(0,0,0));break;case 1:o=e.entities[0].joystick[n],r=t[n],o.x=r.x,o.y=r.y,o.z=r.z;break;case 2:o=e.entities[0].joystick[n-1],r=t[n],o.x=r.x,o.y=r.y,o.z=r.z,e.entities[0].joystick[n]=new a.Cartesian3(r.x,r.y,r.z);break;case 3:o=e.entities[0].joystick[n],r=t[n],o.x=r.x,o.y=r.y,o.z=r.z}}}],function(e,t,n){o||(o=!0,!l(e)||t<1?i(!1):i(!0,function(e){for(var t=[],n=e.length;n--;)t.unshift(e[n].z),t.unshift(e[n].y),t.unshift(e[n].x);return t}(e)),r.userDrawing.stopDraw(),r.userDrawing.clearDraw())}),!0}}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,h,t,n,i,r,o){var f="_measure",p=n.defined;if(p(h)){var v=n.isNum,d=n.isBool,m=r.getFaMatrix,a=n.compute.matrix4,g=r.funcAng,y=r.distance,c=r.getBoxCenter,u=r.calcArea,_=e.Constants,w=new a,s={stop:function(){this.userDrawing.stopDraw(f)},clear:function(){this.userDrawing.clearDraw()},point:function(o){var a,s,l=this;l.userDrawing.clearDraw(),l.addEventListener(_.EventType.MiddleClick,f,function(e,t){t.userDrawing.clearDraw(f),t.removeEventListener(_.EventType.LeftClick,f)},0),l.userDrawing.startDraw(f,[{type:_.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i,r){switch(i){case 0:r.ellipsoid=l.viewer.scene.mapProjection.ellipsoid,r.cartographic=new h.Cartographic(0,0,0),r.longitude=0,r.latitude=0,r.height=0,e.addEntity();break;case 1:a=e.entities[n].joystick,s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,r.ellipsoid.cartesianToCartographic(s,r.cartographic),a=r.cartographic,r.longitude=180*a.longitude/Math.PI,r.latitude=180*a.latitude/Math.PI,r.height=a.height;break;case 2:a=e.entities[n-1].joystick,s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,e.addEntity(),(a=e.entities[n].joystick).x=s.x,a.y=s.y,a.z=s.z,r.ellipsoid.cartesianToCartographic(s,r.cartographic),a=r.cartographic,r.longitude=180*a.longitude/Math.PI,r.latitude=180*a.latitude/Math.PI,r.height=a.height,o(r.longitude,r.latitude,r.height);break;case 3:a=e.entities[n].joystick,s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,r.ellipsoid.cartesianToCartographic(s,r.cartographic),a=r.cartographic,r.longitude=180*a.longitude/Math.PI,r.latitude=180*a.latitude/Math.PI,r.height=a.height,o(r.longitude,r.latitude,r.height)}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(-100,-30),horizontalOrigin:h.HorizontalOrigin.LEFT},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="高度:0米";break;case 1:s=t[n],(a=e.entities[n].joystick)[1]="高度:"+Math.round(100*r.height)/100+"米",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z;break;case 2:e.addEntity(),s=t[n],(a=e.entities[n-1].joystick)[1]="高度:"+Math.round(100*r.height)/100+"米",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z,(a=e.entities[n].joystick)[1]="高度:"+Math.round(100*r.height)/100+"米",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z;break;case 3:s=t[n],(a=e.entities[n].joystick)[1]="高度:"+Math.round(100*r.height)/100+"米",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(-100,-90),horizontalOrigin:h.HorizontalOrigin.LEFT},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="经度:0°";break;case 1:s=t[n],(a=e.entities[n].joystick)[1]="经度:"+Math.round(1e6*r.longitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z;break;case 2:e.addEntity(),s=t[n],(a=e.entities[n-1].joystick)[1]="经度:"+Math.round(1e6*r.longitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z,(a=e.entities[n].joystick)[1]="经度:"+Math.round(1e6*r.longitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z;break;case 3:s=t[n],(a=e.entities[n].joystick)[1]="经度:"+Math.round(1e6*r.longitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(-100,-60),horizontalOrigin:h.HorizontalOrigin.LEFT},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="纬度:0°";break;case 1:s=t[n],(a=e.entities[n].joystick)[1]="纬度:"+Math.round(1e6*r.latitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z;break;case 2:e.addEntity(),s=t[n],(a=e.entities[n-1].joystick)[1]="纬度:"+Math.round(1e6*r.latitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z,(a=e.entities[n].joystick)[1]="纬度:"+Math.round(1e6*r.latitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z;break;case 3:s=t[n],(a=e.entities[n].joystick)[1]="纬度:"+Math.round(1e6*r.latitude)/1e6+"°",(a=a[0]).x=s.x,a.y=s.y,a.z=s.z}}}],function(e,t){p(e)&&l.addEventListener(_.EventType.LeftClick,f,function(e,t){t.userDrawing.reDraw(f)},0)})}};s.ddgc=function(o,a,s){var l,c,u=this;u.userDrawing.clearDraw(),v(o)||(o=2),d(s)||(s=!0),u.addEventListener(_.EventType.MiddleClick,f,function(e,t){t.userDrawing.clearDraw(f),t.removeEventListener(_.EventType.LeftClick,f)},0),u.userDrawing.startDraw(f,[{type:_.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i,r){switch(i){case 0:r.ellipsoid=u.viewer.scene.mapProjection.ellipsoid,r.cartographic=[new h.Cartographic(0,0,0),new h.Cartographic(0,0,0)],e.addEntity();break;case 1:l=e.entities[n].joystick,c=t[n],l.x=c.x,l.y=c.y,l.z=c.z;break;case 2:n<2?(e.addEntity(),(l=e.entities[n].joystick).x=c.x,l.y=c.y,l.z=c.z,l=r.cartographic[0],r.ellipsoid.cartesianToCartographic(c,l),l.height+=o,a(180*l.longitude/Math.PI,180*l.latitude/Math.PI,l.height,n-1),c=t[0],r.ellipsoid.cartographicToCartesian(l,c),(l=e.entities[0].joystick).x=c.x,l.y=c.y,l.z=c.z):(c=t[n],(l=e.entities[n-1].joystick).x=c.x,l.y=c.y,l.z=c.z,l=r.cartographic[n-1],r.ellipsoid.cartesianToCartographic(c,l),a(180*l.longitude/Math.PI,180*l.latitude/Math.PI,l.height,n-1),u.userDrawing.stopDraw(f),u.addEventListener(_.EventType.LeftClick,f,function(e,t){t.removeEventListener(_.EventType.LeftClick,f),t.userDrawing.reDraw(f)},0),s&&(l=r.cartographic[0],c=r.cartographic[1],function(e,t,n,i,r,o,a,s){var l=s.viewer.scene.mapProjection.ellipsoid,c=new h.Cartesian3.fromDegrees(e,t,n,l),u=new h.Cartesian3.fromDegrees(i,r,o,l),f={heading:0,pitch:0,roll:0},p=new h.Cartographic(e*Math.PI/180,t*Math.PI/180,0);m(p,l,w),w.inverse(4);var d=[u.x-c.x,u.y-c.y,u.z-c.z];w.mvec(d),f.pitch=Math.asin(d[0]/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])),f.heading=-(g(d[1],d[2])-Math.PI/2),f={destination:c,orientation:f},v(a)&&(f.duration=a,s.viewer.camera.flyTo(f)),f.orientation.heading,Math.PI,f.orientation.pitch,Math.PI}(180*l.longitude/Math.PI,180*l.latitude/Math.PI,l.height,180*c.longitude/Math.PI,180*c.latitude/Math.PI,c.height,2,u)))}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(0,-30)},realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="观察点";break;case 1:c=t[n],(l=e.entities[n].joystick[0]).x=c.x,l.y=c.y,l.z=c.z;break;case 2:e.addEntity(),c=t[n],(l=e.entities[n].joystick)[1]="目标点",(l=l[0]).x=c.x,l.y=c.y,l.z=c.z,n<2&&(c=t[0]),(l=e.entities[n-1].joystick[0]).x=c.x,l.y=c.y,l.z=c.z}}}],function(e,t){p(e)&&u.addEventListener(_.EventType.LeftClick,f,function(e,t){t.userDrawing.reDraw(f)},0)})},s.line=function(e){var n=this;d(e)||(e=!1),n.userDrawing.clearDraw();var r,o,a={},s=0;n.addEventListener(_.EventType.MiddleClick,f,function(e,t){t.userDrawing.clearDraw(f),t.removeEventListener(_.EventType.LeftClick,f)},0),n.userDrawing.startDraw(f,[{type:_.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity();break;case 1:r=e.entities[n].joystick,o=t[n],r.x=o.x,r.y=o.y,r.z=o.z;break;case 2:r=e.entities[n-1].joystick,o=t[n],r.x=o.x,r.y=o.y,r.z=o.z,e.addEntity(),(r=e.entities[n].joystick).x=o.x,r.y=o.y,r.z=o.z;break;case 3:r=e.entities[n].joystick,o=t[n],r.x=o.x,r.y=o.y,r.z=o.z}}},{type:_.DrawType.Polyline,param:{clampToGround:e},realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new h.Cartesian3(0,0,0));break;case 1:r=e.entities[0].joystick[n],o=t[n],r.x=o.x,r.y=o.y,r.z=o.z;break;case 2:r=e.entities[0].joystick[n-1],o=t[n],r.x=o.x,r.y=o.y,r.z=o.z,e.entities[0].joystick[n]=new h.Cartesian3(o.x,o.y,o.z);break;case 3:r=e.entities[0].joystick[n],o=t[n],r.x=o.x,r.y=o.y,r.z=o.z}}},{type:_.DrawType.Label,param:null,realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity(),s=0,e.entities[0].joystick[1]="0米";break;case 1:a.len=n+1,c(t,a,e.entities[0].joystick[0]),0<n&&(e.entities[0].joystick[1]=(s+y(t[n-1],t[n])).toFixed(2)+"米");break;case 2:a.len=n+1,c(t,a,e.entities[0].joystick[0]),1<n&&(s+=y(t[n-2],t[n-1])),e.entities[0].joystick[1]=s.toFixed(2)+"米";break;case 3:a.len=n+1,c(t,a,e.entities[0].joystick[0]),0<n&&(s+=y(t[n-1],t[n])),e.entities[0].joystick[1]=s.toFixed(2)+"米"}}},{type:_.DrawType.Label,param:null,realTimeFunc:function(e,t,n,i){switch(i){case 0:break;case 1:if(n<1)break;(r=e.entities[n-1].joystick)[1]=Math.round(100*y(t[n-1],t[n]))/100+"米",r=r[0],o=t[n-1],r.x=o.x,r.y=o.y,r.z=o.z,o=t[n],r.x=(r.x+o.x)/2,r.y=(r.y+o.y)/2,r.z=(r.z+o.z)/2;break;case 2:e.addEntity(),1<n&&((r=e.entities[n-2].joystick)[1]=Math.round(100*y(t[n-2],t[n-1]))/100+"米",r=r[0],o=t[n-2],r.x=o.x,r.y=o.y,r.z=o.z,o=t[n-1],r.x=(r.x+o.x)/2,r.y=(r.y+o.y)/2,r.z=(r.z+o.z)/2),(r=e.entities[n-1].joystick)[1]="0米",r=r[0],o=t[n],r.x=o.x,r.y=o.y,r.z=o.z;break;case 3:if(n<1)break;(r=e.entities[n-1].joystick)[1]=Math.round(100*y(t[n-1],t[n]))/100+"米",r=r[0],o=t[n-1],r.x=o.x,r.y=o.y,r.z=o.z,o=t[n],r.x=(r.x+o.x)/2,r.y=(r.y+o.y)/2,r.z=(r.z+o.z)/2}}}],function(e,t){p(e)&&n.addEventListener(_.EventType.LeftClick,f,function(e,t){t.userDrawing.reDraw(f)},0)})},s.area=function(e){var n=this,o=n.viewer.scene.mapProjection.ellipsoid;d(e)||(e=!0),n.userDrawing.clearDraw();var a,s,l={};n.addEventListener(_.EventType.MiddleClick,f,function(e,t){t.userDrawing.clearDraw(f),t.removeEventListener(_.EventType.LeftClick,f)},0),n.userDrawing.startDraw(f,[{type:_.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity();break;case 1:a=e.entities[n].joystick,s=t[n],a.x=s.x,a.y=s.y,a.z=s.z;break;case 2:a=e.entities[n-1].joystick,s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,e.addEntity(),(a=e.entities[n].joystick).x=s.x,a.y=s.y,a.z=s.z;break;case 3:a=e.entities[n].joystick,s=t[n],a.x=s.x,a.y=s.y,a.z=s.z}}},{type:_.DrawType.Polyline,param:{clampToGround:e},realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new h.Cartesian3(0,0,0));break;case 1:a=e.entities[0].joystick[n],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z;break;case 2:a=e.entities[0].joystick[n-1],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,e.entities[0].joystick[n]=new h.Cartesian3(s.x,s.y,s.z);break;case 3:a=e.entities[0].joystick[n],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,0<n&&(e.entities[0].joystick[n+1]=e.entities[0].joystick[0].clone())}}},{type:_.DrawType.Polygon,param:{perPositionHeight:!e,heightReference:e?h.HeightReference.CLAMP_TO_GROUND:h.HeightReference.NONE},realTimeFunc:function(e,t,n,i){switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new h.Cartesian3(0,0,0));break;case 1:a=e.entities[0].joystick[n],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z;break;case 2:a=e.entities[0].joystick[n-1],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,e.entities[0].joystick[n]=new h.Cartesian3(s.x,s.y,s.z);break;case 3:a=e.entities[0].joystick[n],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z}}},{type:_.DrawType.Label,param:null,realTimeFunc:function(e,t,n,i,r){switch(i){case 0:r.ellipsoid=o,r.cartesians=[new h.Cartesian3(0,0,0)],e.addEntity(),e.entities[0].joystick[1]="0平方公里";break;case 1:l.len=n+1,c(t,l,e.entities[0].joystick[0]),1<n&&(a=r.cartesians[n],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,r.mtx.mvecX(a),e.entities[0].joystick[1]=Math.round(u(r.cartesians)/1e4)/100+"平方公里");break;case 2:1==n&&(r.mtx=m(t[n],r.ellipsoid,null),r.mtx.inverse(4)),a=r.cartesians[n-1],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,r.mtx.mvecX(a),r.cartesians.push(a.clone()),l.len=n+1,c(t,l,e.entities[0].joystick[0]),2<n&&(e.entities[0].joystick[1]=Math.round(u(r.cartesians)/1e4)/100+"平方公里");break;case 3:a=r.cartesians[n],s=t[n],a.x=s.x,a.y=s.y,a.z=s.z,r.mtx.mvecX(a),l.len=n+1,c(t,l,e.entities[0].joystick[0]),1<n&&(e.entities[0].joystick[1]=Math.round(u(r.cartesians)/1e4)/100+"平方公里")}}}],function(e,t){p(e)&&n.addEventListener(_.EventType.LeftClick,f,function(e,t){t.userDrawing.reDraw(f)},0)})},s.heightAngle=function(){var n=this;n.userDrawing.clearDraw();var o,a,s,l,c,u=n.viewer.scene.mapProjection.ellipsoid;n.addEventListener(_.EventType.MiddleClick,f,function(e,t){t.userDrawing.clearDraw(f),t.removeEventListener(_.EventType.LeftClick,f)},0),n.userDrawing.startDraw(f,[{type:_.DrawType.Point,param:null,realTimeFunc:function(e,t,n,i,r){switch(i){case 0:r.ellipsoid=u,r.pos1=new h.Cartographic(0,0,0),r.pos2=new h.Cartographic(0,0,0),r.pts=[new h.Cartesian3(0,0,0),new h.Cartesian3(0,0,0),new h.Cartesian3(0,0,0)],r.hDistance=0,r.vDistance=0,e.addEntity();break;case 1:c=0<n?2:0,a=t[n],(o=e.entities[c].joystick).x=a.x,o.y=a.y,o.z=a.z,(o=r.pts[c]).x=a.x,o.y=a.y,o.z=a.z,0<n&&(r.ellipsoid.cartesianToCartographic(a,r.pos2),r.pos2.longitude=r.pos1.longitude,r.pos2.latitude=r.pos1.latitude,a=r.pts[1],r.ellipsoid.cartographicToCartesian(r.pos2,a),(o=e.entities[1].joystick).x=a.x,o.y=a.y,o.z=a.z);break;case 2:if(1<n)break;e.addEntity(),e.addEntity(),a=t[n],r.ellipsoid.cartesianToCartographic(a,r.pos1),(o=e.entities[0].joystick).x=a.x,o.y=a.y,o.z=a.z,(o=e.entities[1].joystick).x=a.x,o.y=a.y,o.z=a.z,(o=e.entities[2].joystick).x=a.x,o.y=a.y,o.z=a.z,(o=r.pts[0]).x=a.x,o.y=a.y,o.z=a.z,(o=r.pts[1]).x=a.x,o.y=a.y,o.z=a.z,(o=r.pts[2]).x=a.x,o.y=a.y,o.z=a.z;break;case 3:if(n<1)break;a=t[n],(o=e.entities[2].joystick).x=a.x,o.y=a.y,o.z=a.z,r.ellipsoid.cartesianToCartographic(a,r.pos2),r.pos2.longitude=r.pos1.longitude,r.pos2.latitude=r.pos1.latitude,a=r.pts[1],r.ellipsoid.cartographicToCartesian(r.pos2,a),(o=e.entities[1].joystick).x=a.x,o.y=a.y,o.z=a.z}}},{type:_.DrawType.Polyline,param:{clampToGround:!1},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new h.Cartesian3(0,0,0));break;case 1:n<=0?(a=t[n],(o=e.entities[0].joystick[0]).x=a.x):(a=r.pts[1],(o=e.entities[0].joystick[1]).x=a.x,o.y=a.y,o.z=a.z,a=r.pts[2],(o=e.entities[0].joystick[2]).x=a.x),o.y=a.y,o.z=a.z;break;case 2:if(1<n)break;a=r.pts[0],(o=e.entities[0].joystick[0]).x=a.x,o.y=a.y,o.z=a.z,(o=e.entities[0].joystick)[1]=o[0].clone(),o[2]=o[0].clone(),o[3]=o[0].clone();break;case 3:if(n<1)break;a=r.pts[1],(o=e.entities[0].joystick[1]).x=a.x,o.y=a.y,o.z=a.z,a=r.pts[2],(o=e.entities[0].joystick[2]).x=a.x,o.y=a.y,o.z=a.z}}},{type:_.DrawType.Polygon,param:{perPositionHeight:!0,heightReference:h.HeightReference.NONE},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick.push(new h.Cartesian3(0,0,0));break;case 1:n<=0?(a=t[n],(o=e.entities[0].joystick[0]).x=a.x):(a=r.pts[1],(o=e.entities[0].joystick[1]).x=a.x,o.y=a.y,o.z=a.z,a=r.pts[2],(o=e.entities[0].joystick[2]).x=a.x),o.y=a.y,o.z=a.z;break;case 2:if(1<n)break;a=r.pts[0],(o=e.entities[0].joystick[0]).x=a.x,o.y=a.y,o.z=a.z,(o=e.entities[0].joystick)[1]=o[0].clone(),o[2]=o[0].clone();break;case 3:if(n<1)break;a=r.pts[1],(o=e.entities[0].joystick[1]).x=a.x,o.y=a.y,o.z=a.z,a=r.pts[2],(o=e.entities[0].joystick[2]).x=a.x,o.y=a.y,o.z=a.z}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(0,-20)},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="";break;case 1:if(n<1)break;o=e.entities[0].joystick,s=r.pts[1],l=r.pts[2],r.hDistance=y(s,l),o[1]="水平:"+Math.round(100*r.hDistance)/100+"米",(o=o[0]).x=(s.x+l.x)/2,o.y=(s.y+l.y)/2,o.z=(s.z+l.z)/2;break;case 2:break;case 3:if(n<1)break;o=e.entities[0].joystick,s=r.pts[1],l=r.pts[2],r.hDistance=y(s,l),o[1]="水平:"+Math.round(100*r.hDistance)/100+"米",(o=o[0]).x=(s.x+l.x)/2,o.y=(s.y+l.y)/2,o.z=(s.z+l.z)/2}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(0,0)},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="";break;case 1:if(n<1)break;o=e.entities[0].joystick,s=r.pts[0],l=r.pts[1],r.vDistance=y(s,l),o[1]="垂直:"+Math.round(100*r.vDistance)/100+"米",(o=o[0]).x=(s.x+l.x)/2,o.y=(s.y+l.y)/2,o.z=(s.z+l.z)/2;break;case 2:break;case 3:if(n<1)break;o=e.entities[0].joystick,s=r.pts[0],l=r.pts[1],r.vDistance=y(s,l),o[1]="垂直:"+Math.round(100*r.vDistance)/100+"米",(o=o[0]).x=(s.x+l.x)/2,o.y=(s.y+l.y)/2,o.z=(s.z+l.z)/2}}},{type:_.DrawType.Label,param:{pixelOffset:new h.Cartesian2(0,-30)},realTimeFunc:function(e,t,n,i,r){switch(i){case 0:e.addEntity(),e.entities[0].joystick[1]="";break;case 1:if(n<1)break;o=e.entities[0].joystick,s=r.pts[2],l=180*Math.atan(r.vDistance/r.hDistance)/Math.PI,v(l)||(l=0),r.pos1.height<r.pos2.height&&(l=-l),o[1]="仰角:"+Math.round(100*l)/100+"°",(o=o[0]).x=s.x,o.y=s.y,o.z=s.z;break;case 2:break;case 3:if(n<1)break;o=e.entities[0].joystick,s=r.pts[2],l=180*Math.atan(r.vDistance/r.hDistance)/Math.PI,v(l)||(l=0),r.pos1.height<r.pos2.height&&(l=-l),o[1]="仰角:"+Math.round(100*l)/100+"°",(o=o[0]).x=s.x,o.y=s.y,o.z=s.z}}}],function(e,t){p(e)&&n.addEventListener(_.EventType.LeftClick,f,function(e,t){t.userDrawing.reDraw(f)},0)})},o.measure=s}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,u,t,n){if((0,n.defined)(u)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=e.SWHZ.algorithm,s=function(){this.init.apply(this,arguments)};s.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:2,extrudedHeight:0,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+s.prototype.dragIcon,this.dragIconLight=r+s.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyStraightArrow:function(e,t,n){var i=[];i.push(e[7]),i.push(e[3]),this.positions=i,this.okHandler=t,this.cancelHandler=n,this._showModifyRegion2Map()},startDrawStraightArrow:function(e,t){var a=this;a.okHandler=e,a.cancelHandler=t,a.positions=[];var s=null;a.drawHandler=new u.ScreenSpaceEventHandler(a.canvas),a.drawHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=a.camera.getPickRay(t);if(u.defined(n)){var i=a.scene.globe.pick(n,a.scene);if(u.defined(i)){var r=a.positions.length;0==r&&(a.positions.push(i),s=a._createPoint(i,-1),a._showRegion2Map()),a.positions.push(i);var o=a.positions.length-2;a._createPoint(i,o),1<r&&(a.positions.pop(),a.viewer.entities.remove(s),a.tooltip.setVisible(!1),a._startModify())}}}},u.ScreenSpaceEventType.LEFT_CLICK),a.drawHandler.setInputAction(function(e){var t=e.endPosition;if(u.defined(t))if(a.positions.length<1)a.tooltip.showAt(t,"<p>选择起点</p>");else{a.tooltip.showAt(t,"<p>选择终点</p>");var n=a.camera.getPickRay(t);if(u.defined(n)){var i=a.scene.globe.pick(n,a.scene);u.defined(i)&&(s.position.setValue(i),a.positions.pop(),a.positions.push(i))}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new u.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.positions[r]=i,s.tooltip.setVisible(!1)}else{var o=s.scene.pick(t);if(!u.defined(o))return;if(!u.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId||"anchor"!=a.flag)return;c=a,l=!0,s.tooltip.showAt(t,"<p>移动控制点</p>")}}}},u.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(u.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i)){c.position.setValue(i);var r=c.oid;s.positions[r]=i}}}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_showRegion2Map:function(){var o=this;null==o.material&&(o.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==o.outlineMaterial&&(o.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#f00").withAlpha(.7)}));var e=new u.CallbackProperty(function(){if(o.positions.length<2)return null;var e=o.positions[0],t=o.positions[1];if(o._isSimpleXYZ(e,t))return null;var n=o._getLonLat(e),i=o._getLonLat(t);return a.algorithm.fineArrow([n.lon,n.lat],[i.lon,i.lat])},!1),t=new u.CallbackProperty(function(){if(o.positions.length<2)return null;var e=o.positions[0],t=o.positions[1];if(o._isSimpleXYZ(e,t))return null;var n=o._getLonLat(e),i=o._getLonLat(t),r=a.algorithm.fineArrow([n.lon,n.lat],[i.lon,i.lat]);return r.push(r[0]),r},!1),n={polygon:new u.PolygonGraphics({hierarchy:e,material:o.material,show:o.fill}),polyline:{positions:t,clampToGround:!0,width:o.outlineWidth,material:o.outlineMaterial,show:o.outline}};0<o.extrudedHeight&&(n.polygon.extrudedHeight=o.extrudedHeight,n.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,n.polygon.closeTop=!0,n.polygon.closeBottom=!0),o.entity=o.viewer.entities.add(n),o.entity.layerId=o.layerId},_showModifyRegion2Map:function(){var o=this;o._startModify(),o._computeTempPositions();var e=new u.CallbackProperty(function(){if(o.positions.length<2)return null;var e=o.positions[0],t=o.positions[1];if(o._isSimpleXYZ(e,t))return null;var n=o._getLonLat(e),i=o._getLonLat(t);return a.algorithm.fineArrow([n.lon,n.lat],[i.lon,i.lat])},!1),t=new u.CallbackProperty(function(){if(o.positions.length<2)return null;var e=o.positions[0],t=o.positions[1];if(o._isSimpleXYZ(e,t))return null;var n=o._getLonLat(e),i=o._getLonLat(t),r=a.algorithm.fineArrow([n.lon,n.lat],[i.lon,i.lat]);return r.push(r[0]),r},!1);null==o.material&&(o.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==o.outlineMaterial&&(o.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#f00").withAlpha(.7)}));var n={polygon:new u.PolygonGraphics({hierarchy:e,material:o.material,show:o.fill}),polyline:{positions:t,clampToGround:!0,width:o.outlineWidth,material:o.outlineMaterial,show:o.outline}};0<o.extrudedHeight&&(n.polygon.extrudedHeight=o.extrudedHeight,n.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,n.polygon.closeTop=!0,n.polygon.closeBottom=!0),o.entity=o.viewer.entities.add(n),o.entity.layerId=o.layerId;for(var i=o.positions,r=0;r<i.length;r++)o._createPoint(i[r],r)},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length,n=e[0],i=e[t-1];0==this._isSimpleXYZ(n,i)&&(e.push(n),t+=1),this.tempPositions=[];for(var r=1;r<t;r++){var o=e[r-1],a=e[r],s=this._computeCenterPotition(o,a);this.tempPositions.push(o),this.tempPositions.push(s)}},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new u.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var o=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(o.clear(),layer.close(o.toolBarIndex),o.okHandler){var e=o.positions[0],t=o.positions[1],n=o._getLonLat(e),i=o._getLonLat(t),r=a.algorithm.fineArrow([n.lon,n.lat],[i.lon,i.lat]);o.okHandler(r)}}),t.unbind("click").bind("click",function(){o.clear(),layer.close(o.toolBarIndex),o.cancelHandler&&o.cancelHandler()})},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height};return n.lon=u.Math.toDegrees(n.lon),n.lat=u.Math.toDegrees(n.lat),n},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"PlotStraightArrowDrawer"};var l=e.SWHZ;i(l)||(l={}),(e.SWHZ=l).PlotStraightArrowDrawer=s}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,u,t,n){if((0,n.defined)(u)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=e.SWHZ.algorithm,s=function(){this.init.apply(this,arguments)};s.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:2,extrudedHeight:0,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+s.prototype.dragIcon,this.dragIconLight=r+s.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyAttackArrow:function(e,t,n){for(var i=[],r=0;r<e.length;r++){var o=e[r],a=u.Cartesian3.fromDegrees(o[0],o[1]);i.push(a)}this.positions=i,this.okHandler=t,this.cancelHandler=n,this._showModifyRegion2Map()},startDrawAttackArrow:function(e,t){var o=this;o.okHandler=e,o.cancelHandler=t,o.positions=[];var a=null;o.drawHandler=new u.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=o.camera.getPickRay(t);if(u.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(u.defined(i)){0==o.positions.length&&(o.positions.push(i),a=o._createPoint(i,-1),o._showRegion2Map()),o.positions.push(i);var r=o.positions.length-2;o._createPoint(i,r)}}}},u.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(u.defined(t))if(o.positions.length<1)o.tooltip.showAt(t,"<p>选择起点</p>");else{o.tooltip.showAt(t,"<p>新增控制点</p><p>右键结束绘制</p>");var n=o.camera.getPickRay(t);if(u.defined(n)){var i=o.scene.globe.pick(n,o.scene);u.defined(i)&&(a.position.setValue(i),o.positions.pop(),o.positions.push(i))}}},u.ScreenSpaceEventType.MOUSE_MOVE),o.drawHandler.setInputAction(function(e){o.positions.length<2||(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),o._startModify())},u.ScreenSpaceEventType.RIGHT_CLICK),o.drawHandler.setInputAction(function(e){o.positions.length<2||(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),o._startModify())},u.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new u.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.positions[r]=i,s.tooltip.setVisible(!1)}else{var o=s.scene.pick(t);if(!u.defined(o))return;if(!u.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId||"anchor"!=a.flag)return;c=a,l=!0,s.tooltip.showAt(t,"<p>移动控制点</p>")}}}},u.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(u.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i)){c.position.setValue(i);var r=c.oid;s.positions[r]=i}}}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_showRegion2Map:function(){var i=this;null==i.material&&(i.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==i.outlineMaterial&&(i.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#f00").withAlpha(.7)}));var e=new u.CallbackProperty(function(){if(i.positions.length<2)return null;var e=i._getLonLatArr(i.positions),t=a.algorithm.tailedAttackArrow(e),n=t.polygonalPoint;t.controlPoint;return null==n||n.length<3?null:n},!1),t=new u.CallbackProperty(function(){if(i.positions.length<2)return null;var e=i._getLonLatArr(i.positions),t=a.algorithm.tailedAttackArrow(e).polygonalPoint;if(null==t||t.length<3)return null;var n=t[0];return t.push(n),t},!1),n={polygon:new u.PolygonGraphics({hierarchy:e,material:i.material,show:i.fill}),polyline:{positions:t,clampToGround:!0,width:i.outlineWidth,material:i.outlineMaterial,show:i.outline}};0<i.extrudedHeight&&(n.polygon.extrudedHeight=i.extrudedHeight,n.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,n.polygon.closeTop=!0,n.polygon.closeBottom=!0),i.entity=i.viewer.entities.add(n),i.entity.layerId=i.layerId},_showModifyRegion2Map:function(){var i=this;i._startModify(),i._computeTempPositions();var e=new u.CallbackProperty(function(){if(i.positions.length<2)return null;var e=i._getLonLatArr(i.positions),t=a.algorithm.tailedAttackArrow(e),n=t.polygonalPoint;t.controlPoint;return n.length<3?null:n},!1),t=new u.CallbackProperty(function(){if(i.positions.length<2)return null;var e=i._getLonLatArr(i.positions),t=a.algorithm.tailedAttackArrow(e).polygonalPoint;if(null==t||t.length<2)return null;var n=t[0];return t.push(n),t},!1);null==i.material&&(i.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==i.outlineMaterial&&(i.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#f00").withAlpha(.7)}));var n={polygon:new u.PolygonGraphics({hierarchy:e,material:i.material,show:i.fill}),polyline:{positions:t,clampToGround:!0,width:i.outlineWidth,material:i.outlineMaterial,show:i.outline}};0<i.extrudedHeight&&(n.polygon.extrudedHeight=i.extrudedHeight,n.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,n.polygon.closeTop=!0,n.polygon.closeBottom=!0),i.entity=i.viewer.entities.add(n),i.entity.layerId=i.layerId;for(var r=i.positions,o=0;o<r.length;o++)i._createPoint(r[o],o)},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length,n=e[0],i=e[t-1];0==this._isSimpleXYZ(n,i)&&(e.push(n),t+=1),this.tempPositions=[];for(var r=1;r<t;r++){var o=e[r-1],a=e[r],s=this._computeCenterPotition(o,a);this.tempPositions.push(o),this.tempPositions.push(s)}},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new u.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var r=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(r.clear(),layer.close(r.toolBarIndex),r.okHandler){var e=r._getLonLatArr(r.positions),t=a.algorithm.tailedAttackArrow(e),n=t.polygonalPoint,i=t.controlPoint;r.okHandler(n,i)}}),t.unbind("click").bind("click",function(){r.clear(),layer.close(r.toolBarIndex),r.cancelHandler&&r.cancelHandler()})},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height};return n.lon=u.Math.toDegrees(n.lon),n.lat=u.Math.toDegrees(n.lat),n},_getLonLatArr:function(e){for(var t=[],n=0;n<e.length;n++){var i=this._getLonLat(e[n]);null!=i&&t.push([i.lon,i.lat])}return t},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"PlotAttackArrowDrawer"};var l=e.SWHZ;i(l)||(l={}),(e.SWHZ=l).PlotAttackArrowDrawer=s}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,u,t,n){if((0,n.defined)(u)){var i=n.isJson,r=n.selfPath,o=e.SWHZ.GlobeTooltip,a=e.SWHZ.algorithm,s=function(){this.init.apply(this,arguments)};s.prototype={viewer:null,scene:null,clock:null,canvas:null,camera:null,ellipsoid:null,tooltip:null,entity:null,positions:[],tempPositions:[],drawHandler:null,modifyHandler:null,okHandler:null,cancelHandler:null,dragIcon:"img//circle_gray.png",dragIconLight:"img//circle_red.png",material:null,outlineMaterial:null,fill:!0,outline:!0,outlineWidth:2,extrudedHeight:0,toolBarIndex:null,markers:{},layerId:"globeDrawerLayer",init:function(e){var t=e.viewer;this.viewer=t,this.scene=t.scene,this.clock=t.clock,this.canvas=t.scene.canvas,this.camera=t.scene.camera,this.ellipsoid=t.scene.globe.ellipsoid,this.tooltip=new o(t.container),this.dragIcon=r+s.prototype.dragIcon,this.dragIconLight=r+s.prototype.dragIconLight},clear:function(){var e=this;e.drawHandler&&(e.drawHandler.destroy(),e.drawHandler=null),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),null!=e.toolBarIndex&&layer.close(e.toolBarIndex),e._clearMarkers(e.layerId),e.tooltip.setVisible(!1)},showModifyPincerArrow:function(e,t,n){for(var i=[],r=0;r<e.length;r++){var o=e[r],a=u.Cartesian3.fromDegrees(o[0],o[1]);i.push(a)}this.positions=i,this.okHandler=t,this.cancelHandler=n,this._showModifyRegion2Map()},startDrawPincerArrow:function(e,t){var o=this;o.okHandler=e,o.cancelHandler=t,o.positions=[];var a=null;o.drawHandler=new u.ScreenSpaceEventHandler(o.canvas),o.drawHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=o.camera.getPickRay(t);if(u.defined(n)){var i=o.scene.globe.pick(n,o.scene);if(u.defined(i)){0==o.positions.length&&(o.positions.push(i),a=o._createPoint(i,-1),o._showRegion2Map()),o.positions.push(i);var r=o.positions.length-2;o._createPoint(i,r),5<o.positions.length&&(o.positions.pop(),o.viewer.entities.remove(a),o.tooltip.setVisible(!1),o._startModify())}}}},u.ScreenSpaceEventType.LEFT_CLICK),o.drawHandler.setInputAction(function(e){var t=e.endPosition;if(u.defined(t))if(o.positions.length<1)o.tooltip.showAt(t,"<p>选择起点</p>");else{o.tooltip.showAt(t,"<p>新增控制点</p>");var n=o.camera.getPickRay(t);if(u.defined(n)){var i=o.scene.globe.pick(n,o.scene);u.defined(i)&&(a.position.setValue(i),o.positions.pop(),o.positions.push(i))}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_startModify:function(){var s=this,l=!1,c=null;s.drawHandler&&(s.drawHandler.destroy(),s.drawHandler=null),s._showToolBar(),s.modifyHandler=new u.ScreenSpaceEventHandler(s.canvas),s.modifyHandler.setInputAction(function(e){var t=e.position;if(u.defined(t)){var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i))if(l){l=!1,c.position.setValue(i);var r=c.oid;s.positions[r]=i,s.tooltip.setVisible(!1)}else{var o=s.scene.pick(t);if(!u.defined(o))return;if(!u.defined(o.id))return;var a=o.id;if(a.layerId!=s.layerId||"anchor"!=a.flag)return;c=a,l=!0,s.tooltip.showAt(t,"<p>移动控制点</p>")}}}},u.ScreenSpaceEventType.LEFT_CLICK),s.modifyHandler.setInputAction(function(e){if(l){var t=e.endPosition;if(u.defined(t)){s.tooltip.showAt(t,"<p>移动控制点</p>");var n=s.camera.getPickRay(t);if(u.defined(n)){var i=s.scene.globe.pick(n,s.scene);if(u.defined(i)){c.position.setValue(i);var r=c.oid;s.positions[r]=i}}}}},u.ScreenSpaceEventType.MOUSE_MOVE)},_showRegion2Map:function(){var i=this;null==i.material&&(i.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==i.outlineMaterial&&(i.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#f00").withAlpha(.7)}));var e=new u.CallbackProperty(function(){if(i.positions.length<3)return null;try{var e=i._getLonLatArr(i.positions),t=a.algorithm.doubleArrow(e).polygonalPoint;return u.defined(t)?null==t||t.length<3?null:t:null}catch(e){return null}},!1),t=new u.CallbackProperty(function(){if(i.positions.length<3)return null;try{var e=i._getLonLatArr(i.positions),t=a.algorithm.doubleArrow(e).polygonalPoint;if(!u.defined(t))return null;if(null==t||t.length<3)return null;var n=t[0];return t.push(n),t}catch(e){return null}},!1),n={polygon:new u.PolygonGraphics({hierarchy:e,material:i.material,show:i.fill}),polyline:{positions:t,clampToGround:!0,width:i.outlineWidth,material:i.outlineMaterial,show:i.outline}};0<i.extrudedHeight&&(n.polygon.extrudedHeight=i.extrudedHeight,n.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,n.polygon.closeTop=!0,n.polygon.closeBottom=!0),i.entity=i.viewer.entities.add(n),i.entity.layerId=i.layerId},_showModifyRegion2Map:function(){var i=this;i._startModify(),i._computeTempPositions();var e=new u.CallbackProperty(function(){if(i.positions.length<3)return null;try{var e=i._getLonLatArr(i.positions);return a.algorithm.doubleArrow(e).polygonalPoint}catch(e){return null}},!1),t=new u.CallbackProperty(function(){if(i.positions.length<3)return null;try{var e=i._getLonLatArr(i.positions),t=a.algorithm.doubleArrow(e).polygonalPoint;if(null==t||t.length<2)return null;var n=t[0];return t.push(n),t}catch(e){return null}},!1);null==i.material&&(i.material=u.Color.fromCssColorString("#ff0").withAlpha(.5)),null==i.outlineMaterial&&(i.outlineMaterial=new u.PolylineDashMaterialProperty({dashLength:16,color:u.Color.fromCssColorString("#f00").withAlpha(.7)}));var n={polygon:new u.PolygonGraphics({hierarchy:e,material:i.material,show:i.fill}),polyline:{positions:t,clampToGround:!0,width:i.outlineWidth,material:i.outlineMaterial,show:i.outline}};0<i.extrudedHeight&&(n.polygon.extrudedHeight=i.extrudedHeight,n.polygon.extrudedHeightReference=u.HeightReference.RELATIVE_TO_GROUND,n.polygon.closeTop=!0,n.polygon.closeBottom=!0),i.entity=i.viewer.entities.add(n),i.entity.layerId=i.layerId;for(var r=i.positions,o=0;o<r.length;o++)i._createPoint(r[o],o)},_createPoint:function(e,t){var n=this.viewer.entities.add({position:e,billboard:{image:this.dragIconLight,eyeOffset:new u.ConstantProperty(new u.Cartesian3(0,0,-500)),heightReference:u.HeightReference.CLAMP_TO_GROUND}});return n.oid=t,n.layerId=this.layerId,n.flag="anchor",this.markers[t]=n},_computeTempPositions:function(){var e=[].concat(this.positions),t=e.length,n=e[0],i=e[t-1];0==this._isSimpleXYZ(n,i)&&(e.push(n),t+=1),this.tempPositions=[];for(var r=1;r<t;r++){var o=e[r-1],a=e[r],s=this._computeCenterPotition(o,a);this.tempPositions.push(o),this.tempPositions.push(s)}},_computeCenterPotition:function(e,t){var n=this.ellipsoid.cartesianToCartographic(e),i=this.ellipsoid.cartesianToCartographic(t),r=new u.EllipsoidGeodesic(n,i).interpolateUsingFraction(.5);return this.ellipsoid.cartographicToCartesian(r)},_showToolBar:function(){this._createToolBar();var e=$(window).width(),t=parseInt((e-145)/2);this.toolBarIndex=layer.open({title:!1,type:1,fixed:!0,resize:!1,shade:0,content:$("#shapeEditContainer"),offset:["60px",t+"px"],move:"#shapeEditRTCorner"});var n="#layui-layer"+this.toolBarIndex+" .layui-layer-close2";$(n).hide()},_createToolBar:function(){var r=this;$("#shapeEditContainer").remove();$("body").append('<div id="shapeEditContainer" style="padding: 10px 10px;">    <button name="btnOK" class="layui-btn layui-btn-xs layui-btn-normal"> <i class="layui-icon"></i> 确定 </button>    <button name="btnCancel" class="layui-btn layui-btn-xs layui-btn-danger"> <i class="layui-icon">ဆ</i> 取消 </button>    <div id="shapeEditRTCorner" style="width: 16px; position: absolute; right: 0px; top: 0px; bottom: 0px">    </div></div>');var e=$("#shapeEditContainer button[name='btnOK']"),t=$("#shapeEditContainer button[name='btnCancel']");e.unbind("click").bind("click",function(){if(r.clear(),layer.close(r.toolBarIndex),r.okHandler){var e=r._getLonLatArr(r.positions),t=a.algorithm.doubleArrow(e),n=t.polygonalPoint,i=t.controlPoint;r.okHandler(n,i)}}),t.unbind("click").bind("click",function(){r.clear(),layer.close(r.toolBarIndex),r.cancelHandler&&r.cancelHandler()})},_getLonLat:function(e){var t=this.ellipsoid.cartesianToCartographic(e);t.height=this.viewer.scene.globe.getHeight(t);var n={lon:t.longitude,lat:t.latitude,alt:t.height};return n.lon=u.Math.toDegrees(n.lon),n.lat=u.Math.toDegrees(n.lat),n},_getLonLatArr:function(e){for(var t=[],n=0;n<e.length;n++){var i=this._getLonLat(e[n]);null!=i&&t.push([i.lon,i.lat])}return t},_isSimpleXYZ:function(e,t){return e.x==t.x&&e.y==t.y&&e.z==t.z},_clearMarkers:function(e){var t=this.viewer,n=t.entities.values;if(!(null==n||n.length<1))for(var i=0;i<n.length;i++){var r=n[i];r.layerId==e&&(t.entities.remove(r),i--)}},_clearAnchors:function(){for(var e in this.markers){var t=this.markers[e];this.viewer.entities.remove(t)}this.markers={}},CLASS_NAME:"PlotPincerArrowDrawer"};var l=e.SWHZ;i(l)||(l={}),(e.SWHZ=l).PlotPincerArrowDrawer=s}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),function(e,t,n,i){if((0,i.defined)(t)){var r=i.isJson,o=e.SWHZ.GlobePointDrawer,a=e.SWHZ.GlobePolylineDrawer,s=e.SWHZ.GlobePolygonDrawer,l=e.SWHZ.GlobeCircleDrawer,c=e.SWHZ.GlobeRectangleDrawer,u=e.SWHZ.GlobeBufferLineDrawer,f=e.SWHZ.PlotStraightArrowDrawer,p=e.SWHZ.PlotAttackArrowDrawer,d=e.SWHZ.PlotPincerArrowDrawer,h=e.SWHZ.GlobePointMeasure,v=e.SWHZ.GlobePolylineMeasure,m=e.SWHZ.GlobePolygonMeasure,g=function(){this.init.apply(this,arguments)};g.prototype={viewer:null,ctrArr:[],pointDrawer:null,polylineDrawer:null,polygonDrawer:null,circleDrawer:null,rectDrawer:null,bufferLineDrawer:null,straightArrowDrawer:null,attackArrowDrawer:null,pincerArrowDrawer:null,posMeasure:null,disMeasure:null,areaMeasure:null,init:function(e){var t=this;t.viewer=e,t.pointDrawer=new o(t.viewer),t.ctrArr.push(t.pointDrawer),t.polylineDrawer=new a(t.viewer),t.ctrArr.push(t.polylineDrawer),t.polygonDrawer=new s(t.viewer),t.ctrArr.push(t.polygonDrawer),t.circleDrawer=new l(t.viewer),t.ctrArr.push(t.circleDrawer),t.rectDrawer=new c(t.viewer),t.ctrArr.push(t.rectDrawer),t.bufferLineDrawer=new u(t.viewer),t.ctrArr.push(t.bufferLineDrawer),t.straightArrowDrawer=new f(t.viewer),t.ctrArr.push(t.straightArrowDrawer),t.attackArrowDrawer=new p(t.viewer),t.ctrArr.push(t.attackArrowDrawer),t.pincerArrowDrawer=new d(t.viewer),t.ctrArr.push(t.pincerArrowDrawer),t.posMeasure=new h(t.viewer),t.ctrArr.push(t.posMeasure),t.disMeasure=new v(t.viewer),t.ctrArr.push(t.disMeasure),t.areaMeasure=new m(t.viewer),t.ctrArr.push(t.areaMeasure)},clear:function(){for(var e=0;e<this.ctrArr.length;e++)try{var t=this.ctrArr[e];t.clear&&t.clear()}catch(e){console.log("发生未知出错：GlobeTracker.clear")}},trackPoint:function(e,t){this.clear(),null==this.pointDrawer&&(this.pointDrawer=new o(this.viewer),this.ctrArr.push(this.pointDrawer)),this.pointDrawer.startDrawPoint(e,t)},trackPolyline:function(e,t){this.clear(),null==this.polylineDrawer&&(this.polylineDrawer=new a(this.viewer),this.ctrArr.push(this.polylineDrawer)),this.polylineDrawer.startDrawPolyline(e,t)},trackPolygon:function(e,t){this.clear(),null==this.polygonDrawer&&(this.polygonDrawer=new s(this.viewer),this.ctrArr.push(this.polygonDrawer)),this.polygonDrawer.startDrawPolygon(e,t)},trackCircle:function(e,t){this.clear(),null==this.circleDrawer&&(this.circleDrawer=new l(this.viewer),this.ctrArr.push(this.circleDrawer)),this.circleDrawer.startDrawCircle(e,t)},trackRectangle:function(e,t){null==this.rectDrawer&&(this.rectDrawer=new c(this.viewer),this.ctrArr.push(this.rectDrawer)),this.clear(),this.rectDrawer.startDrawRectangle(e,t)},trackBufferLine:function(e,t){null==this.bufferLineDrawer&&(this.bufferLineDrawer=new u(this.viewer),this.ctrArr.push(this.bufferLineDrawer)),this.clear(),this.bufferLineDrawer.startDrawBufferLine(e,t)},trackStraightArrow:function(e,t){this.clear(),null==this.straightArrowDrawer&&(this.straightArrowDrawer=new f(this.viewer),this.ctrArr.push(this.straightArrowDrawer)),this.straightArrowDrawer.startDrawStraightArrow(e,t)},trackAttackArrow:function(e,t){this.clear(),null==this.attackArrowDrawer&&(this.attackArrowDrawer=new p(this.viewer),this.ctrArr.push(this.attackArrowDrawer)),this.attackArrowDrawer.startDrawAttackArrow(e,t)},trackPincerArrow:function(e,t){this.clear(),null==this.pincerArrowDrawer&&(this.pincerArrowDrawer=new d(this.viewer),this.ctrArr.push(this.pincerArrowDrawer)),this.pincerArrowDrawer.startDrawPincerArrow(e,t)},pickPosition:function(e,t){this.clear(),null==this.posMeasure&&(this.posMeasure=new h(this.viewer),this.ctrArr.push(this.posMeasure)),this.posMeasure.startDrawPoint(e,t)},pickDistance:function(e,t){this.clear(),null==this.disMeasure&&(this.disMeasure=new v(this.viewer),this.ctrArr.push(this.disMeasure)),this.disMeasure.startDrawPolyline(e,t)},pickArea:function(e,t){this.clear(),null==this.areaMeasure&&(this.areaMeasure=new m(this.viewer),this.ctrArr.push(this.areaMeasure)),this.areaMeasure.startDrawPolygon(e,t)},CLASS_NAME:"GlobeTracker"};var y=e.SWHZ;r(y)||(y={}),(e.SWHZ=y).GlobeTracker=g}}(ye,Cesium,ye._kLib.throwErr,ye._kLib,ye._dataCenter,ye._auxiliary,ye._funcs),ye.Constants=ye._kLib.freezeObject(ye.Constants);var Te,ke=[];for(Te in ye)ye.hasOwnProperty(Te)&&"_"===Te[0]&&ke.push(Te);for(Te=ke.length;Te--;)delete ye[ke[Te]];for(var Ee in ye)ye.hasOwnProperty(Ee)&&"_"===Ee[0]&&delete ye[Ee];e.exports=ye},function(e,t,n){var i,r,o,a,s,l,c,u=n(2),f=n(6),p=n(3),d={},h={Constants:n(4),Params:p,_dataCenter:f,_kLib:u,_funcs:d,_auxiliary:n(5)};function v(e,t){return function(){return e.apply(t,arguments)}}h.Viewer=function(n,o,a,s,l,i,r,c,u,f,p,d,h){if(!o(h))return null;function v(e,t,n){if(o(n,v)||(n=this),!(n instanceof v))return new v(e,t);if(n.destroy(),n.valid=!1,!s(e))return!1;n.divId=e,c(e),s(n.uuid)||(n.uuid=Math.uuid());var i=new h.Viewer(e,u(t,f));if(!o(i))return!1;n.viewer=i,o(t)||(t={showCredits:0}),n.initParams=d(t),n.userEvent=new p;var r={};return r.viewer=i,r.userEvent=n.userEvent,l(n,r)?(n.valid=!0,i._cesiumWidget._creditContainer.style.display="none",i._animation._container.style.display="none",i.scene.globe.enableLighting=!0,i.scene.globe.depthTestAgainstTerrain=!0,o(t)&&(a(t.showFPS)&&(i.scene.debugShowFramesPerSecond=t.showFPS),a(t.enableLighting)&&(i.scene.globe.enableLighting=t.enableLighting),a(t.depthTestAgainstTerrain)&&(i.scene.globe.depthTestAgainstTerrain=t.depthTestAgainstTerrain)),!0):(i.destroy(),!1)}var e=v.prototype;return e.constructor=v,e.destroy=function(e){if(o(e,v)||(e=this),!e.valid)return!0;var t=r(e);return i(e),o(t)&&o(t.viewer)&&n(t.viewer.destroy)&&t.viewer.destroy(),!(e.valid=!1)},v}(u.isFunc,u.defined,u.isBool,u.isString,f.register.rI,f.register.uI,f.register.gI,f.register.cI,u.createParam,p.Viewer,u.eventAggregator,u.freezeObject,Cesium),i=h.Viewer.prototype,r=u.isJson,o=u.isNum,a=f,r(i)||(i={}),i.addEventListener=function(e,t,n,i){return o(e)?a.addEventListener(e,t,n,i,this):this.userEvent.subscribe(e,n,t,i)},i.removeEventListener=function(e,t){return o(e)?a.removeEventListener(e,t,this):this.userEvent.unsubscribeHd(e,t)},i.triggerEvent=function(e,t){return o(e)?a.triggerEvent(e,t,this):this.userEvent.publish(e,t)},i.getEventLength=function(e){return o(e)?a.getEventLength(e,this):this.userEvent.getLength(e)},s=d,l=u.isFunc,c=u.isJson,(0,f.createObj)(function(){!function e(t,n,i){for(var r in n)n.hasOwnProperty(r)&&(c(n[r])?(t[r]={},e(t[r],n[r],i)):l(n[r])&&(t[r]=v(n[r],i)))}(this,s,this)}),e.exports=h},function(e,t,n){var r,o,a,s,l,u,f,c,p,d,h,v,m,g,y,_,w,x,b,P,C,T,k,E,M,S,L,A,I,D,R,F,z,N,O,H,j,U,B,W,G,V,Z,X,Y,K,$,q,J,Q,ee,te,ne,ie,re,oe,ae,se,le,ce,ue={};function fe(e){this._init(e)}function pe(e,t,n,i){if(!(this instanceof pe))return new pe(e,t,n,i);this.blob=null,this.url=null,this.valid=!1,this.func=null,this.worker=null,this.executing=!1,this.tasks=[],this.onerror=null,this.onlog=null,this.factory=null,this.init(e,t,n,i)}function de(e,t,n){for(var i=0,r=0,o=.1;0<=t;){switch(e[t]){case"0":r+=1,i+=0*(o*=10);break;case"1":r+=1,i+=1*(o*=10);break;case"2":r+=1,i+=2*(o*=10);break;case"3":r+=1,i+=3*(o*=10);break;case"4":r+=1,i+=4*(o*=10);break;case"5":r+=1,i+=5*(o*=10);break;case"6":r+=1,i+=6*(o*=10);break;case"7":r+=1,i+=7*(o*=10);break;case"8":r+=1,i+=8*(o*=10);break;case"9":r+=1,i+=9*(o*=10);break;default:return n[0]=i,n[1]=r,n}t-=1}return n[0]=i,n[1]=r,n}function he(){if(!(this instanceof he))return new he;this.values=[],this.names=[],this.indexes=[],this.lastName=null,this.lastIndex=NaN}function ve(){if(!(this instanceof ve))return new ve;this.eventName=[],this.eventObj=[]}function me(e,t){if(!(this instanceof me))return new me(e,t);var n;this.name=e,this.message=t;try{throw new Error}catch(e){n=e.stack}this.stack=n}function ge(e,t){var n,i;if(!U(e)){if(!B(e))return e;for(n=[],i=e.length;i--;)n[i]=ge(e[i],t);return n}if(!e._RR_){for(i in n={},e)e.hasOwnProperty(i)&&(n[i]=ge(e[i],t));return n}if(j(e.load))return n=t[e.load],j(n)?n:null;var r,o,a,s=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0];for(o=e.func,r=G[o[0]],i=o.length;--i;)r=r[o[i]];for(a=e.args.length,o=e.args,i=s.length;i--;)s[i]=void 0,a<=i||(s[i]=ge(o[i],t));return n=e.isNew?new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]):r(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]),W(e.save)&&(t[e.save]=n),n}function ye(e,t){var n,i,r,o,a;for(var s in t)if(t.hasOwnProperty(s)&&(a=t[s],V(a))){if(o=e[s],n=V(o)){if(0==(i=Z(o)?1:X(o)?2:0))continue;if(i!=(r=Z(a)?1:X(a)?2:0))continue}else r=Z(a)?1:X(a)?2:0;switch(r){case 0:e[s]=a;break;case 1:n||(o={},e[s]=o),ye(o,a);break;case 2:n||(o=[],e[s]=o),ye(o,a)}}return!0}function _e(e){if(!(this instanceof _e))return new _e(e);this.gl=null,this.vShaderSource="",this.fShaderSource="",this.vShader=null,this.fShader=null,this.program=null,this.loadFunc=null,this.decodeFunc=null,this.drawParams=[],J(e)&&(Y(e.gl,WebGLRenderingContext)&&(this.gl=e.gl),K(e.vShaderSource)&&(this.vShaderSource=e.vShaderSource),K(e.fShaderSource)&&(this.fShaderSource=e.fShaderSource),q(e.loadFunc)&&(this.loadFunc=e.loadFunc),q(e.decodeFunc)&&(this.decodeFunc=e.decodeFunc))}ue._base_=function(r,o){return"object"==_typeof2(r)&&"[object object]"==Object.prototype.toString.call(r).toLowerCase()&&!r.length||(r={}),r.parent=void 0!==o?o:"undefined"!=typeof self?self:{},r.defined=function(e,t){return null!=e&&(void 0===t||e instanceof t)},r.isNum=function(e){return"number"==typeof e&&!isNaN(e)},r.isArray=function(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t||"[object Arguments]"===t},r.isFunc=function(e){return"function"==typeof e},r.isBool=function(e){return"boolean"==typeof e},r.isString=function(e){return"string"==typeof e},r.freezeObject=Object.freeze||function(e){return e},r.isJson=function(e){return"object"==_typeof2(e)&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&!e.length},r.isEqual=function(e,t,n){return r.isNum(n)||(n=1e-4),Math.abs(e-t)<=n},r.absPath=function(){if(!r.defined(o))return"";var e=unescape(o.location.href),t=e.indexOf("?");0<t&&(e=e.substr(0,t-1)),t=e.lastIndexOf("/");var n=e.lastIndexOf("\\");if((t=n<t?t:n)<=0)return e;"/"==(e=e.substring(0,t)).substring(0,1)&&(e=e.slice(1));var i=/file:\/\/\//gi;return null!=e.match(i)&&(e=e.replace(i,"")),e}(),r.selfPath=function(){try{if(!document)return""}catch(e){return""}var e=document.getElementsByTagName("script");return e[e.length-1].src.replace(/^(.*\/)[^\/]+$/,"$1")}(),r.findIndex=function(e,t,n){var i=0,r=e.length-1,o=-1;if(r<0||n(t,e[0])<0)return-1;if(0<=n(t,e[r]))return r;for(;i<r-1;)0<=n(t,e[o=Math.floor((i+r)/2)])?i=o:r=o;return i},r},ue._base_(ue,window),ue.Promise=(r=ue.isFunc,(o=fe.prototype).constructor=fe,o._init=function(e){var n=this;return n._status=0,n._onfulfilled=null,n._onrejected=null,n._next=null,n._fulfilledHandler=function(e){var t;0===n._status&&(t=null===n._onfulfilled?e:n._onfulfilled(e),n._status=1,n._next&&setTimeout(function(){n._next._fulfilledHandler(t)},0))},n._rejectedHandler=function(e){var t;0===n._status&&(t=null===n._onrejected?e:n._onrejected(e),n._status=2,n._next&&setTimeout(function(){n._next._rejectedHandler(t)},0))},r(e)&&setTimeout(function(){e(n._fulfilledHandler,n._rejectedHandler)},0),!0},o.then=function(e,t){r(e)?this._onfulfilled=e:this._onfulfilled=null,r(t)?this._onrejected=t:this._onrejected=null;var n=new fe;return this._next=n},fe),ue.isFunc(Promise)||(window.Promise=ue.Promise),ue._progressBar_=function(t){var n=-1;return function(e){(e=Math.floor(e))!==n&&t(n=e)}},s=(a=ue).parent,(0,ue.isJson)(a)||(a={}),a.requestAnimationFrame=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame||function(e,t){s.setTimeout(e,1e3/60)},a.cancelAnimationFrame=s.cancelRequestAnimationFrame||s.webkitCancelAnimationFrame||s.webkitCancelRequestAnimationFrame||s.mozCancelAnimationFrame||s.mozCancelRequestAnimationFrame||s.msCancelAnimationFrame||s.msCancelRequestAnimationFrame||s.oCancelAnimationFrame||s.oCancelRequestAnimationFrame||s.clearTimeout,ue.ZWorker=(l=window.URL.createObjectURL,u=ue.isFunc,f=ue.defined,c=ue.isArray,p=ue.isString,d=['function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); } var _typeof2 = _typeof;'+"var _progressBar = function(_msg) {var beforePercent = -1;return function(percentVal) {percentVal = Math.floor(percentVal);if(percentVal !== beforePercent) {beforePercent = percentVal;_msg(percentVal);}return;};};var _operCode = {fin: '_finn',desc: '_desc',log: '_logg',len: 5};var _i2s = function(instance) {if(instance instanceof Int8Array) return 1;if(instance instanceof Uint8Array) return 2;if(instance instanceof Uint8ClampedArray) return 3;if(instance instanceof Int16Array) return 4;if(instance instanceof Uint16Array) return 5;if(instance instanceof Int32Array) return 6;if(instance instanceof Uint32Array) return 7;if(instance instanceof Float32Array) return 8;if(instance instanceof Float64Array) return 9;if(instance instanceof BigInt64Array) return 10;if(instance instanceof BigUint64Array) return 11;return NaN;};var _s2i = function(number) {switch(number) {case '1': return Int8Array;case '2': return Uint8Array;case '3': return Uint8ClampedArray;case '4': return Int16Array;case '5': return Uint16Array;case '6': return Int32Array;case '7': return Uint32Array;case '8': return Float32Array;case '9': return Float64Array;case '10': return BigInt64Array;case '11': return BigUint64Array;default: break;}return null;};var _logger = function(msg) {self.postMessage(_operCode.log + msg);};var _factory = (",")();var _param = [];var _result = {data: [], ps: []};var execute = function() {var _data = _result.data;var _ps = _result.ps;_param.push(_result);_param.push(_logger);_param.push(_factory);_param.push(_progressBar);(",").apply(this, _param);for(var i = _data.length; i --;) {switch(_ps[i]) {case 1:var kimoi = _i2s(_data[i]);if(!isNaN(kimoi)) {self.postMessage(_data[i].buffer, [_data[i].buffer]);self.postMessage(_operCode.desc + kimoi);}else self.postMessage(_data[i], [_data[i]]);break;case 2:self.postMessage(_data[i], [_data[i]]);break;default:self.postMessage(_data[i]);break;}}_param.splice(0, _param.length);_data.splice(0, _data.length);_ps.splice(0, _ps.length);self.postMessage(_operCode.fin);};self.onmessage = function(event) {var data = event.data;if(typeof data === 'string') {var opercode = data.toLowerCase().substr(0, _operCode.len);var opernum = data.substr(_operCode.len);switch(opercode) {case _operCode.fin:execute();return;case _operCode.desc:opernum = _s2i(opernum);if(opernum && _param.length > 0) {_param[0] = new opernum(_param[0]);}return;}}_param.unshift(data);};"],h="_finn",v="_desc",m="_logg",g=5,y=null,(y=pe.prototype).constructor=pe,f(Worker)&&u(l)?(y.stop=function(){var e=this.worker,t=this.tasks;f(e,Worker)&&e.terminate(),this.worker=null,this.executing=!1,t.splice(0,t.length)},y.init=function(e,t,n,i){return!!u(e)&&(this.stop(),this.factory=function(e){var t="";if(c(e)){t="return __f;}";for(var n=e.length-4;0<=n;n-=4)t='__f["'+e[n]+'"]=('+e[n+1].toString()+")("+e[n+2]+");"+t;t="function(){var __f = {};"+t}else t=u(e)?e.toString():"function() {return null;}";return t}(i),this.blob=new Blob([d[0]+this.factory+d[1]+e.toString()+d[2]]),this.url=l(this.blob),this.func=e,this.valid=!0,u(t)&&(this.onerror=t),u(n)&&(this.onlog=n),!0)},y.do=function(e,t,n,i){return!(!this.valid||!c(e)||!u(n)||(c(t)||(t=[]),this.tasks.push({data:e,ps:t,reFunc:n,reFuncMsg:i}),this._execute(),0))},y._execute=function(){var r=this;if(!(!r.valid||r.executing||r.tasks.length<=0)){r.executing=!0;var e=r.worker;f(e,Worker)||(e=new Worker(r.url),r.worker=e),u(r.onerror)&&(e.onerror=r.onerror);var o,t,a,s,n,i,l=r.tasks[0];for(o=l.data,t=l.ps,a=l.reFunc,s=l.reFuncMsg,r.tasks.shift(),n=o.length;n--;)switch(t[n]){case 1:var c=(i=o[n])instanceof Int8Array?1:i instanceof Uint8Array?2:i instanceof Uint8ClampedArray?3:i instanceof Int16Array?4:i instanceof Uint16Array?5:i instanceof Int32Array?6:i instanceof Uint32Array?7:i instanceof Float32Array?8:i instanceof Float64Array?9:i instanceof BigInt64Array?10:i instanceof BigUint64Array?11:NaN;isNaN(c)?e.postMessage(o[n],[o[n]]):(e.postMessage(o[n].buffer,[o[n].buffer]),e.postMessage(v+c));break;case 2:e.postMessage(o[n],[o[n]]);break;default:e.postMessage(o[n])}o=[],e.onmessage=function(e){var t=e.data;if(p(t)){var n=t.toLowerCase().substr(0,g),i=t.substr(g);switch(n){case h:return a.apply(r,o),void(r.executing&&(r.executing=!1,r._execute()));case v:return void((i=function(e){switch(e){case"1":return Int8Array;case"2":return Uint8Array;case"3":return Uint8ClampedArray;case"4":return Int16Array;case"5":return Uint16Array;case"6":return Int32Array;case"7":return Uint32Array;case"8":return Float32Array;case"9":return Float64Array;case"10":return BigInt64Array;case"11":return BigUint64Array}return null}(i))&&0<o.length&&(o[0]=new i(o[0])));case m:return u(s)?void s.call(r,i):void(u(r.onlog)&&r.onlog.call(r,i))}}o.unshift(t)},e.postMessage(h)}},y.getLength=function(){return this.tasks.length}):(y.stop=function(){},y.init=function(e,t,n,i){if(!u(e))return!1;if(u(i))this.factory=i();else if(c(i)){for(var r={},o=i.length-4;0<=o;o-=4)r[i[o]]=i[o+3];this.factory=r}else this.factory=null;return this.func=e,this.valid=!0,u(t)&&(this.onerror=t),u(n)&&(this.onlog=n),!0},y.do=function(e,t,n){var i=this;if(!i.valid)return!1;if(!c(e)||!u(n))return!1;var r={data:[],ps:[]};return e.push(r),e.push(i.onlog),e.push(i.factory),i.func.apply(i,e,function(e){u(i.onlog)&&i.onlog.call(i,e)}),n.apply(i,r.data),!0},y.getLength=function(){return 0}),pe),ue.paramIntoString=(ue.isString,function(e){for(var t=new RegExp(/\[\$[0-9][0-9]*\]/g),n=e.split(t),i=e.length,r=[],o=n.length;--o;)i-=n[o].length,de(e,i-2,r),n.splice(o,0,arguments[r[0]+1]),i-=r[1]+3;var a=n.shift();return String.prototype.concat.apply(a,n)}),ue._uuid_=function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(e,t){var n,i,r=a,o=[];if(t=t||r.length,e)for(n=0;n<e;n++)o[n]=r[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(i=0|16*Math.random(),o[n]=r[19==n?3&i|8:i]);return o.join("")},Math.uuidFast=function(){for(var e,t=a,n=new Array(36),i=0,r=0;r<36;r++)8==r||13==r||18==r||23==r?n[r]="-":14==r?n[r]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),e=15&i,i>>=4,n[r]=t[19==r?3&e|8:e]);return n.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},ue._uuid_(),ue.defineProperties=(_=ue.defined,w=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),x=Object.defineProperties,w&&_(x)||(x=function(e){return e}),x),ue.arrGroup=(b=ue.defined,P=ue.isNum,C=ue.isString,T=ue.findIndex,(k=he.prototype).constructor=he,k.clear=function(e){return b(e,he)||(e=this),e.values.splice(0,e.values.length),e.names.splice(0,e.names.length),e.indexes.splice(0,e.indexes.length),e.lastName=null,!(e.lastIndex=NaN)},k.set=function(e,t,n,i){if(b(i,he)||(i=this),!C(e)||""===e)return!1;var r=i.names,o=i.indexes,a=i.values,s=i.lastIndex;if(i.lastName===e){if(!P(n)||n===o[s])return a[s]=t,!0;r.splice(s,1),a.splice(s,1),o.splice(s,1)}else{i.lastName=e;for(var l=r.length;l--;)if(r[l]===e){if(!P(n)||n===o[l])return a[l]=t,i.lastIndex=l,!0;r.splice(l,1),a.splice(l,1),o.splice(l,1);break}}P(n)||(n=0);var c=T(o,n,function(e,t){return e-t});return c<0?(r.unshift(e),a.unshift(t),o.unshift(n),i.lastIndex=0):(r.splice(c,0,e),a.splice(c,0,t),o.splice(c,0,n),i.lastIndex=c),!0},k.remove=function(e,t){b(t,he)||(t=this);var n=t.names,i=t.lastIndex;if(t.lastName===e)return t.lastName=null,t.lastIndex=NaN,t.values.splice(i,1),t.indexes.splice(i,1),n.splice(i,1),!0;for(var r=n.length;r--;)if(n[r]===e)return t.values.splice(r,1),t.indexes.splice(r,1),n.splice(r,1),!isNaN(i)&&r<=i&&(t.lastIndex=i-1),!0;return!1},k.map=function(e,t){b(t,he)||(t=this);for(var n=t.names,i=t.values,r=t.indexes,o=i.length;o--;)e(i[o],n[o],r[o]);return!0},k.get=function(e,t){b(t,he)||(t=this);var n=t.names;if(t.lastName===e)return t.values[t.lastIndex];for(var i=n.length;i--;)if(n[i]===e)return t.lastName=e,t.lastIndex=i,t.values[i];return null},he),ue.eventAggregator=(E=ue.defined,M=ue.isString,S=ue.isFunc,L=ue.isNum,A=ue.isArray,I=ue.arrGroup,(D=ve.prototype).constructor=ve,D.subscribe=function(e,t,n,i,r){if(!S(t))return!1;if(!M(e)||""===e)return!1;var o,a;for(M(n)&&""!==n||(n=Math.uuid()),E(r,ve)||(r=this),o=r.eventName.length;o--;)if(r.eventName[o]===e){a=r.eventObj[o];break}return E(a)||(a=new I,r.eventName.push(e),r.eventObj.push(a)),isNaN(i)&&void 0!==i&&a.clear(),L(i)||(i=0),a.set(n,t,i),!0},D.publish=function(e,t,n){if(!M(e)||""===e)return!1;E(n,ve)||(n=this);var i,r=null;for(i=n.eventName.length;i--;)if(e===n.eventName[i]){r=n.eventObj[i];break}return!!E(r)&&(A(t)?r.map(function(e){e.apply(n,t)}):r.map(function(e){e(t)}),!0)},D.unsubscribe=function(e,t){if(!M(e)||""===e)return!1;E(t,ve)||(t=this);for(var n=t.eventName.length;n--;)if(t.eventName[n]===e)return t.eventName.splice(n,1),t.eventObj.splice(n,1),!0;return!1},D.unsubscribeHd=function(e,t,n){if(!M(e)||""===e)return!1;if(!M(t)||""===t)return!1;E(n,ve)||(n=this);for(var i=n.eventName.length;i--;)if(n.eventName[i]===e)return n.eventObj[i].remove(t);return!1},D.get=function(e,t){if(!M(e)||""===e)return null;E(t,ve)||(t=this);for(var n=t.eventName.length;n--;)if(t.eventName[n]===e)return t.eventObj[n];return null},D.getLength=function(e,t){if(!M(e)||""===e)return-1;E(t,ve)||(t=this);for(var n=t.eventName.length;n--;)if(t.eventName[n]===e)return t.eventObj[n].values.length;return-1},ve),ue.intErr=((R=ue.defined)(Object.create)&&((me.prototype=Object.create(Error.prototype)).constructor=me),me.prototype.toString=function(){var e=this.name+": "+this.message;return R(this.stack)&&(e+="\n"+this.stack.toString()),e},me.throwInstantiationError=function(){throw new me("This function defines an interface and should not be called directly.")},me),ue.events=((F=new ue.eventAggregator).subscribe("_InternalError",function(e,t){ue._developeFlag&&console.error("KLibError - "+e+" : "+t)},"Normal",NaN),F.subscribe("_ModuleError",function(e,t,n,i){ue._developeFlag&&console.error("ModuleError: "+n+"\nLine: "+i+"\n"+e+" : "+t)},"Normal",0),F),function(e,t,r,o,a){t(e)||(e={});var i={Undefined:-2,NoError:-1},n=[-1,"No Error"];e._throwErr=function(e,t){n[0]=i[e],void 0===n[0]&&(n[0]=i.Undefined),n[1]=t,a.publish("_InternalError",n)},e._defineErr=function(e,t){if(!r(t)){if(r(i[e]))return;for(var n in i)(i[n]>t||!r(t))&&(t=i[n]);t+=1}i[e]=t};var s=["NoError","No Error","--","--"];e.throwErr=function(e,t,n,i){s[0]=e,s[1]=t,s[2]=o(n)?n:"--",s[3]=r(i)?i:"--",a.publish("_ModuleError",s)}}(ue,ue.isJson,ue.isNum,ue.isString,ue.events),ue.startStep=(z=ue.requestAnimationFrame,N=ue.defined,O=ue.arrGroup,H=ue.isFunc,function(t){if(!N(t,O))return!1;var n,i=Date.now(),r=null;return function e(){r=Date.now(),n=(r-i)/1e3,i=r,t.map(function(e){H(e)&&e(n)}),z(e)}(),!0}),ue.compute={},ue.compute._matrix4_=function(f,p,l,e,r,t){e(r)||(r=function(){}),e(t)&&t("CannotInverse");function d(e){e.m11=e._matrixArr[0],e.m12=e._matrixArr[1],e.m13=e._matrixArr[2],e.m14=e._matrixArr[3],e.m21=e._matrixArr[4],e.m22=e._matrixArr[5],e.m23=e._matrixArr[6],e.m24=e._matrixArr[7],e.m31=e._matrixArr[8],e.m32=e._matrixArr[9],e.m33=e._matrixArr[10],e.m34=e._matrixArr[11],e.m41=e._matrixArr[12],e.m42=e._matrixArr[13],e.m43=e._matrixArr[14],e.m44=e._matrixArr[15]}function s(e,t,n){var i,r,o;for(i=n;i--;)for(r=n;r--;)t[o=4*i+r]=e[o]}function o(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}function c(e,t,n,i){var r,o,a,s;for(r=i;r--;)for(o=i;o--;)for(n[s=r*i+o]=0,a=i;a--;)n[s]+=e[4*a+o]*t[4*r+a]}function a(e,t,n){var i,r;for(i=n;i--;)for(r=n;r--;)t[4*r+i]=e[4*i+r]}function u(e,t,n,i){switch(i&&(n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),e){case 0:n[0]=1,n[4]=0,n[8]=0,n[1]=0,n[5]=Math.cos(t),n[9]=-Math.sin(t),n[2]=0,n[6]=Math.sin(t),n[10]=Math.cos(t);break;case 1:n[0]=Math.cos(t),n[4]=0,n[8]=Math.sin(t),n[1]=0,n[5]=1,n[9]=0,n[2]=-Math.sin(t),n[6]=0,n[10]=Math.cos(t);break;case 2:n[0]=Math.cos(t),n[4]=-Math.sin(t),n[8]=0,n[1]=Math.sin(t),n[5]=Math.cos(t),n[9]=0,n[2]=0,n[6]=0,n[10]=1}}function h(e,t,n,i,r,o,a){var s=1/(n-t),l=1/(r-i),c=1/(a-o);e[0]=2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-2*c,e[11]=0,e[12]=-(n+t)*s,e[13]=-(r+i)*l,e[14]=-(a+o)*c,e[15]=1}function v(e,t,n,i,r){var o=t/2,a=Math.cos(o),s=Math.sin(o),l=r-i;e[0]=a/(n*s),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a/s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-(r+i)/l,e[11]=-1,e[12]=0,e[13]=0,e[14]=-2*r*i/l,e[15]=0}function m(e){if(!(this instanceof m))return new m(e);this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,this._autoCpy=!1,e?(this._matrixArr=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._matrixTp1=new Float64Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._matrixTp2=new Float64Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._matrixTp3=new Float64Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._matrixTp4=new Float64Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._isDouble=!0):(this._matrixArr=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._matrixTp1=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._matrixTp2=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._matrixTp3=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._matrixTp4=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._isDouble=!1)}var n=m.prototype;return n.constructor=m,n.makeIdentity=function(e){return f(e,m)||(e=this),o(e._matrixArr),e._autoCpy&&d(e),e},n.setRotate=function(e,t,n,i){return p(e)?(f(i,m)||(i=this),n||(t*=Math.PI/180),u(e,t,i._matrixArr),i._autoCpy&&d(i),i):null},n.rotate=function(e,t,n,i){return p(e)?(f(i,m)||(i=this),n||(t*=Math.PI/180),u(e,t,i._matrixTp1,!0),c(i._matrixTp1,i._matrixArr,i._matrixTp2,4),s(i._matrixTp2,i._matrixArr,4),i._autoCpy&&d(i),i):null},n.setScale=function(e,t,n,i){return p(e)&&p(t)&&p(n)?(f(i,m)||(i=this),i._matrixArr[0]=e,i._matrixArr[5]=t,i._matrixArr[10]=n,i._autoCpy&&d(i),i):null},n.scale=function(e,t,n,i){return p(e)&&p(t)&&p(n)?(f(i,m)||(i=this),o(i._matrixTp1),i._matrixTp1[0]=e,i._matrixTp1[5]=t,i._matrixTp1[10]=n,c(i._matrixTp1,i._matrixArr,i._matrixTp2,4),s(i._matrixTp2,i._matrixArr,4),i._autoCpy&&d(i),i):null},n.setTranslate=function(e,t,n,i){return p(e)&&p(t)&&p(n)?(f(i,m)||(i=this),i._matrixArr[12]=e,i._matrixArr[13]=t,i._matrixArr[14]=n,i._autoCpy&&d(i),i):null},n.translate=function(e,t,n,i){return p(e)&&p(t)&&p(n)?(f(i,m)||(i=this),o(i._matrixTp1),i._matrixTp1[12]=e,i._matrixTp1[13]=t,i._matrixTp1[14]=n,c(i._matrixTp1,i._matrixArr,i._matrixTp2,4),s(i._matrixTp2,i._matrixArr,4),i._autoCpy&&d(i),i):null},n.inverse=function(e,t,n){f(n,m)||(n=this),(!p(e)||4<e||e<3)&&(e=4);var i=!1;switch(e){case 3:i=function(e,t){t[0]=e[5]*e[10]-e[9]*e[6],t[1]=e[4]*e[10]-e[8]*e[6],t[1]=-t[1],t[2]=e[4]*e[9]-e[8]*e[5],t[3]=e[3],t[4]=e[1]*e[10]-e[9]*e[2],t[4]=-t[4],t[5]=e[0]*e[10]-e[8]*e[2],t[6]=e[0]*e[9]-e[8]*e[1],t[6]=-t[6],t[7]=e[7],t[8]=e[1]*e[6]-e[5]*e[2],t[9]=e[0]*e[6]-e[4]*e[2],t[9]=-t[9],t[10]=e[0]*e[5]-e[4]*e[1],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15];var n=e[0]*t[0]+e[4]*t[4]+e[8]*t[8];return 0==n?(r("CannotInverse","Cannot inverse matrix."),!1):(n=1/n,t[0]*=n,t[1]*=n,t[2]*=n,t[4]*=n,t[5]*=n,t[6]*=n,t[8]*=n,t[9]*=n,t[10]*=n,!0)}(n._matrixArr,n._matrixTp1);break;case 4:i=function(e,t){t[0]=e[5]*e[10]*e[15]+e[9]*e[14]*e[7]+e[13]*e[6]*e[11]-e[13]*e[10]*e[7]-e[5]*e[14]*e[11]-e[9]*e[6]*e[15],t[1]=e[4]*e[10]*e[15]+e[8]*e[14]*e[7]+e[12]*e[6]*e[11]-e[12]*e[10]*e[7]-e[4]*e[14]*e[11]-e[8]*e[6]*e[15],t[1]=-t[1],t[2]=e[4]*e[9]*e[15]+e[8]*e[13]*e[7]+e[12]*e[5]*e[11]-e[12]*e[9]*e[7]-e[4]*e[13]*e[11]-e[8]*e[5]*e[15],t[3]=e[4]*e[9]*e[14]+e[8]*e[13]*e[6]+e[12]*e[5]*e[10]-e[12]*e[9]*e[6]-e[4]*e[13]*e[10]-e[8]*e[5]*e[14],t[3]=-t[3],t[4]=e[1]*e[10]*e[15]+e[9]*e[14]*e[3]+e[13]*e[2]*e[11]-e[13]*e[10]*e[3]-e[1]*e[14]*e[11]-e[9]*e[2]*e[15],t[4]=-t[4],t[5]=e[0]*e[10]*e[15]+e[8]*e[14]*e[3]+e[12]*e[2]*e[11]-e[12]*e[10]*e[3]-e[0]*e[14]*e[11]-e[8]*e[2]*e[15],t[6]=e[0]*e[9]*e[15]+e[8]*e[13]*e[3]+e[12]*e[1]*e[11]-e[12]*e[9]*e[3]-e[0]*e[13]*e[11]-e[8]*e[1]*e[15],t[6]=-t[6],t[7]=e[0]*e[9]*e[14]+e[8]*e[13]*e[2]+e[12]*e[1]*e[10]-e[12]*e[9]*e[2]-e[0]*e[13]*e[10]-e[8]*e[1]*e[14],t[8]=e[1]*e[6]*e[15]+e[5]*e[14]*e[3]+e[13]*e[2]*e[7]-e[13]*e[6]*e[3]-e[1]*e[14]*e[7]-e[5]*e[2]*e[15],t[9]=e[0]*e[6]*e[15]+e[4]*e[14]*e[3]+e[12]*e[2]*e[7]-e[12]*e[6]*e[3]-e[0]*e[14]*e[7]-e[4]*e[2]*e[15],t[9]=-t[9],t[10]=e[0]*e[5]*e[15]+e[4]*e[13]*e[3]+e[12]*e[1]*e[7]-e[12]*e[5]*e[3]-e[0]*e[13]*e[7]-e[4]*e[1]*e[15],t[11]=e[0]*e[5]*e[14]+e[4]*e[13]*e[2]+e[12]*e[1]*e[6]-e[12]*e[5]*e[2]-e[0]*e[13]*e[6]-e[4]*e[1]*e[14],t[11]=-t[11],t[12]=e[1]*e[6]*e[11]+e[5]*e[10]*e[3]+e[9]*e[2]*e[7]-e[9]*e[6]*e[3]-e[1]*e[10]*e[7]-e[5]*e[2]*e[11],t[12]=-t[12],t[13]=e[0]*e[6]*e[11]+e[4]*e[10]*e[3]+e[8]*e[2]*e[7]-e[8]*e[6]*e[3]-e[0]*e[10]*e[7]-e[4]*e[2]*e[11],t[14]=e[0]*e[5]*e[11]+e[4]*e[9]*e[3]+e[8]*e[1]*e[7]-e[8]*e[5]*e[3]-e[0]*e[9]*e[7]-e[4]*e[1]*e[11],t[14]=-t[14],t[15]=e[0]*e[5]*e[10]+e[4]*e[9]*e[2]+e[8]*e[1]*e[6]-e[8]*e[5]*e[2]-e[0]*e[9]*e[6]-e[4]*e[1]*e[10];var n=e[0]*t[0]+e[4]*t[4]+e[8]*t[8]+e[12]*t[12];if(0==n)return r("CannotInverse","Cannot inverse matrix."),!1;n=1/n;for(var i=0;i<16;++i)t[i]*=n;return!0}(n._matrixArr,n._matrixTp1)}return t?s(n._matrixTp1,n._matrixArr,e):a(n._matrixTp1,n._matrixArr,e),n._autoCpy&&d(n),i?n:null},n.mvec=function(e,t){if(!(l(e)&&p(e[0])&&p(e[1])&&p(e[2])))return!1;f(t,m)||(t=this);var n=p(e[3]),i=e[0],r=e[1],o=e[2],a=n?e[3]:1,s=t._matrixArr;return t._matrixTp1[0]=i*s[0]+r*s[4]+o*s[8]+a*s[12],t._matrixTp1[1]=i*s[1]+r*s[5]+o*s[9]+a*s[13],t._matrixTp1[2]=i*s[2]+r*s[6]+o*s[10]+a*s[14],n&&(t._matrixTp1[3]=i*s[3]+r*s[7]+o*s[11]+a*s[15]),e[0]=t._matrixTp1[0],e[1]=t._matrixTp1[1],e[2]=t._matrixTp1[2],n&&(e[3]=t._matrixTp1[3]),!0},n.mvecX=function(e,t){if(!(f(e)&&p(e.x)&&p(e.y)&&p(e.z)))return!1;f(t,m)||(t=this);var n=p(e.w),i=e.x,r=e.y,o=e.z,a=n?e.w:1,s=t._matrixArr;return t._matrixTp1[0]=i*s[0]+r*s[4]+o*s[8]+a*s[12],t._matrixTp1[1]=i*s[1]+r*s[5]+o*s[9]+a*s[13],t._matrixTp1[2]=i*s[2]+r*s[6]+o*s[10]+a*s[14],n&&(t._matrixTp1[3]=i*s[3]+r*s[7]+o*s[11]+a*s[15]),e.x=t._matrixTp1[0],e.y=t._matrixTp1[1],e.z=t._matrixTp1[2],n&&(e.w=t._matrixTp1[3]),!0},n.setFromArray=function(e,t,n){if(!p(t)||t<=0||4<t||!l(e)||e.length<t*t)return null;var i,r;for(f(n,m)||(n=this),i=t;i--;)for(r=t;r--;)n._matrixArr[4*i+r]=e[i*t+r];return n._autoCpy&&d(n),n},n.setM=function(e){f(e,m)||(e=this),d(e)},n.transpose=function(e,t){return f(t,m)||(t=this),(!p(e)||e<0||4<e)&&(e=4),a(t._matrixArr,t._matrixTp1,e),s(t._matrixTp1,t._matrixArr,e),t._autoCpy&&d(t),t},n.multiply=function(e,t){return f(e,m)?(f(t,m)||(t=this),c(t._matrixArr,e._matrixArr,t._matrixTp1,4),s(t._matrixTp1,t._matrixArr,4),t._autoCpy&&d(t),t):null},n.setBy=function(e,t){return f(e._matrixArr,Float32Array)||f(e._matrixArr,Float64Array)?(f(t,m)||(t=this),s(e._matrixArr,t._matrixArr,4),t._autoCpy&&d(t),t):null},n.setFromBuffer=function(e,t){return l(e)||f(e,Float32Array)||f(e,Float64Array)?(f(t,m)||(t=this),s(e,t._matrixArr,4),t._autoCpy&&d(t),t):null},n.clone=function(e){f(e,m)||(e=this);var t=new m(e._isDouble);return s(e._matrixArr,t._matrixArr,4),e._autoCpy&&d(t),t},n.setOrtho=function(e,t,n,i,r,o,a){return f(a,m)||(a=this),e===t||n===i||r===o?null:p(e)&&p(t)&&p(n)&&p(i)&&p(r)&&p(o)?(h(a._matrixArr,e,t,n,i,r,o),a._autoCpy&&d(a),a):null},n.ortho=function(e,t,n,i,r,o,a){return f(a,m)||(a=this),e===t||n===i||r===o?null:p(e)&&p(t)&&p(n)&&p(i)&&p(r)&&p(o)?(h(a._matrixTp1,e,t,n,i,r,o),c(a._matrixTp1,a._matrixArr,a._matrixTp2,4),s(a._matrixTp2,a._matrixArr,4),a._autoCpy&&d(a),a):null},n.setPerspective=function(e,t,n,i,r){return f(r,m)||(r=this),0===Math.tan(e/2)||0===t||i===n?null:p(e)&&p(t)&&p(n)&&p(i)?(v(r._matrixArr,e,t,n,i),r._autoCpy&&d(r),r):null},n.perspective=function(e,t,n,i,r){return f(r,m)||(r=this),0===Math.tan(e/2)||0===t||i===n?null:p(e)&&p(t)&&p(n)&&p(i)?(v(r._matrixTp1,e,t,n,i),c(r._matrixTp1,r._matrixArr,r._matrixTp2,4),s(r._matrixTp2,r._matrixArr,4),r._autoCpy&&d(r),r):null},n.getBuffer=function(e,t){f(t,m)||(t=this);var n=t._matrixArr,r=n;if(e)for(n=t._isDouble?new Float64Array(n.length):new Float32Array(n.length),i=n.length;i--;)n[i]=r[i];return t._matrixArr},n.switchXYZ=function(e,t,n,i){f(i,m)||(i=this),p(e)||(e=1),p(t)||(t=2),p(n)||(n=3);var r,o,a,s=[e,t,n],l=[Math.round(Math.abs(e))-1,Math.round(Math.abs(t))-1,Math.round(Math.abs(n))-1],c=i._matrixArr,u=i._matrixTp1;for(r=16;r--;)u[r]=c[r];for(r=3;r--;)(o=l[r])<0||2<o||(a=0<=s[r]?1:-1,c[r]=u[o]*a,c[4+r]=u[4+o]*a,c[8+r]=u[8+o]*a,c[12+r]=u[12+o]*a);return i._autoCpy&&d(i),i},m},ue.compute.matrix4=ue.compute._matrix4_(ue.defined,ue.isNum,ue.isArray,ue.isFunc,ue._throwErr,ue._defineErr),ue.compute._funcAng_=function(){return function(e,t){var n=Math.sqrt(e*e+t*t);return 0==n?0:0<=e?Math.asin(t/n):Math.PI-Math.asin(t/n)}},ue.compute.funcAng=ue.compute._funcAng_(),ue.compute._smoothFunc_=function(e){return function(t,n){var i,r,o;return e(t)||(t=1),e(n)||(n=.1),o=0==n||1==n||.5==n?(r=i=0,1):(1-2*(r=(i=1/(2*(n-n*n)))*n*n))/(1-2*n),function(e){return e<n?t*i*e*e:1-n<e?t*(1-i*(1-e)*(1-e)):t*((e-n)*o+r)}}},ue.compute.smoothFunc=ue.compute._smoothFunc_(ue.isNum),ue.createParam=(j=ue.defined,U=ue.isJson,B=ue.isArray,W=ue.isString,G=ue.parent,function(e,t){if(!U(t))return null;j(e)||(e={});var n,i={};for(n in t)t.hasOwnProperty(n)&&(j(e[n])||(e[n]=ge(t[n],i)));return e}),ue.mergeObj=(V=ue.defined,Z=ue.isJson,X=ue.isArray,function(e,t,n){return!(!Z(e)||!Z(t)||(Z(n)?ye(n,e):n=e,ye(n,t),0))}),ue.webgl={},function(e,f,r,p,c,t,d,n){c(e)||(e={}),t(d)||(d=function(){}),t(n)&&(n("CreateShaderFailed"),n("CompileShaderFailed"),n("CreateWebGLContextError"),n("GetWebGLContextError"),n("CreateProgramFailed"),n("LinkProgramFailed"),n("CreateBufferFailed"),n("GetAttributeFailed"),n("CreateFrameBufferFailed"),n("CreateTextureFailed"),n("CreateRenderBufferFailed"),n("CheckFrameBufferStatusFailed"));function s(e,t,n){var i=e.createShader(t);if(null==i)return d("CreateShaderFailed","Create shader failed."),null;if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return i;var r=e.getShaderInfoLog(i);return e.deleteShader(i),d("CompileShaderFailed","Compile shader failed: "+r),null}function l(e,t,n){var i=e.createProgram();if(null==i)return d("CreateProgramFailed","Create Program Failed."),null;if(e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;var r=e.getProgramInfoLog(i);return e.deleteProgram(i),d("LinkProgramFailed","Link Program Failed: "+r),null}function h(e,t,n){isString(t)&&(t=e[o[t.toUpperCase()]]);var i=e.createBuffer();return i?(e.bindBuffer(t,i),e.bufferData(t,n,e.STATIC_DRAW),i):(d("CreateBufferFailed","Create Buffer Failed."),null)}var o={ARRAY:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"};e.getContext=function(e,t){if(!f(e))return null;e.addEventListener&&e.addEventListener("webglcontextcreationerror",function(e){d("CreateWebGLContextError","Create WebGL Context Error: "+e.statusMessage)},!1);for(var n=["moz-webgl","webkit-3d","experimental-webgl","webgl"],i=null,r=n.length;r--;){try{i=e.getContext(n[r],t)}catch(e){}if(f(i))break}return f(i)||(i=null,d("GetWebGLContextError","Get WebGL Context Error.")),i},e.loadShader=function(e,t,n){return f(e,WebGLRenderingContext)?s(e,t,n):null},e.createProgram=function(e,t,n){return f(e,WebGLRenderingContext)?l(e,t,n):null},e.initShaders=function(e,t,n){return f(e,WebGLRenderingContext)?function(e,t,n,i){var r=s(e,e.VERTEX_SHADER,t),o=s(e,e.FRAGMENT_SHADER,n);if(null==r||null==o)return null;var a=l(e,r,o);return null==a?(e.deleteShader(o),e.deleteShader(r),!1):(c(i)||(i={}),i.vShader=r,i.fShader=o,i.program=a,i)}(e,t,n):null},e.createBuffer=function(e,t,n){return f(e,WebGLRenderingContext)&&f(e.createBuffer)&&r(n.BYTES_PER_ELEMENT)?h(e,t,n):null},e.loadBuffer=function(e,t,n,i){return!!(f(e,WebGLRenderingContext)&&f(e.createBuffer)&&r(n.BYTES_PER_ELEMENT))&&function(e,t,n,i,r){if(f(r)||(r=e.program),null==h(e,t,n))return!1;if(p(i)&&0<=i.length){var o,a,s,l=0,c=0,u=n.BYTES_PER_ELEMENT;for(a=0,s=i.length;a<s;++a)l+=i[a][2]*u;for(a=0,s=i.length;a<s;++a){if((o=e.getAttribLocation(r,i[a][0]))<0)return d("GetAttributeFailed","Get Attribute Failed."),!1;e.vertexAttribPointer(o,i[a][2],e[i[a][1].toUpperCase()],!1,l,c),e.enableVertexAttribArray(o),c+=i[a][2]*u}}return!0}(e,t,n,i)},e.createFrameBuffer=function(e,t,n){return!f(e,WebGLRenderingContext)||!r(t)||!r(n)||t<=0||n<=0?null:function(e,t,n,i){var r,o,a;c(i)||(i={});function s(){o&&e.deleteTexture(o),a&&e.deleteRenderbuffer(a),r&&e.deleteFramebuffer(r)}if(!(r=e.createFramebuffer()))return s(),d("CreateFrameBufferFailed","Create FrameBuffer Failed."),null;if(!(o=e.createTexture()))return s(),d("CreateTextureFailed","Create Texture Failed."),null;if(e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),!(a=e.createRenderbuffer()))return s(),d("CreateRenderBufferFailed","Create RenderBuffer Failed."),null;e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t,n),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,a);var l=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.FRAMEBUFFER_COMPLETE!==l?(s(),d("CheckFrameBufferStatusFailed","Check FrameBuffer Status Failed: "+l.toString()),s()):(i.frameBuf=r,i.renderBuf=a,i.texture=o,e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),i)}(e,t,n)}}(ue.webgl,ue.defined,ue.isNum,ue.isArray,ue.isJson,ue.isFunc,ue._throwErr,ue._defineErr),ue._pointMap_=function(r,l,s){function e(e,t,n){this._bufferPosition=null,this._width=0,this._height=0,this._count=0,this._pointer=0,this.init(e,t,n)}var t=e.prototype;t.constructor=e;t.init=function(e,t,n){return!!this.initFromNumber(e,t,n)||!!this.initFromBuffer(e,t,n)};t.initFromBuffer=function(e,t,n){if(!r(e,Float32Array)&&!r(e,Float64Array))return!1;if(!l(t)||!l(n)||t<=0||65535<t||n<=0||65535<n)return!1;var i=Math.floor(e.length/4);return!(i<=0||t*n!==i)&&(this._bufferPosition=e,this._width=t,this._height=n,this._count=i,!(this._pointer=0))};t.initFromNumber=function(e,t){if(!l(e)||!l(t))return!1;if(e<=0||65535<e||t<=0||65535<t)return!1;this._width=e,this._height=t,this._count=e*t;var n,i=new Float64Array(4*this._count);for(this._pointer=0,this._bufferPosition=i,n=4*this._count;n--;)i[n]=NaN;return!0};t.setPointer=function(e){return!!l(e)&&(e<0&&(e=0),e>=this._count&&(e=this._count-1),this._pointer=e,!0)};t.getPointer=function(){return this._pointer};t.setData=function(e,t,n,i,r,o){if(!l(e)||e<0||e>=this._width||!l(t)||t<0||t>=this._height)return!1;var a=4*(t*this._width+e),s=this._bufferPosition;return s[a]=i,s[1+a]=r,s[2+a]=o,s[3+a]=n,!0};t.getData=function(e){for(var t,n,i,r,o,a=this._bufferPosition;;){if(this._pointer>=this._count)return null;if(i=a[t=4*this._pointer],r=a[1+t],o=a[2+t],n=a[3+t],!(isNaN(i)||isNaN(r)||isNaN(o)||isNaN(n)))break;this._pointer+=1}return s(e)||(e=[]),e[1]=Math.floor(this._pointer/this._width),e[0]=this._pointer-e[1]*this._width,e[2]=n,e[3]=i,e[4]=r,e[5]=o,this._pointer+=1,e};t.getBuffer=function(){return this._bufferPosition};t.setBuffer=function(e){return this._bufferPosition=e,!0};t.getWidth=function(){return this._width};return t.getHeight=function(){return this._height},e},ue.pointMap=ue._pointMap_(ue.defined,ue.isNum,ue.isArray),ue.wgProg=(Y=ue.defined,K=ue.isString,$=ue.isBool,q=ue.isFunc,J=ue.isJson,Q=ue.isArray,ee=ue.webgl.initShaders,te={},(ne=_e.prototype).constructor=_e,ne.destroy=function(e){return Y(e,_e)||(e=this),!(!Y(e.gl,WebGLRenderingContext)||(Y(e.program,WebGLProgram)&&e.gl.deleteProgram(e.program),Y(e.vShader,WebGLShader)&&e.gl.deleteShader(e.vShader),Y(e.fShader,WebGLShader)&&e.gl.deleteShader(e.fShader),e.program=null,e.fShader=null,e.vShader=null))},ne.link=function(e,t){if(Y(t,_e)||(t=this),Y(e,WebGLRenderingContext))_e.prototype.destroy(t),t.gl=e;else if(!Y(t.gl,WebGLRenderingContext))return!1;if(!K(t.vShaderSource)||!K(t.fShaderSource))return!1;var n=ee(t.gl,t.vShaderSource,t.fShaderSource,te);return!!Y(n.program,WebGLProgram)&&(_e.prototype.destroy(t),t.vShader=n.vShader,t.fShader=n.fShader,t.program=n.program,!0)},ne.setVShader=function(e,t,n){return Y(n,_e)||(n=this),!!Y(n.gl,WebGLRenderingContext)&&($(t)||(t=!0),!(!K(e)||""===e)&&(n.vShaderSource=e,!t||!K(n.fShaderSource)||""===n.fShaderSource||n.link()))},ne.setFShader=function(e,t,n){return Y(n,_e)||(n=this),!!Y(n.gl,WebGLRenderingContext)&&($(t)||(t=!0),!(!K(e)||""===e)&&(n.fShaderSource=e,!t||!K(n.vShaderSource)||""===n.vShaderSource||n.link()))},ne.setLoadFunction=function(e,t){return!!q(e)&&(Y(t,_e)||(t=this),t.loadFunc=e,!0)},ne.setDecodeFunction=function(e,t){return!!q(e)&&(Y(t,_e)||(t=this),t.decodeFunc=e,!0)},ne.loadFunction=function(e,t,n,i){if(Y(i,_e)||(i=this),!Q(n))return!1;if(!Y(i.gl,WebGLRenderingContext)||!Y(i.program,WebGLProgram))return!1;if(!q(i.loadFunc))return!1;var r=i.drawParams;r.splice(0,r.length);for(var o=n.length;o--;)r.unshift(n[o]);return i.loadFunc(i.gl,i.program,e,t,r)},ne.decodeFunction=function(e,t,n,i,r){return Y(r,_e)||(r=this),!!q(r.decodeFunc)&&r.decodeFunc(e,t,n,r.drawParams,i)},ne.useProgram=function(e){return Y(e,_e)||(e=this),!(!Y(e.gl,WebGLRenderingContext)||!Y(e.program,WebGLProgram)||(e.gl.useProgram(e.program),0))},_e),ue.accelerator=function(c,a,s,l,u,f,p,d,o,e,n,i,r,h,v,m){function g(e,t,n,i,r,o,a,s,l,c){var u,f,p=c(s),d=l.base.defined,h=l.PointMap,v=l.Matrix4,m=[4294967296,16777216,65536,256],g=n-1,y=i-1,_=null,w=[];for(f=o.length;f--;)(d((_=o[f])._matrixArr,Float32Array)||d(_._matrixArr,Float64Array))&&(o[f]=new v(_._isDouble),o[f].setBy(_));_=null;var x=(0,eval)("("+r.replace(/\/\/[^/|\n]*[\n]/g,"")+")");for(_=new h(n,i),f=t-4;0<=f;f-=4)255===e[f]&&255===e[f+1]&&255===e[f+2]&&255===e[f+3]||(x((g+.5)/n,(y+.5)/i,u=e[f+3]/m[0]+e[f+2]/m[1]+e[f+1]/m[2]+e[f]/m[3],o,w),_.setData(g,y,u,w[0],w[1],w[2])),p(100-Math.ceil((f+4)/t*100)),0<g?g-=1:(g=n-1,y-=1);a.data[0]=_.getBuffer(),a.data[1]=n,a.data[2]=i,a.ps[0]=1,a.ps[1]=0,a.ps[2]=0}function y(){if(!(this instanceof y))return new y;var t=this;this.d3Canvas=null,this.gl=null,this.vertices=null,this.buffer=null,this.indices=null,this.bufferInd=null,this.cHeight=512,this.cWidth=512,this.bHeight=512,this.bWidth=512,this.frameBuffer=null,this.firstTime=!0,this.prog=null,this.vLen=0,this.uLen=3,this.iLen=0,this.iType=0,this.eLen=4,this.workerProcess=null,this.workerInst=new e(g,function(e){},function(e){f(t.workerProcess)&&t.workerProcess(e)},["base",i,"null",v,"PointMap",n,"__f.base.defined, __f.base.isNum, __f.base.isArray",h,"Matrix4",r,"__f.base.defined, __f.base.isNum, __f.base.isArray, __f.base.isFunc",m])}var _=[1],t=y.prototype;t.constructor=y;function w(e){c(e,y)||(e=this),e.firstTime=!0;var t=e.gl,n=e.frameBuffer;return!!c(t,WebGLRenderingContext)&&(c(n,WebGLFramebuffer)&&(t.deleteTexture(n.texture),t.deleteRenderbuffer(n.renderBuf),t.deleteFramebuffer(n.frameBuf),e.frameBuffer=null),!(e.gl=null))}t.destroy=w;t.init=function(e,t,n,i){if(c(i,y)||(i=this),!a(e)||""===e)return!1;w(i);var r=document.getElementById(e),o=d(r,{antialias:!1});return!!c(o)&&(i.buffer=o.createBuffer(),!!i.buffer&&(i.bufferInd=o.createBuffer(),!!i.bufferInd&&(i.gl=o,i.d3Canvas=r,!!x(t,n,i)&&!!b(t,n,i))))};t.setVertices=function(e,t,n,i){c(i,y)||(i=this);var r=i.gl;if(!c(r,WebGLRenderingContext)||!c(i.buffer,WebGLBuffer))return!1;if(c(e,Float32Array))i.vertices=e,i.eLen=4;else if(c(e,Float64Array))i.vertices=e,i.eLen=8;else{if(!s(e))return!1;var o;n?(o=new Float64Array(e),i.eLen=8):(o=new Float32Array(e),i.eLen=4),i.vertices=o}return r.bindBuffer(r.ARRAY_BUFFER,i.buffer),r.bufferData(r.ARRAY_BUFFER,i.vertices,r.STATIC_DRAW),(!l(t)||t<=0)&&(t=3),i.uLen=t,i.vLen=Math.floor(i.vertices.length/i.uLen),!0};t.setIndices=function(e,t,n){c(n,y)||(n=this);var i=n.gl;if(!c(i,WebGLRenderingContext)||!c(n.bufferInd,WebGLBuffer))return!1;if(c(e,Uint8Array))n.indices=e,n.iType=i.UNSIGNED_BYTE;else if(c(e,Uint16Array))n.indices=e,n.iType=i.UNSIGNED_SHORT;else{if(!s(e))return!1;var r;t?(r=new Uint16Array(e),n.iType=i.UNSIGNED_SHORT):(r=new Uint8Array(e),n.iType=i.UNSIGNED_BYTE),n.indices=r}return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.bufferInd),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.indices,i.STATIC_DRAW),n.iLen=n.indices.length,!0};var x=function(e,t,n){c(n,y)||(n=this);var i=n.gl,r=n.d3Canvas;return!!c(i,WebGLRenderingContext)&&((!l(e)||e<0)&&(e=9),(!l(t)||t<0)&&(t=9),12<e&&(e=12),12<t&&(t=12),n.cHeight=1<<t,n.cWidth=1<<e,r.width=n.cWidth,r.height=n.cHeight,i.viewport(0,0,n.cWidth,n.cHeight),!0)};t.setSize=x;var b=function(e,t,n){c(n,y)||(n=this);var i=n.gl,r=n.frameBuffer;return!!c(i,WebGLRenderingContext)&&(c(r)&&(i.deleteTexture(r.texture),i.deleteRenderbuffer(r.renderBuf),i.deleteFramebuffer(r.frameBuf),r=null),(!l(e)||e<0)&&(e=9),(!l(t)||t<0)&&(t=9),12<e&&(e=12),12<t&&(t=12),n.bHeight=1<<t,n.bWidth=1<<e,n.frameBuffer=o(i,n.bWidth,n.bHeight),!0)};t.createFrameBuffer=b;t.setProg=function(e,t,n){c(n,y)||(n=this);var i=n.gl,r=n.frameBuffer;return!!c(i,WebGLRenderingContext)&&(!!c(e,p)&&(i!==e.gl&&e.link(i),!!c(e.program,WebGLProgram)&&(u(t)||(t=!1),!(!c(r)||!c(r.frameBuf,WebGLFramebuffer))&&(n.firstTime&&(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,r.texture),i.clearColor(1,1,1,1),i.enable(i.DEPTH_TEST),n.firstTime=!1),i.useProgram(e.program),n.prog=e,t?(i.bindFramebuffer(i.FRAMEBUFFER,r.frameBuf),i.viewport(0,0,n.bWidth,n.bHeight)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,n.cWidth,n.cHeight)),!0))))};t.setParam=function(e,t){c(t,y)||(t=this);var n=t.prog;return!(!c(n,p)||!c(n.program,WebGLProgram))&&(s(e)||(e=[]),n.loadFunction(t.eLen,t.uLen,e))};t.renderIt=function(e,t){c(t,y)||(t=this);var n=t.gl;return!!c(n,WebGLRenderingContext)&&(u(e)||(e=!0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),e?n.drawElements(n.TRIANGLES,t.iLen,t.iType,0):n.drawArrays(n.TRIANGLES,0,t.vLen),!0)};t.decodeIt=function(r,o,a){if(c(a,y)||(a=this),!f(r))return!1;u(o)||(o=!0);var e,t=a.gl,n=a.prog,i=a.cWidth,s=a.cHeight;if(!c(t,WebGLRenderingContext))return!1;if(!c(n,p)||!f(n.decodeFunc))return!1;e=i*s*4;var l=new Uint8Array(e);return t.readPixels(0,0,i,s,t.RGBA,t.UNSIGNED_BYTE,l),a.workerInst.do([l,e,i,s,n.decodeFunc.toString(),n.drawParams],_,function(e,t,n){var i=new h(e,t,n);r(-1,i),o&&!a.workerInst.getLength()&&a.workerInst.stop()},r),!0};return t.toDataUrl=function(e){return c(e,y)||(e=this),e.d3Canvas.toDataURL()},y}(ue.defined,ue.isString,ue.isArray,ue.isNum,ue.isBool,ue.isFunc,ue.wgProg,ue.webgl.getContext,ue.webgl.createFrameBuffer,ue.ZWorker,ue._pointMap_,ue._base_,ue.compute._matrix4_,ue.pointMap,ue,ue.compute.matrix4),ue.d2Set={},function(e,i,t,n){t(e)||(e={});function r(e){n(e)||(e="d2Cvs"),c=e,p=document.getElementById(c),d=p.getContext("2d"),u=p.width,f=p.height,h=d.getImageData(0,0,u,f)}var o,a,s,l,c="d2Cvs",u=1,f=1,p=null,d=null,h=null,v=NaN,m=[],g=0,y=0;e.init=r,e.drawIt=function(e){if(!i(e._bufferPosition,Float32Array)&&!i(e._bufferPosition,Float64Array))return!1;i(p)||r(),m.splice(0,m.length),y=e._width,g=e._height;for(var t=y*g;t--;)m.push(255);for(var n=[];e.getData(n);)m[(g-n[1]-1)*y+n[0]]=Math.floor(256*n[2]);return e.setPointer(0),function(){for(s=h.data,o=f;o--;)for(a=u;a--;)v=4*(o*u+a),l=m[Math.floor(o/f*g)*y+Math.floor(a/u*y)],s[v]=l,s[v+1]=l,s[v+2]=l,s[v+3]=255;d.putImageData(h,0,0)}(),!0},e.clear=function(){d.clearRect(0,0,u,f)}}(ue.d2Set,ue.defined,ue.isJson,ue.isString),ue.glFunctions={fShaderPrecision:"#ifdef GL_ES\n\t#ifdef GL_FRAGMENT_PRECISION_HIGH\n\t\tprecision highp float;\n\t#else\n\t\tprecision mediump float;\n\t#endif\n#endif\n",packDepth:"vec4 packDepth(in highp float vz, in vec4 result) {\n\tvec3 shifter = vec3(256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\tresult.gba = fract(abs(vz) * shifter);\n\tresult.r = abs(vz);\n\tresult = floor(result * 256.0) / 256.0;\n\tif(vz < 0.0) result.r = -result.r;\n\treturn result;\n}\n",normalizeDepth:"vec4 normalizeDepth(vec4 packedDepth) {\n\tbool sign = packedDepth.r < 0.0;\n\tpackedDepth.r = abs(packedDepth.r);\n\tpackedDepth.g += fract(packedDepth.r * 256.0);\n\tpackedDepth.b += fract(packedDepth.g * 256.0);\n\tpackedDepth.a += fract(packedDepth.b * 256.0);\n\tpackedDepth.b += floor(packedDepth.a) / 256.0;\n\tpackedDepth.g += floor(packedDepth.b) / 256.0;\n\tpackedDepth.r += floor(packedDepth.g) / 256.0;\n\tpackedDepth.gba = fract(packedDepth.gba);\n\tpackedDepth = floor(packedDepth * 256.0) / 256.0;\n\tif(sign) packedDepth.r = -packedDepth.r;\n\treturn packedDepth;\n}\n",unPackDepth:"highp float unPackDepth(in vec4 vz) {\n   if(0.0 > vz.x || 1.0 < vz.x || (1.0 == vz.x && 1.0 == vz.y && 1.0 == vz.z && 1.0 == vz.w)) return 2.0;\n   highp float result = vz.x + vz.y / 256.0 + vz.z / (256.0 * 256.0) + vz.w / (256.0 * 256.0 * 256.0);\n   return result;\n}\n"},ue.shaders={},ie=ue.shaders,re=ue.defined,oe=ue.isNum,ae=ue.isJson,se=ue.compute.matrix4,le=ue.wgProg,ce=ue.glFunctions,ae(ie)||(ie={}),ie.ortho=new le({vShaderSource:"attribute vec4 aPosition;\nuniform mat4 vpMatrix;\nvarying vec4 vfPos;\nvoid main() {\n\tvec4 afPos = vpMatrix * aPosition;\n\tgl_Position = afPos;\n\tvfPos = afPos;\n}\n",fShaderSource:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform float uDistance;\nvarying vec4 vfPos;\n"+ce.packDepth+"void main() {\n\tif(uDistance < 2.0 && distance(vfPos.xy / vfPos.w, vec2(0.0, 0.0)) > uDistance) discard;\n\tvec4 fz = vec4(0.0, 0.0, 0.0, 1.0);\n\tfz = packDepth(vfPos.z / vfPos.w / 2.0 + 0.5, fz);\n\tgl_FragColor = fz;\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0],a=r[1];if(!re(o,se))return!1;for(var s=6;s--;)if(!oe(r[s+2]))return!1;var l=new se;if(!l.setOrtho(r[2],r[3],r[4],r[5],r[6],r[7]))return!1;l.multiply(o),(!oe(a)||a<=0)&&(a=1);var c=e.getUniformLocation(t,"vpMatrix");if(!c)return!1;e.uniformMatrix4fv(c,!1,l._matrixArr);var u=e.getUniformLocation(t,"uDistance");if(!u)return!1;e.uniform1f(u,a);var f=e.getAttribLocation(t,"aPosition");return!(f<0||(e.vertexAttribPointer(f,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(f),r[8]=l.clone().inverse(4),r[9]=[],0))},decodeFunc:function(e,t,n,i,r){var o=i[9];return o[0]=2*e-1,o[1]=2*t-1,o[2]=2*n-1,o[3]=1,i[8].mvec(o),r[0]=o[0],r[1]=o[1],r[2]=o[2],!0}}),ie.persp=new le({vShaderSource:"attribute vec4 aPosition;\nuniform mat4 vpMatrix;\nvarying vec4 vfPos;\nvoid main() {\n\tvec4 afPos = vpMatrix * aPosition;\n\tgl_Position = afPos;\n\tvfPos = afPos;\n}\n",fShaderSource:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform float farSubNear;\nuniform float near;\nvarying vec4 vfPos;\n"+ce.packDepth+"void main() {\n\tvec4 fz = vec4(0.0, 0.0, 0.0, 1.0);\n\tfz = packDepth((vfPos.w - near) / farSubNear, fz);\n\tfz.a = 1.0;\n\tgl_FragColor = fz;\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0],a=r[1],s=r[2],l=r[3],c=r[4];if(!re(o,se))return!1;var u=new se(!0);u.setPerspective(l*Math.PI/180,c,a,s),u.multiply(o);var f=e.getUniformLocation(t,"vpMatrix");if(!f)return!1;e.uniformMatrix4fv(f,!1,u._matrixArr);var p=e.getUniformLocation(t,"near");if(!p)return!1;e.uniform1f(p,a);var d=e.getUniformLocation(t,"farSubNear");if(!d)return!1;e.uniform1f(d,s-a);var h=e.getAttribLocation(t,"aPosition");return!(h<0||(e.vertexAttribPointer(h,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(h),0))},decodeFunc:function(e,t,n,i,r){e=2*e-1,t=2*t-1,n=2*n-1;var o=i[9],a=(n*i[6]-i[5])/2;return o[0]=-a*i[7]*e,o[1]=-a/i[4]*i[7]*t,o[2]=a,o[3]=1,i[8].mvec(o),r[0]=o[0],r[1]=o[1],r[2]=o[2],!0}}),ie.normal=new le({vShaderSource:"attribute vec4 aPosition;\nuniform mat4 vpMatrix;\nvarying vec4 vfPos;\nvoid main() {\n\tvec4 afPos = vpMatrix * aPosition;\n\tgl_Position = afPos;\n\tvfPos = afPos;\n}\n",fShaderSource:ce.fShaderPrecision+"varying vec4 vfPos;\n"+ce.packDepth+"void main() {\n\tvec4 fz = vec4(0.0, 0.0, 0.0, 1.0);\n\tfz = packDepth(vfPos.z / vfPos.w / 2.0 + 0.5, fz);\n\tfz.w = 1.0;\n\tgl_FragColor = fz;\n}\n",loadFunc:function(e,t,n,i,r){var o=r[0];if(!re(o,se))return!1;var a=e.getUniformLocation(t,"vpMatrix");if(!a)return!1;e.uniformMatrix4fv(a,!1,o._matrixArr);var s=e.getAttribLocation(t,"aPosition");if(s<0)return!1;e.vertexAttribPointer(s,i,e.FLOAT,!1,n*i,0),e.enableVertexAttribArray(s),r[1]=o.clone().inverse(4),r[2]=[]},decodeFunc:function(e,t,n,i,r){var o=i[2];return o[0]=2*e-1,o[1]=2*t-1,o[2]=2*n-1,i[o[3]=1].mvec(o),r[0]=o[0],r[1]=o[1],r[2]=o[2],!0}}),e.exports=ue},function(e,t,n){var i={Viewer:{imageryProvider:{_RR_:!0,func:["Cesium","UrlTemplateImageryProvider"],isNew:!0,args:[{url:"http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}&s=Gali"}]},timeline:!1,shouldAnimate:!0,selectionIndicator:!1,infoBox:!0,baseLayerPicker:!1},ImageryProvider:{enablePickFeatures:!1,parameters:{service:"WMS",format:"image/png",transparent:!0}},TerrainProvider:{},Cesium3DTileset:{}};i.DrawLabel={font:"25px 黑体",pixelOffset:{_RR_:!0,func:["Cesium","Cartesian2"],isNew:!0,args:[0,-20]},fillColor:{_RR_:!0,func:["Cesium","Color"],isNew:!0,args:[1,1,1,1]},outlineColor:{_RR_:!0,func:["Cesium","Color"],isNew:!0,args:[.2,.2,.8,1]},outlineWidth:5,style:Cesium.LabelStyle.FILL_AND_OUTLINE},i.DrawPoint={color:{_RR_:!0,func:["Cesium","Color"],isNew:!0,args:[1,1,0,1]},pixelSize:5,outlineColor:{_RR_:!0,func:["Cesium","Color"],isNew:!0,args:[1,0,0,1]},outlineWidth:2},i.DrawPolyline={width:4,material:{_RR_:!0,func:["Cesium","Color"],isNew:!0,args:[1,.6,.6,1]},clampToGround:!0,arcType:Cesium.ArcType.NONE},i.DrawPolygon={material:{_RR_:!0,func:["Cesium","Color"],isNew:!0,args:[.8,.2,.2,.5]}},e.exports=i},function(e,t,n){var i=n(2),r=i.isNum,o={EventType:{Step:0,CameraMove:1,LeftClick:2,RightClick:3,MiddleClick:4,MouseMove:5,LeftDown:6,LeftUp:7,RightDown:8,RightUp:9,MiddleDown:10,MiddleUp:11},TourType:{Smooth:"smooth",Bounce:"bounce"}};o.SmoothType={Linear:function(t){return r(t)||(t=1),function(e){return t*e}},Smooth:i.compute.smoothFunc},e.exports=o},function(e,t,n){var i,r,o,a=n(2),s={};!function(e,t,a,s,n){t(e)||(e={}),e.funcAng=n;e.distance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))};e.calcArea=function(e){for(var t=0,n=0;n<e.length;n++){var i,r=e[n];i=n<e.length-1?e[n+1]:e[0],t+=r.y*i.z-i.y*r.z}return Math.abs(t/2)};e.ctsEqual=function(e,t,n){return s(n)||(n=1e-6),Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n};e.getBoxCenter=function(e,t,n){var i;a(n,Cesium.Cartesian3)||(n=new Cesium.Cartesian3),t.minX=NaN,t.maxX=NaN,t.minY=NaN,t.maxY=NaN,t.minZ=NaN,t.maxZ=NaN;for(var r=0,o=s(t.len)?t.len:e.length;r<o;++r)((i=e[r]).x>t.minX||isNaN(t.minX))&&(t.minX=i.x),(i.y>t.minY||isNaN(t.minY))&&(t.minY=i.y),(i.z>t.minZ||isNaN(t.minZ))&&(t.minZ=i.z),(i.x<t.maxX||isNaN(t.maxX))&&(t.maxX=i.x),(i.y<t.maxY||isNaN(t.maxY))&&(t.maxY=i.y),(i.z<t.maxZ||isNaN(t.maxZ))&&(t.maxZ=i.z);return isNaN(t.minX)||isNaN(t.maxX)||(n.x=(t.minX+t.maxX)/2),isNaN(t.minY)||isNaN(t.maxY)||(n.y=(t.minY+t.maxY)/2),isNaN(t.minZ)||isNaN(t.maxZ)||(n.z=(t.minZ+t.maxZ)/2),n};e.compareDist=function(e,t,n){var i=e.x-n.x,r=e.y-n.y,o=e.z-n.z,a=t.x-n.x,s=t.y-n.y,l=t.z-n.z;return i*i+r*r+o*o<a*a+s*s+l*l}}(s,a.isJson,a.defined,a.isNum,a.compute.funcAng),s.getFaMatrix=function(l,c,u,f){if(!l(f))return null;var p=new f.Cartesian3(0,0,0),d=new f.Cartesian3(0,0,0);return function(e,t,n,i){var r;if(l(e,f.Cartographic))r=0;else{if(!l(e,f.Cartesian3))return null;r=1}l(t,f.Ellipsoid)||(t=f.Ellipsoid.WGS84),l(n,c)||(n=new c(!0)),n.makeIdentity(),0==r?t.cartographicToCartesian(e,p):(p.x=e.x,p.y=e.y,p.z=e.z),t.geodeticSurfaceNormal(p,d);var o=d.x,a=d.y,s=d.z;return n.setRotate(1,-Math.asin(s/Math.sqrt(o*o+a*a+s*s)),!0).rotate(2,u(o,a),!0),i&&n.translate(p.x,p.y,p.z),n}}(a.defined,a.compute.matrix4,a.compute.funcAng,Cesium),s.convertMatrix=(i=a.defined,r=a.compute.matrix4,o=Cesium.Matrix4,{mCToI:function(e,t){return i(t,r)||(t=new r(!0)),t.setFromBuffer(o.toArray(e)),t},mIToC:function(e,t){return i(t,o)||(t=new o),o.fromArray(e.getBuffer(),0,t),t}}),e.exports=s},function(e,t,n){var i=n(2),r=n(4),o=function(e,t,n,i,r,o,a,s,l,c,u,f){if(!i(u))return null;var p,d,h,v,m,g,y,_,w,x,b,P,C,T,k,E={widgets:{},gemini:new e,step:new e,events:new n,_func:{}};return p=t,d=E.step,h=E.gemini,v=c.Step+"",m=[0,null],p(d),d.set("_map",function(e){m[0]=e,h.map(function(e){m[1]=e[0],(e=e[2]).publish(v,m)})}),E._func.register=function(e,t,a,s,l,c,u,f,p,d){t(e)||(e={});var h=[];return e.rI=function(e,t){if(!l(e)||!f(e.uuid)||!l(t))return!1;var n,i=e.uuid,r=e.divId;n=a.get(i),c(n)||(n=[]),n[0]=e,n[1]=t,n[2]=new p,n[3]={},n[4]=e.viewer,n[5]={},a.set(i,n,null);var o=s[r];return o&&o.uuid!==i&&o.prototype&&u(o.prototype.destroy)&&o.prototype.destroy(o),s[r]=e,h[0]=i,d.publish("_register",h),!0},e.uI=function(e){if(!l(e)||!f(e.uuid))return!1;var t,n,i=e.uuid,r=e.divId;if(h[0]=i,d.publish("_unregister",h),t=a.get(i),c(t)){for(n in t=t[3])t.hasOwnProperty(n)&&t[n].destroy();a.remove(i)}return l(s[r])&&delete s[r],!0},e.gI=function(e){if(!l(e)||!f(e.uuid))return null;var t=a.get(e.uuid);return c(t)?t[1]:null},e.cI=function e(t){if(!f(e))return!1;var n=s[t];return!(!l(n)||!u(n.destroy))&&n.destroy()},e}(null,r,E.gemini,E.widgets,i,l,s,o,n,E.events),function(e,t,l,c,u,f,p,d,h,v,n){t(e)||(e={});function m(e){switch(e){case h.LeftClick:return v.ScreenSpaceEventType.LEFT_CLICK;case h.RightClick:return v.ScreenSpaceEventType.RIGHT_CLICK;case h.MiddleClick:return v.ScreenSpaceEventType.MIDDLE_CLICK;case h.MouseMove:return v.ScreenSpaceEventType.MOUSE_MOVE;case h.LeftDown:return v.ScreenSpaceEventType.LEFT_DOWN;case h.LeftUp:return v.ScreenSpaceEventType.LEFT_UP;case h.RightDown:return v.ScreenSpaceEventType.RIGHT_DOWN;case h.RightUp:return v.ScreenSpaceEventType.RIGHT_UP;case h.MiddleDown:return v.ScreenSpaceEventType.MIDDLE_DOWN;case h.MiddleUp:return v.ScreenSpaceEventType.MIDDLE_UP}return NaN}n.subscribe("_register",function(e){var t,o,n,i,r,a=f.get(e);if(u(a))for(var s in r=a[0],i=a[2],n=a[4],a=a[3],h)h.hasOwnProperty(s)&&(t=m(h[s]),p(t)&&(o=a[s],l(o,v.ScreenSpaceEventHandler)||(o=new v.ScreenSpaceEventHandler(n.scene.canvas)),a[s]=o,function(e,t,n,i,r){o.setInputAction(function(){arguments[arguments.length++]=r,n.publish(e,arguments)},i)}(h[s]+"",0,i,t,r)))},"_events",0),e.addEventListener=function(e,t,n,i,r){if(!l(r)||!d(n))return!1;c(t)&&""!==t||(t=Math.uuid()),p(i)||(i=0);var o=r.uuid;if(!c(o))return!1;var a=f.get(o);if(!u(a))return!1;var s=e+"";switch(e){case h.Step:case h.CameraMove:case h.LeftClick:case h.RightClick:case h.MiddleClick:case h.MouseMove:case h.LeftDown:case h.LeftUp:case h.RightDown:case h.RightUp:case h.MiddleDown:case h.MiddleUp:return a[2].subscribe(s,n,t,i)}return!1},e.removeEventListener=function(e,t,n){if(!l(n))return!1;if(!c(t)||""===t)return!1;var i=n.uuid;if(!c(i))return!1;var r=f.get(i);if(!u(r))return!1;var o=e+"";switch(e){case h.Step:case h.CameraMove:case h.LeftClick:case h.RightClick:case h.MiddleClick:case h.MouseMove:case h.LeftDown:case h.LeftUp:case h.RightDown:case h.RightUp:case h.MiddleDown:case h.MiddleUp:return r[2].unsubscribeHd(o,t)}return!1},e.triggerEvent=function(e,t,n){if(!l(n))return!1;if(!u(t))return!1;var i=n.uuid;if(!c(i))return!1;var r=f.get(i);if(!u(r))return!1;switch(r=r[2],e){case h.Step:case h.CameraMove:case h.LeftClick:case h.RightClick:case h.MiddleClick:case h.MouseMove:case h.LeftDown:case h.LeftUp:case h.RightDown:case h.RightUp:case h.MiddleDown:case h.MiddleUp:return r.publish(e+"",t),!0}return!1},e.getEventLength=function(e,t){if(!l(t))return-1;var n=t.uuid;if(!c(n))return-1;var i=f.get(n);if(!u(i))return-1;switch(i=i[2],e){case h.Step:case h.CameraMove:case h.LeftClick:case h.RightClick:case h.MiddleClick:case h.MouseMove:case h.LeftDown:case h.LeftUp:case h.RightDown:case h.RightUp:case h.MiddleDown:case h.MiddleUp:return i.getLength(e+"")}return-1}}(E._func,r,i,o,l,E.gemini,a,s,c,u,E.events),g=E.events,y=E.gemini,_=l,w=f,x=E._func.addEventListener,b=c,P="_createCamMove",g.subscribe("_register",function(e){var t=y.get(e);_(t)&&x(b.Step,P,function(e){var u={lng:0,lat:0,hgt:0,heading:0,pitch:0,roll:0},f=e[4],p=e[2],d=[];return function(e,t){var n,i,r,o,a,s,l=f.camera,c=l.positionCartographic;c&&(n=c.longitude,i=c.latitude,r=c.height,o=l.heading,a=l.pitch,s=l.roll,w(n,u.lng,1e-14)&&w(i,u.lat,1e-14)&&w(r,u.hgt,1e-4)&&w(o,u.heading,1e-4)&&w(a,u.pitch,1e-4)&&w(s,u.roll,1e-4)||(u.lng=n,u.lat=i,u.hgt=r,u.heading=o,u.pitch=a,u.roll=s,d[0]=n,d[1]=i,d[2]=r,d[3]=o,d[4]=a,d[5]=s,d[6]=t,p.publish(b.CameraMove+"",d)))}}(t),0,t[0])},P,0),function(e,t,n,i,r,o,a,s,l,c,u,f){t(e)||(e={});var p=-1,d=-1,h=new r,v=new r;i.subscribe("_register",function(e){if(u(e)){var t=c.get(e);f(t)&&(t=t[0],h.map(function(e){e.call(t)}))}},"_APIOper",-1e3),i.subscribe("_unregister",function(e){if(u(e)){var t=c.get(e);f(t)&&(t=t[0],v.map(function(e){e.call(t)}))}},"_APIOper",-1e3),e.createObj=function(e){return!!n(e)&&(p+=1,h.set(p+"",e,-p))},e.destroyObj=function(e){return!!n(e)&&(d+=1,v.set(d+"",e,-d))}}(E._func,r,s,E.events,e,0,0,0,0,E.gemini,o,l),E._func.getPrivate=(C=l,T=o,k=E.gemini,function(e,t){if(!T(e))return null;var n=k.get(e);return C(n)?n[t]:null}),E._func}(i.arrGroup,i.startStep,i.eventAggregator,i.defined,i.isJson,i.isString,i.isNum,i.isFunc,i.isArray,r.EventType,Cesium,i.isEqual);e.exports=o},function(e,t,n){}],r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0);function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,o});